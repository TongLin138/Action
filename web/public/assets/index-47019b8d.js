var as=Object.defineProperty,cs=Object.defineProperties;var ls=Object.getOwnPropertyDescriptors;var Vt=Object.getOwnPropertySymbols;var us=Object.prototype.hasOwnProperty,hs=Object.prototype.propertyIsEnumerable;var qt=(t,e,n)=>e in t?as(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,de=(t,e)=>{for(var n in e||(e={}))us.call(e,n)&&qt(t,n,e[n]);if(Vt)for(var n of Vt(e))hs.call(e,n)&&qt(t,n,e[n]);return t},Ue=(t,e)=>cs(t,ls(e));var z=(t,e,n)=>new Promise((s,o)=>{var i=c=>{try{l(n.next(c))}catch(h){o(h)}},a=c=>{try{l(n.throw(c))}catch(h){o(h)}},l=c=>c.done?s(c.value):Promise.resolve(c.value).then(i,a);l((n=n.apply(t,e)).next())});import{cq as ds,eH as fs,eI as at,cf as ps,eJ as gs,eK as ms,cg as _s,P as ys,aK as Wt,d as F,S as Kt,G as vs,bf as bs,j as g,I as ws,h as pe,o as f,p as H,v as N,bg as Et,d2 as fn,d3 as pn,bm as Cs,b as Oe,r as D,a4 as nt,a8 as Gt,a6 as gn,B as mn,k as Ss,an as ge,e as r,c as C,w as y,q as P,a as _,E as re,t as j,D as Qe,i as ht,aE as _n,f as ks,aI as Es,br as we,at as Le,bt as Ne,bB as Ts,bA as yn,eL as Z,A as ie,aF as st,x as ae,aH as Ls,n as q,as as Re,eM as Yt,eN as Rs,eO as xs,eP as Os,eQ as As,eR as Ms,ar as Bs,_ as me,bp as Ce,eS as be,aG as dt,eT as $s,eU as Is,eV as vn,eW as Tt,eX as bn,eY as Ns,eZ as Lt,e_ as Rt,e$ as Ps,bd as Ae,f0 as se,f1 as Hs,f2 as wn,f3 as jt,f4 as Ds,f5 as Fs,f6 as Cn,a5 as zs,al as Us,f7 as Vs,bv as xt,f8 as ot,f9 as Sn,e7 as kn,a9 as V,fa as En,ad as Ot,ap as Tn,fb as ke,fc as Ln,aa as qs,m as Ws,ac as xe,c$ as rt,a7 as Rn,ab as xn,fd as Ks,d0 as Gs,bq as Ys,fe as js,ff as Xs,L as Js,fg as On,fh as Zs,fi as Qs,fj as eo,fk as Ve,fl as qe}from"./index-797c0a85.js";import{u as fe,c as to,d as no}from"./useAppInject-e4ee4e96.js";import{t as so}from"./throttle-d0379a19.js";import{N as oo}from"./Icon-abc31adc.js";import{_ as ro}from"./text-116532e9.js";import{N as io}from"./Space-3cb079f3.js";import{_ as ao}from"./Log-af750a5b.js";import{_ as co}from"./Empty-aa248199.js";import{_ as lo}from"./Ellipsis-348a6bfd.js";import{_ as An,a as Mn}from"./DrawerContent-784d0172.js";import{u as Q}from"./useDesign-a03ef768.js";import{_ as Bn}from"./Scrollbar-cdc51570.js";import{p as G}from"./propTypes-69de8b77.js";import{_ as Pe}from"./monacoEditor-d72532b2.js";import{_ as Xt}from"./Skeleton-e990348c.js";import{_ as ft}from"./Icon-73e4f596.js";import{_ as $n}from"./Menu-d4749224.js";import{u as uo}from"./useBreakpoint-9a34e1b7.js";import{u as ho}from"./useLocale-659629ea.js";import{_ as fo,a as po,C as go}from"./clickOutside-500094cc.js";import{s as In,l as mo,a as _o}from"./Tooltip-271e10cc.js";import{p as yo}from"./interface-6b37b567.js";import vo from"./index-cd730b8e.js";import{u as bo}from"./useTransition-5809f8e4.js";import{u as wo}from"./layoutContentResize-a0d57243.js";import{_ as Co}from"./BackTop-ed1045ea.js";import{_ as So}from"./Layout-06ff11a6.js";import{F as ko}from"./index-00ca05b7.js";import{N as Eo}from"./Dropdown-03dfd01d.js";import{a as To,_ as Lo}from"./Tabs-63ecaee7.js";import{u as Ro}from"./useRunLog-7bd89b36.js";import"./use-locale-3967e664.js";import"./Code-81e48d26.js";import"./use-houdini-2ac76cd5.js";import"./on-fonts-ready-2684803e.js";import"./ChevronRight-54f6887a.js";import"./create-ref-setter-f485918b.js";import"./Add-843bb42e.js";function xo(){}var Oo="[object Boolean]";function Nn(t){return t===!0||t===!1||ds(t)&&fs(t)==Oo}var Ao=1/0,Mo=at&&1/In(new at([,-0]))[1]==Ao?function(t){return new at(t)}:xo;const Bo=Mo;var $o=200;function Io(t,e,n){var s=-1,o=gs,i=t.length,a=!0,l=[],c=l;if(n)a=!1,o=ms;else if(i>=$o){var h=e?null:Bo(t);if(h)return In(h);a=!1,o=_s,c=new ps}else c=e?[]:l;e:for(;++s<i;){var u=t[s],d=e?e(u):u;if(u=n||u!==0?u:0,a&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue e;e&&c.push(d),l.push(u)}else o(c,d,n)||(c!==l&&c.push(d),l.push(u))}return l}function No(t,e){return t&&t.length?Io(t,mo(e)):[]}const Po=ys("layout-header",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 box-sizing: border-box;
 width: 100%;
 background-color: var(--n-color);
 color: var(--n-text-color);
`,[Wt("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 `),Wt("bordered",`
 border-bottom: solid 1px var(--n-border-color);
 `)]),Ho={position:yo,inverted:Boolean,bordered:{type:Boolean,default:!1}},Do=F({name:"LayoutHeader",props:Object.assign(Object.assign({},Kt.props),Ho),setup(t){const{mergedClsPrefixRef:e,inlineThemeDisabled:n}=vs(t),s=Kt("Layout","-layout-header",Po,bs,t,e),o=g(()=>{const{common:{cubicBezierEaseInOut:a},self:l}=s.value,c={"--n-bezier":a};return t.inverted?(c["--n-color"]=l.headerColorInverted,c["--n-text-color"]=l.textColorInverted,c["--n-border-color"]=l.headerBorderColorInverted):(c["--n-color"]=l.headerColor,c["--n-text-color"]=l.textColor,c["--n-border-color"]=l.headerBorderColor),c}),i=n?ws("layout-header",g(()=>t.inverted?"a":"b"),o,t):void 0;return{mergedClsPrefix:e,cssVars:n?void 0:o,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var t;const{mergedClsPrefix:e}=this;return(t=this.onRender)===null||t===void 0||t.call(this),pe("div",{class:[`${e}-layout-header`,this.themeClass,this.position&&`${e}-layout-header--${this.position}-positioned`,this.bordered&&`${e}-layout-header--bordered`],style:this.cssVars},this.$slots)}}),Fo={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},zo=N("path",{fill:"currentColor",d:"M19 7h-2.81c-.45-.8-1.07-1.5-1.82-2L16 3.41L14.59 2l-2.17 2.17a6.002 6.002 0 0 0-2.83 0L7.41 2L6 3.41L7.62 5c-.75.5-1.36 1.21-1.81 2H3v2h2.09c-.06.33-.09.66-.09 1v1H3v2h2v1c0 .34.03.67.09 1H3v2h2.81A6.002 6.002 0 0 0 13 19.65V19c0-.57.09-1.14.25-1.69c-.66.45-1.45.69-2.25.69c-2.21 0-4-1.79-4-4v-4c0-2.21 1.79-4 4-4s4 1.79 4 4v4c0 .19 0 .39-.05.58c.59-.54 1.29-.96 2.05-1.23V13h2v-2h-2v-1c0-.34-.03-.67-.09-1H19V7m-6 2v2H9V9h4m0 4v2H9v-2h4m3 3h6v6h-6v-6Z"},null,-1),Uo=[zo];function Vo(t,e){return f(),H("svg",Fo,[...Uo])}const qo={name:"mdi-bug-stop-outline",render:Vo},Wo={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ko=N("path",{fill:"currentColor",d:"M6 3h8.99v1.5H6zM2.99 6h1.5v1.5h-1.5zm0-3h1.5v1.5h-1.5zm0 6.01H4.5v1.5H2.99z"},null,-1),Go=N("path",{fill:"currentColor",d:"M4.5 12h-3V1.49h15V6H18V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v9.48a2 2 0 0 0 2 2h2.5Z"},null,-1),Yo=N("path",{fill:"currentColor",d:"M22 7.5H8a2 2 0 0 0-2 2V19a2 2 0 0 0 2 2h5.53v1.53H12V24h6v-1.49h-1.5V21H22a2 2 0 0 0 2-2V9.5a2 2 0 0 0-2-2Zm.51 12h-15V9h15Z"},null,-1),jo=[Ko,Go,Yo];function Xo(t,e){return f(),H("svg",Wo,[...jo])}const Jo={name:"eos-icons-background-tasks",render:Xo},Zo={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Qo=N("path",{fill:"currentColor",d:"M22.54 21.12L20.41 19l2.13-2.12l-1.42-1.42L19 17.59l-2.12-2.13l-1.42 1.42L17.59 19l-2.13 2.12l1.42 1.42L19 20.41l2.12 2.13M6 2a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h7.81c-.36-.62-.61-1.3-.73-2H6V4h7v5h5v4.08c.33-.05.67-.08 1-.08c.34 0 .67.03 1 .08V8l-6-6M8 12v2h8v-2m-8 4v2h5v-2Z"},null,-1),er=[Qo];function tr(t,e){return f(),H("svg",Zo,[...er])}const nr={name:"mdi-file-document-remove-outline",render:tr},sr={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},or=Et('<g stroke="currentColor" stroke-linecap="round" stroke-width="2"><path fill="currentColor" fill-opacity="0" stroke-dasharray="60" stroke-dashoffset="60" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"></animate><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.15s" values="0;0.3"></animate></path><path fill="none" stroke-dasharray="8" stroke-dashoffset="8" d="M12 12L16 16M12 12L8 8M12 12L8 16M12 12L16 8"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="8;0"></animate></path></g>',1),rr=[or];function ir(t,e){return f(),H("svg",sr,[...rr])}const ar={name:"line-md-close-circle-twotone",render:ir},cr={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},lr=Et('<g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path fill="currentColor" fill-opacity="0" stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"></animate><animate fill="freeze" attributeName="fill-opacity" begin="1.2s" dur="0.15s" values="0;0.3"></animate></path><path fill="none" stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"></animate></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"></animate></circle>',2),ur=[lr];function hr(t,e){return f(),H("svg",cr,[...ur])}const dr={name:"line-md-alert-twotone",render:hr},fr={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},pr=Et('<g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path fill="currentColor" fill-opacity="0" stroke-dasharray="60" stroke-dashoffset="60" d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"></animate><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.15s" values="0;0.3"></animate></path><path fill="none" stroke-dasharray="14" stroke-dashoffset="14" d="M8 12L11 15L16 10"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="14;0"></animate></path></g>',1),gr=[pr];function mr(t,e){return f(),H("svg",fr,[...gr])}const _r={name:"line-md-confirm-circle-twotone",render:mr},yr=(t,e="message")=>fn.post({url:"/runCmd",data:t,headers:{"Content-Type":pn.JSON}},{errorMessageMode:e}),vr=(t,e="message")=>fn.post({url:"/stopTask",data:t,headers:{"Content-Type":pn.JSON}},{errorMessageMode:e}),le=Object.create(null);le.open="0";le.close="1";le.ping="2";le.pong="3";le.message="4";le.upgrade="5";le.noop="6";const je=Object.create(null);Object.keys(le).forEach(t=>{je[le[t]]=t});const pt={type:"error",data:"parser error"},Pn=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Hn=typeof ArrayBuffer=="function",Dn=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,At=({type:t,data:e},n,s)=>Pn&&e instanceof Blob?n?s(e):Jt(e,s):Hn&&(e instanceof ArrayBuffer||Dn(e))?n?s(e):Jt(new Blob([e]),s):s(le[t]+(e||"")),Jt=(t,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(t)};function Zt(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ct;function br(t,e){if(Pn&&t.data instanceof Blob)return t.data.arrayBuffer().then(Zt).then(e);if(Hn&&(t.data instanceof ArrayBuffer||Dn(t.data)))return e(Zt(t.data));At(t,!1,n=>{ct||(ct=new TextEncoder),e(ct.encode(n))})}const Qt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$e=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let t=0;t<Qt.length;t++)$e[Qt.charCodeAt(t)]=t;const wr=t=>{let e=t.length*.75,n=t.length,s,o=0,i,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),u=new Uint8Array(h);for(s=0;s<n;s+=4)i=$e[t.charCodeAt(s)],a=$e[t.charCodeAt(s+1)],l=$e[t.charCodeAt(s+2)],c=$e[t.charCodeAt(s+3)],u[o++]=i<<2|a>>4,u[o++]=(a&15)<<4|l>>2,u[o++]=(l&3)<<6|c&63;return h},Cr=typeof ArrayBuffer=="function",Mt=(t,e)=>{if(typeof t!="string")return{type:"message",data:Fn(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Sr(t.substring(1),e)}:je[n]?t.length>1?{type:je[n],data:t.substring(1)}:{type:je[n]}:pt},Sr=(t,e)=>{if(Cr){const n=wr(t);return Fn(n,e)}else return{base64:!0,data:t}},Fn=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},zn=String.fromCharCode(30),kr=(t,e)=>{const n=t.length,s=new Array(n);let o=0;t.forEach((i,a)=>{At(i,!1,l=>{s[a]=l,++o===n&&e(s.join(zn))})})},Er=(t,e)=>{const n=t.split(zn),s=[];for(let o=0;o<n.length;o++){const i=Mt(n[o],e);if(s.push(i),i.type==="error")break}return s};function Tr(){return new TransformStream({transform(t,e){br(t,n=>{const s=n.length;let o;if(s<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,s);else if(s<65536){o=new Uint8Array(3);const i=new DataView(o.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{o=new Uint8Array(9);const i=new DataView(o.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(n)})}})}let lt;function We(t){return t.reduce((e,n)=>e+n.length,0)}function Ke(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let s=0;for(let o=0;o<e;o++)n[o]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function Lr(t,e){lt||(lt=new TextDecoder);const n=[];let s=0,o=-1,i=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(s===0){if(We(n)<1)break;const c=Ke(n,1);i=(c[0]&128)===128,o=c[0]&127,o<126?s=3:o===126?s=1:s=2}else if(s===1){if(We(n)<2)break;const c=Ke(n,2);o=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(We(n)<8)break;const c=Ke(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),u=h.getUint32(0);if(u>Math.pow(2,53-32)-1){l.enqueue(pt);break}o=u*Math.pow(2,32)+h.getUint32(4),s=3}else{if(We(n)<o)break;const c=Ke(n,o);l.enqueue(Mt(i?c:lt.decode(c),e)),s=0}if(o===0||o>t){l.enqueue(pt);break}}}})}const Un=4;function U(t){if(t)return Rr(t)}function Rr(t){for(var e in U.prototype)t[e]=U.prototype[e];return t}U.prototype.on=U.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};U.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};U.prototype.off=U.prototype.removeListener=U.prototype.removeAllListeners=U.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,o=0;o<n.length;o++)if(s=n[o],s===e||s.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this};U.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,o=n.length;s<o;++s)n[s].apply(this,e)}return this};U.prototype.emitReserved=U.prototype.emit;U.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};U.prototype.hasListeners=function(t){return!!this.listeners(t).length};const J=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function Vn(t,...e){return e.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const xr=J.setTimeout,Or=J.clearTimeout;function it(t,e){e.useNativeTimers?(t.setTimeoutFn=xr.bind(J),t.clearTimeoutFn=Or.bind(J)):(t.setTimeoutFn=J.setTimeout.bind(J),t.clearTimeoutFn=J.clearTimeout.bind(J))}const Ar=1.33;function Mr(t){return typeof t=="string"?Br(t):Math.ceil((t.byteLength||t.size)*Ar)}function Br(t){let e=0,n=0;for(let s=0,o=t.length;s<o;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function $r(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Ir(t){let e={},n=t.split("&");for(let s=0,o=n.length;s<o;s++){let i=n[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Nr extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class Bt extends U{constructor(e){super(),this.writable=!1,it(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,s){return super.emitReserved("error",new Nr(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Mt(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=$r(e);return n.length?"?"+n:""}}const qn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),gt=64,Pr={};let en=0,Ge=0,tn;function nn(t){let e="";do e=qn[t%gt]+e,t=Math.floor(t/gt);while(t>0);return e}function Wn(){const t=nn(+new Date);return t!==tn?(en=0,tn=t):t+"."+nn(en++)}for(;Ge<gt;Ge++)Pr[qn[Ge]]=Ge;let Kn=!1;try{Kn=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){}const Hr=Kn;function Gn(t){const e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Hr))return new XMLHttpRequest}catch(n){}if(!e)try{return new J[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(n){}}function Dr(){}const Fr=function(){return new Gn({xdomain:!1}).responseType!=null}();class zr extends Bt{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){const s=location.protocol==="https:";let o=location.port;o||(o=s?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||o!==e.port}const n=e&&e.forceBase64;this.supportsBinary=Fr&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Er(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,kr(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Wn()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ce(this.uri(),e)}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}class ce extends U{constructor(e,n){super(),it(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Vn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const s=this.xhr=new Gn(n);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&s.setRequestHeader(o,this.opts.extraHeaders[o])}}catch(o){}if(this.method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{s.setRequestHeader("Accept","*/*")}catch(o){}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var o;s.readyState===3&&((o=this.opts.cookieJar)===null||o===void 0||o.parseCookies(s)),s.readyState===4&&(s.status===200||s.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof s.status=="number"?s.status:0)},0))},s.send(this.data)}catch(o){this.setTimeoutFn(()=>{this.onError(o)},0);return}typeof document!="undefined"&&(this.index=ce.requestsCount++,ce.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Dr,e)try{this.xhr.abort()}catch(n){}typeof document!="undefined"&&delete ce.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}ce.requestsCount=0;ce.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",sn);else if(typeof addEventListener=="function"){const t="onpagehide"in J?"pagehide":"unload";addEventListener(t,sn,!1)}}function sn(){for(let t in ce.requests)ce.requests.hasOwnProperty(t)&&ce.requests[t].abort()}const $t=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),Ye=J.WebSocket||J.MozWebSocket,on=!0,Ur="arraybuffer",rn=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Vr extends Bt{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,s=rn?{}:Vn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=on&&!rn?n?new Ye(e,n):new Ye(e):new Ye(e,n,s)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],o=n===e.length-1;At(s,this.supportsBinary,i=>{const a={};try{on&&this.ws.send(i)}catch(l){}o&&$t(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Wn()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Ye}}class qr extends Bt{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=Lr(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),o=Tr();o.readable.pipeTo(e.writable),this.writer=o.writable.getWriter();const i=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this.writer.write(a).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],o=n===e.length-1;this.writer.write(s).then(()=>{o&&$t(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const Wr={websocket:Vr,webtransport:qr,polling:zr},Kr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mt(t){const e=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let o=Kr.exec(t||""),i={},a=14;for(;a--;)i[Gr[a]]=o[a]||"";return n!=-1&&s!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Yr(i,i.path),i.queryKey=jr(i,i.query),i}function Yr(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function jr(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,o,i){o&&(n[o]=i)}),n}let Yn=class Ee extends U{constructor(e,n={}){super(),this.binaryType=Ur,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=mt(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=mt(n.host).host),it(this,n),this.secure=n.secure!=null?n.secure:typeof location!="undefined"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=n.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ir(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Un,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Wr[e](s)}open(){let e;if(this.opts.rememberUpgrade&&Ee.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(n){this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),s=!1;Ee.priorWebsocketSuccess=!1;const o=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!s)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ee.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function i(){s||(s=!0,u(),n.close(),n=null)}const a=d=>{const p=new Error("probe error: "+d);p.transport=n.name,i(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function c(){a("socket closed")}function h(d){n&&d.name!==n.name&&i()}const u=()=>{n.removeListener("open",o),n.removeListener("error",a),n.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};n.once("open",o),n.once("error",a),n.once("close",l),this.once("close",c),this.once("upgrading",h),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Ee.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const o=this.writeBuffer[s].data;if(o&&(n+=Mr(o)),s>0&&n>this.maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}write(e,n,s){return this.sendPacket("message",e,n,s),this}send(e,n,s){return this.sendPacket("message",e,n,s),this}sendPacket(e,n,s,o){if(typeof n=="function"&&(o=n,n=void 0),typeof s=="function"&&(o=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:n,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){Ee.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let s=0;const o=e.length;for(;s<o;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}};Yn.protocol=Un;function Xr(t,e="",n){let s=t;n=n||typeof location!="undefined"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n!="undefined"?t=n.protocol+"//"+t:t="https://"+t),s=mt(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(n&&n.port===s.port?"":":"+s.port),s}const Jr=typeof ArrayBuffer=="function",Zr=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,jn=Object.prototype.toString,Qr=typeof Blob=="function"||typeof Blob!="undefined"&&jn.call(Blob)==="[object BlobConstructor]",ei=typeof File=="function"||typeof File!="undefined"&&jn.call(File)==="[object FileConstructor]";function It(t){return Jr&&(t instanceof ArrayBuffer||Zr(t))||Qr&&t instanceof Blob||ei&&t instanceof File}function Xe(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(Xe(t[n]))return!0;return!1}if(It(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Xe(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Xe(t[n]))return!0;return!1}function ti(t){const e=[],n=t.data,s=t;return s.data=_t(n,e),s.attachments=e.length,{packet:s,buffers:e}}function _t(t,e){if(!t)return t;if(It(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=_t(t[s],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=_t(t[s],e));return n}return t}function ni(t,e){return t.data=yt(t.data,e),delete t.attachments,t}function yt(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=yt(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=yt(t[n],e));return t}const si=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],oi=5;var M;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(M||(M={}));class ri{constructor(e){this.replacer=e}encode(e){return(e.type===M.EVENT||e.type===M.ACK)&&Xe(e)?this.encodeAsBinary({type:e.type===M.EVENT?M.BINARY_EVENT:M.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===M.BINARY_EVENT||e.type===M.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=ti(e),s=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(s),o}}function an(t){return Object.prototype.toString.call(t)==="[object Object]"}class Nt extends U{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===M.BINARY_EVENT;s||n.type===M.BINARY_ACK?(n.type=s?M.EVENT:M.ACK,this.reconstructor=new ii(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(It(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(M[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===M.BINARY_EVENT||s.type===M.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(i,n)}else s.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}s.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(Nt.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(n){return!1}}static isPayloadValid(e,n){switch(e){case M.CONNECT:return an(n);case M.DISCONNECT:return n===void 0;case M.CONNECT_ERROR:return typeof n=="string"||an(n);case M.EVENT:case M.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&si.indexOf(n[0])===-1);case M.ACK:case M.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ii{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=ni(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ai=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Nt,Encoder:ri,get PacketType(){return M},protocol:oi},Symbol.toStringTag,{value:"Module"}));function ne(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const ci=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Xn extends U{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ne(e,"open",this.onopen.bind(this)),ne(e,"packet",this.onpacket.bind(this)),ne(e,"error",this.onerror.bind(this)),ne(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(ci.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:M.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const a=this.ids++,l=n.pop();this._registerAckCallback(a,l),s.id=a}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var s;const o=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},o);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,[null,...a])}}emitWithAck(e,...n){const s=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,i)=>{n.push((a,l)=>s?a?i(a):o(l):o(a)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...i)=>s!==this._queue[0]?void 0:(o!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:M.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case M.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case M.EVENT:case M.BINARY_EVENT:this.onevent(e);break;case M.ACK:case M.BINARY_ACK:this.onack(e);break;case M.DISCONNECT:this.ondisconnect();break;case M.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...o){s||(s=!0,n.packet({type:M.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:M.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function Me(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Me.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Me.prototype.reset=function(){this.attempts=0};Me.prototype.setMin=function(t){this.ms=t};Me.prototype.setMax=function(t){this.max=t};Me.prototype.setJitter=function(t){this.jitter=t};class vt extends U{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,it(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Me({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||ai;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Yn(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const o=ne(n,"open",function(){s.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=ne(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{o(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(o),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ne(e,"ping",this.onping.bind(this)),ne(e,"data",this.ondata.bind(this)),ne(e,"error",this.onerror.bind(this)),ne(e,"close",this.onclose.bind(this)),ne(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){$t(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Xn(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Be={};function Je(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Xr(t,e.path||"/socket.io"),s=n.source,o=n.id,i=n.path,a=Be[o]&&i in Be[o].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return l?c=new vt(s,e):(Be[o]||(Be[o]=new vt(s,e)),c=Be[o]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Je,{Manager:vt,Socket:Xn,io:Je,connect:Je});let et=null;const li=()=>{const t={}.VITE_PROXY||"[]";return JSON.parse(t),""},ui=()=>{const t=Cs();et=Je(li(),{path:"/api/ws",extraHeaders:{Authorization:`Bearer ${t}`}}),et.on("connect",()=>{console.log("ws connected")})},hi=()=>(et||ui(),et),di={style:{"vertical-align":"-4px",padding:"0 2px"}},fi=F({__name:"index",setup(t,{expose:e}){const{getIsMobile:n}=fe(),{t:s}=Oe(),o=D(null);let i=null,a=null;const l={show:!1,title:s("component.runLog.title"),cmd:"",runId:"",logRef:"",runTimes:0,isLogOverOk:!1,isLogOverFail:!1,isLogOverExit:!1,isLogReachBottom:!0,isStoping:!1,isLogEmpty:!1},c=nt(Gt(l)),{show:h,title:u,logRef:d,runTimes:p,isLogOverOk:b,isLogOverFail:T,isLogOverExit:L,isStoping:S,isLogEmpty:k}=gn(c),B=O=>z(this,null,function*(){c.runId=yield yr({cmd:O})}),I=O=>z(this,null,function*(){switch(O){case"cmdStop":if(!c.cmd)return;c.isStoping=!0;const m=c.cmd.split("task run ")[1].split(" ")[0];try{const x=yield vr({path:m});setTimeout(()=>{d.value+=`
${x}
`,c.isLogOverOk=!1,c.isLogOverFail=!1,c.isLogOverExit=!0},1e3)}catch(x){c.isStoping=!1}break;case"close":c.show=!1,a&&clearInterval(a),a=null;break}}),w=so(O=>{const m=o.value.$el.clientHeight,x=O.target.scrollTop,ee=O.target.scrollHeight;c.isLogReachBottom=m+x>=ee-10},300),E=g(()=>c.isLogOverOk||c.isLogOverFail||c.isLogOverExit?s("component.modal.close"):""),v=g(()=>c.cmd.startsWith("task run ")),A=(O={cmd:""})=>{Object.assign(c,Gt(l),O,{show:!0}),ge().then(()=>setTimeout(()=>B(c.cmd),500)),i==null||i.off("runLog").on("runLog",({code:m,result:x={}})=>{a||(a=setInterval(()=>{p.value+=.1},100)),x.runId===c.runId&&(x.over&&(clearInterval(a),d.value||(k.value=!0)),d.value+=x.log||"",m?!c.isStoping&&(c.isLogOverOk=x.over):!c.isStoping&&(c.isLogOverFail=x.over))}),ge().then(()=>{var x;const m=(x=o.value.scrollbarRef)==null?void 0:x.containerRef;m.removeEventListener("scroll",w),m.addEventListener("scroll",w)})};return mn(()=>{i=hi(),Ss(()=>{c.logRef&&ge(()=>{var O;c.isLogReachBottom&&((O=o.value)==null||O.scrollTo({position:"bottom",silent:!0}))})})}),e({open:A}),(O,m)=>{const x=_n,ee=_r,oe=dr,Y=ar,W=oo,ue=ro,te=io,De=ao,_e=nr,Fe=co,R=Jo,$=ks,K=qo,ze=Es,ye=lo,Se=An,ve=Mn;return r(n)?(f(),C(ve,{key:1,show:r(h),"onUpdate:show":m[7]||(m[7]=he=>ht(h)?h.value=he:null),height:"100vh",placement:"bottom","auto-focus":!1,"mask-closable":!1},{default:y(()=>[_(Se,{closable:!r(v),"header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:y(()=>[_(te,null,{default:y(()=>[!r(b)&&!r(T)&&!r(L)?(f(),C(x,{key:0,size:"small",style:{"vertical-align":"-0.05em","padding-right":"12px",width:"26px",height:"26px","padding-left":".5em"}})):(f(),C(W,{key:1,size:26},{default:y(()=>[r(b)?(f(),C(ee,{key:0,style:{color:"var(--app-success-color)","vertical-align":"0"}})):r(L)?(f(),C(oe,{key:1,style:{color:"var(--app-warning-color)","vertical-align":"0"}})):r(T)?(f(),C(Y,{key:2,style:{color:"var(--app-error-color)","vertical-align":"0"}})):P("",!0)]),_:1})),_(ye,{style:{height:"100%","max-width":"260px"}},{tooltip:y(()=>[N("span",null,j(r(u)),1)]),default:y(()=>[N("span",di,j(r(u)),1)]),_:1}),r(p)!==0?(f(),C(ue,{key:2,depth:3,style:{"font-size":"8px","vertical-align":"-6px"}},{default:y(()=>[re(j(`${r(p).toFixed(1)}s`),1)]),_:1})):P("",!0)]),_:1})]),footer:y(()=>[!r(b)&&!r(T)&&!r(L)?(f(),C(te,{key:0},{default:y(()=>[_($,{secondary:"",focusable:!1,onClick:m[4]||(m[4]=he=>I("close"))},{icon:y(()=>[_(W,null,{default:y(()=>[_(R,{style:{"vertical-align":"baseline"}})]),_:1})]),default:y(()=>[re(" "+j(r(s)("component.runLog.runBackground")),1)]),_:1}),r(v)?(f(),C($,{key:0,secondary:"",focusable:!1,loading:r(S),onClick:m[5]||(m[5]=he=>I("cmdStop"))},{icon:y(()=>[_(W,null,{default:y(()=>[_(K,{style:{"vertical-align":"baseline"}})]),_:1})]),default:y(()=>[re(" "+j(r(s)("component.runLog.stop")),1)]),_:1},8,["loading"])):P("",!0)]),_:1})):P("",!0),r(E)?(f(),C(Qe,{key:1,name:"fade",mode:"out-in",appear:""},{default:y(()=>[_($,{type:r(L)?"warning":r(T)?"error":"primary",focusable:!1,onClick:m[6]||(m[6]=he=>I("close"))},{default:y(()=>[re(j(r(E)),1)]),_:1},8,["type"])]),_:1})):P("",!0)]),default:y(()=>[r(k)?(f(),C(Fe,{key:1,class:"flex-jc-ac",style:{height:"400px"},size:"huge",description:r(s)("component.runLog.emptyTitle")},{icon:y(()=>[_(W,null,{default:y(()=>[_(_e)]),_:1})]),_:1},8,["description"])):(f(),C(De,{key:0,ref_key:"logInstRef",ref:o,log:r(d),"font-size":14,"line-height":1.5,language:"naive-log",style:{width:"100%",height:"100%"}},null,8,["log"]))]),_:1},8,["closable"])]),_:1},8,["show"])):(f(),C(ze,{key:0,show:r(h),"onUpdate:show":m[3]||(m[3]=he=>ht(h)?h.value=he:null),preset:"dialog",closable:!r(v),"auto-focus":!1,"close-on-esc":!1,"mask-closable":!1,style:{width:"600px"}},{icon:y(()=>[!r(b)&&!r(T)&&!r(L)?(f(),C(x,{key:0,size:"small",style:{"vertical-align":"-0.05em","padding-right":"1em",width:"24px",height:"24px","padding-left":".5em"}})):P("",!0),_(W,null,{default:y(()=>[r(b)?(f(),C(ee,{key:0,style:{color:"var(--app-success-color)","vertical-align":"0"}})):r(L)?(f(),C(oe,{key:1,style:{color:"var(--app-warning-color)","vertical-align":"0"}})):r(T)?(f(),C(Y,{key:2,style:{color:"var(--app-error-color)","vertical-align":"0"}})):P("",!0)]),_:1})]),header:y(()=>[_(te,null,{default:y(()=>[re(j(r(u))+" ",1),r(p)!==0?(f(),C(ue,{key:0,depth:3,style:{"font-size":"8px","vertical-align":"-0.1em"}},{default:y(()=>[re(j(`${r(p).toFixed(1)}s`),1)]),_:1})):P("",!0)]),_:1})]),action:y(()=>[!r(b)&&!r(T)&&!r(L)?(f(),C(te,{key:0},{default:y(()=>[_($,{secondary:"",size:"small",focusable:!1,onClick:m[0]||(m[0]=he=>I("close"))},{icon:y(()=>[_(W,null,{default:y(()=>[_(R,{style:{"vertical-align":"baseline"}})]),_:1})]),default:y(()=>[re(" "+j(r(s)("component.runLog.runBackground")),1)]),_:1}),r(v)?(f(),C($,{key:0,secondary:"",size:"small",focusable:!1,loading:r(S),onClick:m[1]||(m[1]=he=>I("cmdStop"))},{icon:y(()=>[_(W,null,{default:y(()=>[_(K,{style:{"vertical-align":"baseline"}})]),_:1})]),default:y(()=>[re(" "+j(r(s)("component.runLog.stop")),1)]),_:1},8,["loading"])):P("",!0)]),_:1})):P("",!0),r(E)?(f(),C(Qe,{key:1,name:"fade",mode:"out-in",appear:""},{default:y(()=>[_($,{size:"small",type:r(L)?"warning":r(T)?"error":"primary",focusable:!1,onClick:m[2]||(m[2]=he=>I("close"))},{default:y(()=>[re(j(r(E)),1)]),_:1},8,["type"])]),_:1})):P("",!0)]),default:y(()=>[r(k)?(f(),C(Fe,{key:1,class:"flex-jc-ac",style:{height:"600px"},size:"huge",description:r(s)("component.runLog.emptyTitle")},{icon:y(()=>[_(W,null,{default:y(()=>[_(_e)]),_:1})]),_:1},8,["description"])):(f(),C(De,{key:0,ref_key:"logInstRef",ref:o,log:r(d),"font-size":15,"line-height":1.5,language:"naive-log",style:{"padding-top":"1em",width:"100%",height:"600px"}},null,8,["log"]))]),_:1},8,["show","closable"]))}}}),Jn=F({__name:"ScrollContainer",props:{inverted:{type:Boolean}},setup(t){const e=t,{color:n,colorHover:s}=we("Scrollbar",!0),o=g(()=>e.inverted?{color:n,colorHover:s}:void 0);return(i,a)=>{const l=Bn;return f(),C(l,{"builtin-theme-overrides":r(o)},{default:y(()=>[Le(i.$slots,"default")]),_:3},8,["builtin-theme-overrides"])}}}),pi=/^(\d|\.)+$/,cn=/(\d|\.)+/;function Ie(t,{c:e=1,offset:n=0,attachPx:s=!0}={}){if(typeof t=="number"){const o=(t+n)*e;return o===0?"0":`${o}px`}else if(typeof t=="string")if(pi.test(t)){const o=(Number(t)+n)*e;return s?o===0?"0":`${o}px`:`${o}`}else{const o=cn.exec(t);return o?t.replace(cn,String((Number(o[0])+n)*e)):t}return t}const gi=""+new URL("logo-af5872b0.png",import.meta.url).href,mi=["src"],Pt=F({__name:"AppLogo",props:{logoSize:G.stringNumber.def(24),showTitle:G.bool.def(!0),titleSize:G.stringNumber.def(18),titleColor:G.string,collapsed:G.bool,collapsedShowTitle:G.bool.def(!1),isStatic:G.bool.def(!1),width:G.stringNumber,canGoHome:G.bool.def(!1)},setup(t){Ne(v=>({"1390b5f8":r(I)}));const e=t,{prefixCls:n}=Q("app-logo"),s=Ts(),{title:o}=yn(),{getMenuWidth:i,getMobileWidth:a,getMenuRootIndent:l,getCollapsed:c}=Z(),{getIsMobile:h}=fe(),u=D(),d=D(),p=D(`inset(0px ${e.collapsed?100:0}% 0px 0px)`);ie([u,d,()=>e.showTitle],()=>{b()});function b(){const v=Re(u),A=Re(d);if(!v||!A||!e.showTitle)return;const O=T(v,A);O();let m;Yt(v,"transitionstart",()=>{if(m){m.resume();return}m=Rs(O)}),Yt(v,"transitionend",()=>{m&&m.pause()})}function T(...v){return()=>{const[A,O]=v,m=A.offsetWidth,x=O.offsetWidth,ee=O.offsetLeft,oe=16,Y=x-m+ee+oe;p.value=`inset(0px ${Os(Y,0,x+1)}px 0px 0px)`}}const L=st(),S=g(()=>{const{collapsed:v,collapsedShowTitle:A,isStatic:O,width:m,canGoHome:x}=e;return Object.assign({cursor:x?"pointer":"unset"},O?{}:{paddingLeft:v?"7px":`${l.value-4}px`,width:(v!=null?v:c.value)&&!A?Ie(xs):Ie((m!=null?m:h.value)?a.value:i.value)})}),k=g(()=>({fontSize:Ie(e.logoSize),transition:"font-size var(--app-transition-duration) var(--app-bezier)",zIndex:10,height:"24px",width:"24px",marginLeft:"6px"})),B=g(()=>{const{titleSize:v,titleColor:A}=e;return de(de({fontSize:Ie(v),lineHeight:1.3},e.isStatic?{}:{clipPath:p.value}),A?{color:A}:{})}),I=g(()=>e.collapsed?0:"100%"),w=g(()=>o);function E(){e.canGoHome&&L(s.getUserInfo.homePath||Ls.BASE_HOME)}return(v,A)=>(f(),H("div",{ref_key:"wrapperEl",ref:u,class:"flex-ac ease-in-out-300",style:ae(r(S)),onClick:E},[N("img",{src:r(gi),title:"Logo",style:ae(r(k))},null,12,mi),_(Qe,{name:"fade-slide-right",mode:"out-in"},{default:y(()=>[t.showTitle&&!t.collapsed?(f(),H("div",{key:0,ref_key:"titleEl",ref:d,class:q(["font-segoe ml-3 font-semibold",[`${r(n)}__title`]]),style:ae(r(B))},j(r(w)),7)):P("",!0)]),_:1})],4))}});function He(t,e){e=e||{};const{size:n="small",delay:s=100,timeout:o=3e4,loading:i=!1,loadingComponent:a,retry:l=!0}=e;return As({loader:t,loadingComponent:i?_(_n,{size:n,style:"margin:1rem;"},null):a,timeout:o,delay:s,onError:l?(c,h,u,d)=>{c.message.match(/fetch/)&&d<=3?h():u()}:Ms})}const _i=F({name:"FullScreen",setup(){const{t}=Oe(),{toggle:e,isFullscreen:n}=Bs();return{getTitle:g(()=>r(n)?t("layout.header.tooltipExitFull"):t("layout.header.tooltipEntryFull")),isFullscreen:n,toggle:e}}});function yi(t,e,n,s,o,i){const a=fo,l=po,c=_o;return f(),C(c,{trigger:"hover",placement:"bottom",delay:1e3},{trigger:y(()=>[N("span",{class:"app-layout-header-anction-icon",style:{transition:".2s"},onClick:e[0]||(e[0]=(...h)=>t.toggle&&t.toggle(...h))},[t.isFullscreen?(f(),C(a,{key:0,viewBox:"64 64 896 896"})):(f(),C(l,{key:1,viewBox:"64 64 896 896"}))])]),default:y(()=>[re(" "+j(t.getTitle),1)]),_:1})}const vi=me(_i,[["render",yi]]),bi=He(()=>Pe(()=>import("./UserDropdown-843d7c1f.js"),["./UserDropdown-843d7c1f.js","./index-797c0a85.js","./monacoEditor-d72532b2.js","./monacoEditor-8cb3d17f.css","./index-857af31e.css","./Dropdown-03dfd01d.js","./Tooltip-271e10cc.js","./Icon-abc31adc.js","./on-fonts-ready-2684803e.js","./ChevronRight-54f6887a.js","./Empty-aa248199.js","./use-locale-3967e664.js","./create-ref-setter-f485918b.js"],import.meta.url),{loadingComponent:_("div",{class:"flex items-center space-x-2"},[_(Xt,{height:"24px",circle:!0},null),_(Xt,{text:!0,round:!0,class:"w-60px h-12px"},null)])}),wi=He(()=>Pe(()=>import("./Breadcrumb-beb63a17.js"),["./Breadcrumb-beb63a17.js","./Icon-73e4f596.js","./index-797c0a85.js","./monacoEditor-d72532b2.js","./monacoEditor-8cb3d17f.css","./index-857af31e.css","./propTypes-69de8b77.js","./Icon-abc31adc.js","./BreadcrumbItem-a6910d65.js","./text-116532e9.js"],import.meta.url));He(()=>Pe(()=>import("./index-f8c52460.js"),["./index-f8c52460.js","./index-797c0a85.js","./monacoEditor-d72532b2.js","./monacoEditor-8cb3d17f.css","./index-857af31e.css","./Avatar-c373b8f2.js","./utils-e4b90de2.js","./Tag-274eae2a.js","./text-116532e9.js","./Ellipsis-348a6bfd.js","./Tooltip-271e10cc.js","./Icon-abc31adc.js","./on-fonts-ready-2684803e.js","./Empty-aa248199.js","./use-locale-3967e664.js","./Scrollbar-cdc51570.js","./useDesign-a03ef768.js","./attribute-2ee9e579.js","./Tabs-63ecaee7.js","./Add-843bb42e.js","./throttle-d0379a19.js","./Space-3cb079f3.js"],import.meta.url));const Ci=He(()=>Pe(()=>import("./DarkModeToggle-d0f1ad96.js"),["./DarkModeToggle-d0f1ad96.js","./moon-2d2d1f7c.js","./index-797c0a85.js","./monacoEditor-d72532b2.js","./monacoEditor-8cb3d17f.css","./index-857af31e.css","./Icon-abc31adc.js","./Space-3cb079f3.js","./Popselect-78543ac2.js","./Tooltip-271e10cc.js","./on-fonts-ready-2684803e.js","./utils-c87a7780.js","./FocusDetector-effeeed3.js","./Empty-aa248199.js","./use-locale-3967e664.js","./use-resize-d169ca1a.js","./create-ref-setter-f485918b.js"],import.meta.url)),Si=He(()=>Pe(()=>import("./LocalePicker-2cf2884f.js"),["./LocalePicker-2cf2884f.js","./language-9a7d5d8f.js","./index-797c0a85.js","./monacoEditor-d72532b2.js","./monacoEditor-8cb3d17f.css","./index-857af31e.css","./useLocale-659629ea.js","./Popselect-78543ac2.js","./Tooltip-271e10cc.js","./Icon-abc31adc.js","./on-fonts-ready-2684803e.js","./utils-c87a7780.js","./FocusDetector-effeeed3.js","./Empty-aa248199.js","./use-locale-3967e664.js","./use-resize-d169ca1a.js","./create-ref-setter-f485918b.js"],import.meta.url)),ki=F({__name:"BarTrigger",props:{collapsed:G.bool.def(!1),onClick:{type:Function}},setup(t){const{siderToggleBarColor:e,siderToggleBarColorHover:n}=we("Layout"),{siderToggleBarColor:s,siderToggleBarColorHover:o}=we("Layout",!0),{getIsDarkMode:i}=Ce(),a=g(()=>{const c=i.value;return{color:c?s:e,hoverColor:c?o:n}});Ne(()=>({"toggle-bar-color":a.value.color,"toggle-bar-color-hover":a.value.hoverColor}));const{prefixCls:l}=Q("layout-toggle-bar");return(c,h)=>(f(),H("div",{class:q([r(l),{collapsed:t.collapsed}]),onClick:h[0]||(h[0]=(...u)=>t.onClick&&t.onClick(...u))},[N("div",{class:q(`${r(l)}__top`)},null,2),N("div",{class:q(`${r(l)}__bottom`)},null,2)],2))}});const Ei=N("i",{class:"icon"},[N("svg",{viewBox:"0 0 16 16",fill:"none",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},[N("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"})])],-1),Ti=[Ei],Li=F({__name:"ButtonTrigger",props:{collapsed:G.bool.def(!1),onClick:{type:Function}},setup(t){const{siderToggleButtonColor:e,siderToggleButtonIconColor:n,siderToggleButtonBorder:s}=we("Layout"),{siderToggleBarColor:o,siderToggleButtonIconColor:i,siderToggleButtonBorder:a}=we("Layout",!0),{getIsDarkMode:l}=Ce(),c=g(()=>{const u=l.value;return{bgColor:u?o:e,iconColor:u?i:n,border:u?a:s}});Ne(()=>{const u=c.value;return{"toggle-button-color":u.bgColor,"toggle-button-icon-color":u.iconColor,"toggle-button-border":u.border}});const{prefixCls:h}=Q("layout-toggle-button");return(u,d)=>(f(),H("div",{class:q([r(h),{collapsed:t.collapsed}]),onClick:d[0]||(d[0]=(...p)=>t.onClick&&t.onClick(...p))},Ti,2))}});const Ri={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},xi=N("path",{fill:"currentColor",d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"},null,-1),Oi=[xi];function Ai(t,e){return f(),H("svg",Ri,[...Oi])}const Mi={name:"ant-design-menu-fold-outlined",render:Ai},Bi={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},$i=N("path",{fill:"currentColor",d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1),Ii=[$i];function Ni(t,e){return f(),H("svg",Bi,[...Ii])}const Pi={name:"ant-design-menu-unfold-outlined",render:Ni},Hi=F({__name:"HeaderTrigger",props:{collapsed:G.bool.def(!1),onClick:{type:Function}},setup(t){const{getIsMobile:e}=fe();return(n,s)=>{const o=Pi,i=Mi;return f(),H("span",{class:"app-layout-header-anction-icon",style:ae(r(e)?"background-color: transparent !important":""),onClick:s[0]||(s[0]=(...a)=>t.onClick&&t.onClick(...a))},[t.collapsed?(f(),C(o,{key:0,viewBox:"64 64 896 896"})):(f(),C(i,{key:1,viewBox:"64 64 896 896"}))],4)}}}),Zn=F({__name:"index",props:{type:{default:be.BAR},onClick:null},setup(t){const e=t,n=new Map;n.set(be.BAR,ki),n.set(be.BUTTON,Li),n.set(be.HEADER,Hi);const{toggleCollapsed:s}=Z(),o=()=>{e!=null&&e.onClick&&$s(e.onClick)?e.onClick():s()};return(i,a)=>t.type?(f(),C(dt(r(n).get(t.type)),{key:0,style:{transition:".2s"},onClick:o})):P("",!0)}});function Di(t){for(var e=[],n=0;n<t.length;){var s=t[n];if(s==="*"||s==="+"||s==="?"){e.push({type:"MODIFIER",index:n,value:t[n++]});continue}if(s==="\\"){e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(s==="{"){e.push({type:"OPEN",index:n,value:t[n++]});continue}if(s==="}"){e.push({type:"CLOSE",index:n,value:t[n++]});continue}if(s===":"){for(var o="",i=n+1;i<t.length;){var a=t.charCodeAt(i);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){o+=t[i++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(n));e.push({type:"NAME",index:n,value:o}),n=i;continue}if(s==="("){var l=1,c="",i=n+1;if(t[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if(t[i]==="\\"){c+=t[i++]+t[i++];continue}if(t[i]===")"){if(l--,l===0){i++;break}}else if(t[i]==="("&&(l++,t[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));c+=t[i++]}if(l)throw new TypeError("Unbalanced pattern at ".concat(n));if(!c)throw new TypeError("Missing pattern at ".concat(n));e.push({type:"PATTERN",index:n,value:c}),n=i;continue}e.push({type:"CHAR",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}function Fi(t,e){e===void 0&&(e={});for(var n=Di(t),s=e.prefixes,o=s===void 0?"./":s,i="[^".concat(Te(e.delimiter||"/#?"),"]+?"),a=[],l=0,c=0,h="",u=function(v){if(c<n.length&&n[c].type===v)return n[c++].value},d=function(v){var A=u(v);if(A!==void 0)return A;var O=n[c],m=O.type,x=O.index;throw new TypeError("Unexpected ".concat(m," at ").concat(x,", expected ").concat(v))},p=function(){for(var v="",A;A=u("CHAR")||u("ESCAPED_CHAR");)v+=A;return v};c<n.length;){var b=u("CHAR"),T=u("NAME"),L=u("PATTERN");if(T||L){var S=b||"";o.indexOf(S)===-1&&(h+=S,S=""),h&&(a.push(h),h=""),a.push({name:T||l++,prefix:S,suffix:"",pattern:L||i,modifier:u("MODIFIER")||""});continue}var k=b||u("ESCAPED_CHAR");if(k){h+=k;continue}h&&(a.push(h),h="");var B=u("OPEN");if(B){var S=p(),I=u("NAME")||"",w=u("PATTERN")||"",E=p();d("CLOSE"),a.push({name:I||(w?l++:""),pattern:I&&!w?i:w,prefix:S,suffix:E,modifier:u("MODIFIER")||""});continue}d("END")}return a}function Te(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Qn(t){return t&&t.sensitive?"":"i"}function zi(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,o=n.exec(t.source);o;)e.push({name:o[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(t.source);return t}function Ui(t,e,n){var s=t.map(function(o){return bt(o,e,n).source});return new RegExp("(?:".concat(s.join("|"),")"),Qn(n))}function Vi(t,e,n){return qi(Fi(t,n),e,n)}function qi(t,e,n){n===void 0&&(n={});for(var s=n.strict,o=s===void 0?!1:s,i=n.start,a=i===void 0?!0:i,l=n.end,c=l===void 0?!0:l,h=n.encode,u=h===void 0?function(x){return x}:h,d=n.delimiter,p=d===void 0?"/#?":d,b=n.endsWith,T=b===void 0?"":b,L="[".concat(Te(T),"]|$"),S="[".concat(Te(p),"]"),k=a?"^":"",B=0,I=t;B<I.length;B++){var w=I[B];if(typeof w=="string")k+=Te(u(w));else{var E=Te(u(w.prefix)),v=Te(u(w.suffix));if(w.pattern)if(e&&e.push(w),E||v)if(w.modifier==="+"||w.modifier==="*"){var A=w.modifier==="*"?"?":"";k+="(?:".concat(E,"((?:").concat(w.pattern,")(?:").concat(v).concat(E,"(?:").concat(w.pattern,"))*)").concat(v,")").concat(A)}else k+="(?:".concat(E,"(").concat(w.pattern,")").concat(v,")").concat(w.modifier);else w.modifier==="+"||w.modifier==="*"?k+="((?:".concat(w.pattern,")").concat(w.modifier,")"):k+="(".concat(w.pattern,")").concat(w.modifier);else k+="(?:".concat(E).concat(v,")").concat(w.modifier)}}if(c)o||(k+="".concat(S,"?")),k+=n.endsWith?"(?=".concat(L,")"):"$";else{var O=t[t.length-1],m=typeof O=="string"?S.indexOf(O[O.length-1])>-1:O===void 0;o||(k+="(?:".concat(S,"(?=").concat(L,"))?")),m||(k+="(?=".concat(S,"|").concat(L,")"))}return new RegExp(k,Qn(n))}function bt(t,e,n){return t instanceof RegExp?zi(t,e):Array.isArray(t)?Ui(t,e,n):Vi(t,e,n)}const ln=Object.assign({}),wt=[];Object.keys(ln).forEach(t=>{const e=ln[t].default||{},n=Array.isArray(e)?[...e]:[e];wt.push(...n)});const Ht=()=>Ps().getProjectConfig.permissionMode,Wi=()=>Ht()===Lt.BACK,Ki=()=>Ht()===Lt.ROUTE_MAPPING,Dt=()=>Ht()===Lt.ROLE,Ct=(t,e)=>t.filter(n=>{var s;return(!e||!((s=n.meta)!=null&&s.hideMenu))&&!n.hideMenu}).map(n=>(n.children&&(n.children=Ct(n.children,e),n.children.length||Reflect.deleteProperty(n,"children")),n)),es=[];(()=>{wt.sort((t,e)=>(t.orderNo||0)-(e.orderNo||0));for(const t of wt)es.push(Is(t))})();function Ft(){return z(this,null,function*(){const t=Rt();return Wi()?Ct(t.getBackMenuList,!0):Ki()?Ct(t.getFrontMenuList):es})}const ts=()=>z(void 0,null,function*(){const t=yield Ft();if(Dt()){const e=Tt.getRoutes();return bn(t,zt(e))}return t});function tt(t){return z(this,null,function*(){const e=yield Ft(),n=yield vn(e,t);return n==null?void 0:n[0]})}function St(){return z(this,null,function*(){const e=(yield Ft()).map(n=>Ue(de({},n),{children:void 0}));if(Dt()){const n=Tt.getRoutes();return e.filter(zt(n))}return e})}function Ze(t){return z(this,null,function*(){var s;const n=(yield ts()).find(o=>o.path===t);if(!n||!n.children||(s=n==null?void 0:n.meta)!=null&&s.hideChildrenInMenu)return[];if(Dt()){const o=Tt.getRoutes();return bn(n.children,zt(o))}return n.children})}function zt(t){return e=>!!t.find(s=>{var i,a;if(Ns(e.path))return!0;if((i=s.meta)!=null&&i.carryParam)return bt(s.path).test(e.path);const o=s.path===e.path;return o?(a=s.meta)!=null&&a.ignoreAuth?!0:o||bt(s.path).test(e.path):!1})}function Gi(t,e,n){const s=D(),{currentRoute:o}=Ae(),{getIsMobile:i}=fe(),a=Rt(),{setMenuSetting:l,getIsHorizontal:c,getSplit:h}=Z(),u=Hs(L,50),d=g(()=>r(t)!==se.SECONDARY&&!r(c)),p=g(()=>{let k=r(h);const B=r(n);return Nn(B)&&(k=B),!k||r(t)!==se.SECONDARY}),b=g(()=>r(t)===se.ROOT),T=g(()=>r(t)===se.NONE||!r(h));ie([()=>r(o).path,()=>r(e),()=>r(t)],I=>z(this,[I],function*([k,B]){if(r(d)||r(i))return;const{meta:w}=r(o),E=w.currentActiveMenu;let v;B?v=B:(v=yield tt(k),v||(v=yield tt(E))),v&&u(v)}),{immediate:!0}),ie([()=>a.getLastBuildMenuTime,()=>a.getBackMenuList],()=>{S()},{immediate:!0}),ie(()=>h.value,()=>{r(d)||S()});function L(k){return z(this,null,function*(){if(r(p)||r(i))return;const B=yield Ze(k);if(!B||!B.length){l({hidden:!0}),s.value=[];return}l({hidden:!1}),s.value=B})}function S(){return z(this,null,function*(){if(r(T)||r(i)){s.value=yield ts();return}if(r(b)){const k=yield St();s.value=k}})}return{menusRef:s}}const ut=wn&&navigator.connection,ns=ut&&!/([a-z]-)?2g/.test(ut.effectiveType)&&!ut.saveData,un={};function Yi(t){var n;if(!wn)return!1;const e=document.createElement("link");return(n=e==null?void 0:e.relList)==null?void 0:n.supports(t)}function ji(t){return new Promise((e,n)=>{const s=document.createElement("link");s.rel="prefetch",s.href=t,s.addEventListener("load",e),s.addEventListener("error",n),document.head.appendChild(s)})}function ss(t){return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",t,s.withCredentials=!0),s.addEventListener("load",()=>{s.status===200?e():n()}),s.send()})}function Xi(t){return Reflect.has(window,"fetch")?fetch(t,{credentials:"include"}):ss(t)}const Ji=Yi("prefetch")?ji:ss;function Zi(t,e){if(!(!ns||un[t]))return(e?Xi:Ji)(t).then(()=>{un[t]=!0})}const Qi=F({name:"PrefetchLink",props:Ue(de({},jt.props),{prefetch:{type:Boolean,default:!0},prefetchFiles:{type:Array},timeout:{type:Number,default:1e3}}),setup(t,{slots:e}){const n=Ds({to:t.to}),s=D(),o=D(!1),i=g(()=>Us(t,["prefetch","prefetchFiles","timeout"])),{stop:a,isSupported:l}=Fs(s,d=>z(this,[d],function*([{isIntersecting:u}]){u&&(yield xt(t.timeout),h())}));Cn(s,()=>{t.prefetch&&r(l)&&ns&&(o.value=!0)}),zs(()=>{o.value=!1});function c(u){return u.matched.map(d=>Object.values(d.components)).flat().filter(d=>typeof d=="function")}function h(){const u=n.route.value;if(u.meta.__prefetched)return;u.meta.__prefetched=!0;const d=u.meta.prefetch;if(d){const b=c(u);for(const T of b)T();typeof d=="function"&&d(u)}const p=[...t.prefetchFiles||[],...u.meta.prefetchFiles||[]];if(p.length>0)for(const b of p)Zi(b);a()}return()=>{const u=e.default&&e.default(n);return t.custom?(ge(()=>{if(u){const d=u[0];if(Vs(d.type))throw new Error('[PrefetchLink Component] when "props.custom" is true, slot content must not be plain text');s.value=Re(d.el)}else console.warn('[PrefetchLink Component] when "props.custom" is true, must exist default slot')}),u):pe(jt,de({ref:d=>{s.value=d}},i.value),()=>u)}}}),ea=F({name:"LayoutMenu",props:{inverted:G.bool,parentPath:G.string,noCollapsed:G.bool,globalSplit:{type:Boolean,default:void 0},splitType:{type:Number,default:se.NONE},menuMode:{type:[String],default:""}},setup(t){const e=D(null),{splitType:n,parentPath:s,globalSplit:o}=gn(t),{menusRef:i}=Gi(n,s,o),{getMenuMode:a,getMenuIndent:l,getMenuRootIndent:c,getCollapsed:h,getAccordion:u,toggleCollapsed:d}=Z(),{currentRoute:p}=Ae(),b=st(),{t:T}=Oe(),L=D([]),S=D(),k=m=>{console.log(m,"expand"),L.value=m},B=m=>{b(m),r(I)&&d()},{getIsMobile:I}=fe(),w=g(()=>r(I)?ot.VERTICAL:t.menuMode||r(a)),E=g(()=>n.value===se.ROOT);return ie([p,i],ee=>z(this,[ee],function*([m,x]){const{name:oe,path:Y,meta:W}=m;if(oe!==Sn&&(S.value=Y,u.value&&x&&x.length>0)){const ue=vn(x,Y);if(E.value){const te=yield tt(Y);S.value=te}else W.currentActiveMenu?(S.value=W.currentActiveMenu,ge(()=>{var te;(te=e.value)==null||te.showOption(W.currentActiveMenu)})):(ue.length>=2&&ue.pop(),L.value=ue)}}),{immediate:!0}),{getRealCollapsed:g(()=>t.noCollapsed||E.value?!1:h.value),getInverted:!1,menuValue:S,menuInstRef:e,menusRef:i,expandedKeys:L,handleUpdateExpandedKeys:k,handleUpdateValue:B,renderIcon:({meta:m})=>{const x=m==null?void 0:m.icon;return x?pe(ft,{icon:x}):null},renderLabel:m=>pe(Qi,{to:m.path,custom:!0},{default:()=>pe("span",null,{default:()=>{var x;return T((x=m==null?void 0:m.label)!=null?x:"")}})}),getRealMenuMode:w,getMenuIndent:l,getMenuRootIndent:c}}});function ta(t,e,n,s,o,i){const a=$n;return f(),C(a,{ref:"menuInstRef",value:t.menuValue,"onUpdate:value":[e[0]||(e[0]=l=>t.menuValue=l),t.handleUpdateValue],mode:t.getRealMenuMode,"key-field":"path",collapsed:t.getRealCollapsed,inverted:t.getInverted,indent:t.getMenuIndent,"root-indent":t.getMenuRootIndent,options:t.menusRef,"expanded-keys":t.expandedKeys,"render-icon":t.renderIcon,"render-label":t.renderLabel,"onUpdate:expandedKeys":t.handleUpdateExpandedKeys},null,8,["value","mode","collapsed","inverted","indent","root-indent","options","expanded-keys","render-icon","render-label","onUpdate:expandedKeys","onUpdate:value"])}const Ut=me(ea,[["render",ta]]);function os(){const t=kn(),{getMenuMode:e,getSplit:n,getShowHeaderTrigger:s,getIsSidebarType:o,getIsMixSidebar:i}=Z(),{getShowBreadCrumb:a,getShowLogo:l}=Ce(),c=g(()=>t.getHeaderSetting.show),h=g(()=>t.getHeaderSetting.height),u=g(()=>r(e)!==ot.HORIZONTAL&&r(a)&&!r(n)),d=g(()=>r(l)&&!r(o)&&!r(i)),p=g(()=>r(u)||r(s));function b(T){t.setProjectConfig({headerSetting:T})}return{setHeaderSetting:b,getShowBread:u,getShowContent:p,getShowHeaderLogo:d,getShowHeader:c,getHeaderHeight:h}}const na=F({name:"LayoutHeader",components:{Trigger:Zn,LayoutBreadcrumb:wi,LayoutMenu:Ut,FullScreen:vi,DarkModeToggle:Ci,LocalePicker:Si,UserDropDown:bi},props:{fixed:G.bool},setup(){const{prefixCls:t}=Q("layout-header"),{getIsMobile:e}=fe(),{smaller:n,sizeEnum:s}=uo(),o=n(s.XXS),{getSplit:i,getCollapsed:a,getMenuInverted:l,getShowTopMenu:c,getIsSidebarType:h,getIsMixSidebar:u,getIsTopMenu:d,getTrigger:p}=Z(),{getShowBread:b,getShowContent:T,getShowHeader:L}=os(),S=g(()=>p.value===be.HEADER&&!d.value&&T.value&&!i.value),{getShowLocalePicker:k}=ho(),B=g(()=>!(r(h)||r(u))),I=g(()=>i.value?se.ROOT:se.NONE),w=g(()=>ot.HORIZONTAL),E=g(()=>l.value&&(i.value||d.value));return{getShowHeader:L,getIsMobile:e,getShowLocalePicker:k,prefixCls:t,getShowBread:b,getShowContent:T,getShowLogo:B,getCollapsed:a,getShowTopMenu:c,getShowTrigger:S,TriggerEnum:be,getSplitType:I,getMenuMode:w,getInverted:E,getIs2xs:o}}});const sa={class:"flex-jb-ac h-full text-1.2em"},oa={class:"flex-jb-ac h-full"},ra={key:0,class:"flex-ac h-full"},ia={key:0,ref:"scrollEl",class:"flex-jb-ac flex-1 min-w-0 px-2 relative h-full"},aa={class:"flex-ac h-full"};function ca(t,e,n,s,o,i){const a=Pt,l=V("Trigger"),c=V("LayoutBreadcrumb"),h=V("LayoutMenu"),u=Jn,d=V("FullScreen"),p=V("LocalePicker"),b=V("DarkModeToggle"),T=V("UserDropDown"),L=Do;return t.getShowHeader?(f(),C(L,{key:0,bordered:!t.getIsMobile,class:q([t.prefixCls,{inverted:t.getInverted}]),inverted:t.getInverted},{default:y(()=>[N("div",sa,[N("div",oa,[t.getShowLogo?(f(),H("div",ra,[_(a,{collapsed:t.getCollapsed,"collapsed-show-title":"","title-color":t.getInverted?"white":void 0},null,8,["collapsed","title-color"])])):P("",!0),t.getShowTrigger||t.getIsMobile?(f(),C(l,{key:1,type:t.TriggerEnum.HEADER,collapsed:t.getCollapsed},null,8,["type","collapsed"])):P("",!0),t.getShowContent&&t.getShowBread?(f(),C(c,{key:2,class:q(t.getIsMobile?"":"ml-3")},null,8,["class"])):P("",!0)]),t.getShowTopMenu&&!t.getIsMobile?(f(),H("div",ia,[_(u,{"x-scrollable":"",inverted:t.getInverted,class:"absolute left-0 top-2px"},{default:y(()=>[_(h,{"menu-mode":t.getMenuMode,"split-type":t.getSplitType,inverted:t.getInverted},null,8,["menu-mode","split-type","inverted"])]),_:1},8,["inverted"])],512)):P("",!0),N("div",aa,[t.getIsMobile?P("",!0):(f(),C(d,{key:0})),t.getShowLocalePicker?(f(),C(p,{key:1,"trigger-cls":"app-layout-header-anction-icon",reload:!0})):P("",!0),_(b),_(T)])])]),_:1},8,["bordered","class","inverted"])):P("",!0)}const la=me(na,[["render",ca]]),ua={key:0},kt=F({__name:"SiderWrapper",props:{inverted:{type:Boolean,default:void 0},trigger:{type:Boolean,default:!0},width:null},setup(t){const e=t,{prefixCls:n}=Q("layout-sideBar"),{getIsDarkMode:s}=Ce(),{getMenuInverted:o,getTrigger:i,getCollapsed:a,getSplit:l}=Z(),{getIsMobile:c}=fe(),h=g(()=>e.trigger&&(i.value!==be.HEADER&&!r(c)||r(l))),u=D(null),{height:d}=En(u),p=g(()=>({maxHeight:`${d.value}px`})),b=g(()=>Nn(e.inverted)?e.inverted:o.value),{siderColor:T,siderColorInverted:L,siderBorderColor:S,siderBorderColorInverted:k}=we("Layout"),{siderColor:B,siderBorderColor:I}=we("Layout",!0),w=g(()=>r(s)?B:r(b)?L:T),E=g(()=>r(s)?I:r(b)?k:S);Ne(()=>({"mix-sider-bg-color":r(w),"mix-sider-border-color":r(E)}));const v=g(()=>({width:Ie(e.width)}));return(A,O)=>{const m=Jn;return f(),H("div",{class:q(r(n))},[N("div",{class:q(`${r(n)}_wrapper`)},[N("div",{class:"menu_wrapper",style:ae(r(v))},[Le(A.$slots,"header"),N("div",{ref_key:"scrollEl",ref:u,class:"menu"},[_(m,{style:ae(r(p)),inverted:r(b)},{default:y(()=>[Le(A.$slots,"default")]),_:3},8,["style","inverted"])],512),Le(A.$slots,"trigger",{},()=>[r(h)?(f(),C(Zn,{key:0,collapsed:r(a),type:r(i)},null,8,["collapsed","type"])):P("",!0)])],4),A.$slots.secondaryMenu?(f(),H("div",ua,[Le(A.$slots,"secondaryMenu")])):P("",!0)],2)],2)}}});const ha=F({__name:"LayoutSider",setup(t){const{prefixCls:e}=Q("layout-sideBar"),{getIsMobile:n}=fe(),{getCollapsed:s,getRealWidth:o,getMobileWidth:i,getMenuHidden:a,getMenuInverted:l,getIsSidebarType:c,getSplit:h}=Z(),u=g(()=>h.value?se.SECONDARY:se.NONE),d=g(()=>h.value?ot.VERTICAL:null),p=g(()=>h.value?!a.value:!0),b=g(()=>l.value&&!h.value),T=g(()=>n.value?i.value:o.value);return(L,S)=>{const k=Pt;return Ot((f(),C(kt,{class:q(r(e)),width:r(T),inverted:r(b)},{header:y(()=>[r(c)?(f(),C(k,{key:0,class:"flex-ac h-64px",collapsed:r(s),"title-color":r(l)?"white":void 0},null,8,["collapsed","title-color"])):P("",!0)]),default:y(()=>[_(Ut,{"menu-mode":r(d),"split-type":r(u),inverted:r(b)},null,8,["menu-mode","split-type","inverted"])]),_:1},8,["class","width","inverted"])),[[Tn,r(p)]])}}}),da={class:"header_wrapper"},fa={class:"title font-segoe"},pa={name:"LayoutMixSider",directives:{clickOutside:go}},ga=F(Ue(de({},pa),{setup(t){Ne(R=>({"3630a3d8":r(x),36152966:r(O)}));const e=D(),n=D(""),s=D(),o=D(!1),i=D(),a=nt({borderLeftColor:"transparent",borderRightColor:"transparent",borderWidth:void 0}),l=D(null),{prefixCls:c}=Q("layout-mix-sider"),h=st(),{t:u}=Oe(),{getIsDarkMode:d}=Ce(),{getMenuWidth:p,getCloseMixSidebarOnChange:b,getMixSideTrigger:T,getMenuInverted:L,getMixSideFixed:S,mixSideHasChildrenRef:k,setMenuSetting:B,getIsMixSidebar:I,getCollapsed:w}=Z(),{title:E}=yn(),v=Rt(),A=g(()=>de({left:r(S)?0:`${r(m)}px`,position:r(S)?"static":"absolute"},a)),O=g(()=>r(d)||r(L)?"white":"var(--app-primary-color)");ie(S,R=>z(this,null,function*(){const $=Re(i);if($)if(R)$.style.transitionProperty="";else{yield ge();const K=getComputedStyle($).transitionProperty;$.style.transitionProperty=`${K}, left`}})),ie([S,o],([R,$])=>{a.borderLeftColor=R?"transparent":$?r(L)&&!r(d)?"rgb(18, 41, 64)":"var(--mix-sider-border-color)":"transparent",a.borderRightColor=R?"transparent":$?"var(--mix-sider-border-color)":"transparent",a.borderWidth=$?void 0:0},{immediate:!0}),ie([s,S],([R,$])=>{k.value=!!(R&&(R==null?void 0:R.length)>0);const K=$&&r(k);K&&(o.value=K)});const m=g(()=>r(w)?ke.COLLAPSED_WIDTH:ke.WIDTH),x=g(()=>r(w)?ke.LOGO_COLLAPSED_WRAPPER_HEIGHT:ke.LOGO_WRAPPER_HEIGHT),ee=g(()=>r(w)?ke.LOGO_COLLAPSED_SIZE:ke.LOGO_SIZE),oe=g(()=>r(S)?{}:{onMouseleave:ue});mn(()=>z(this,null,function*(){e.value=yield St()})),ie([()=>v.getLastBuildMenuTime,()=>v.getBackMenuList],()=>z(this,null,function*(){e.value=yield St()}),{immediate:!0}),Ln(R=>{l.value=R,W(!0),r(b)&&_e()});function Y(R,$=!1){return z(this,null,function*(){const K=yield Ze(R);if(r(n)===R?($?r(o)||(o.value=!0):r(o)?_e():o.value=!0,r(o)||W()):(o.value=!0,n.value=R),!K||K.length===0){$||h(R),s.value=[],_e();return}s.value=K})}function W(R=!1){return z(this,null,function*(){var K;const $=(K=l.value)==null?void 0:K.path;if($&&(n.value=yield tt($),r(I))){const ye=(e.value||[]).find(ve=>ve.path===r(n)),Se=ye==null?void 0:ye.path;if(Se){const ve=yield Ze(Se);R&&(s.value=ve,r(S)&&(o.value=ve.length>0)),ve.length===0&&(s.value=[])}}})}function ue(){W(!0),_e()}function te(R){return r(T)==="hover"?{onMouseenter:()=>Y(R.path,!0),onClick:()=>z(this,null,function*(){const $=yield Ze(R.path);R.path&&$&&$.length===0&&h(R.path)})}:{onClick:()=>Y(R.path)}}function De(){B({mixSideFixed:!r(S)})}function _e(){const R=r(s);r(S)?(!R||R.length===0)&&(o.value=!1):o.value=!1}const Fe=R=>{var $;return pe("div",de({class:"item_wrapper"},te(R)),[pe(ft,{useTranstion:!0,size:w.value?18:22,icon:R.icon||R.meta&&R.meta.icon}),pe("p",{class:"item_label"},u(($=R==null?void 0:R.label)!=null?$:""))])};return(R,$)=>{const K=Pt,ze=$n,ye=qs("click-outside");return Ot((f(),C(kt,Ws({class:[r(c),{mini:r(w)}],width:r(m)},r(oe)),{header:y(()=>[_(K,{class:q(`${r(c)}-logo`),"logo-size":r(ee),"show-title":!1,"is-static":""},null,8,["class","logo-size"])]),default:y(()=>[_(ze,{value:r(n),"onUpdate:value":$[0]||($[0]=Se=>ht(n)?n.value=Se:null),indent:0,options:r(e),inverted:r(L),"key-field":"path",class:q(`${r(c)}-menu`),"render-icon":()=>null,"render-label":Fe},null,8,["value","options","inverted","class"])]),secondaryMenu:y(()=>[_(kt,{ref_key:"sideRef",ref:i,class:q(`${r(c)}-secondary-menu_wrapper`),style:ae(r(A)),width:r(o)?r(p):0,trigger:!1},{header:y(()=>[N("div",da,[N("span",fa,j(r(E)),1),_(ft,{size:16,icon:r(S)?"ri:pushpin-2-fill":"ri:pushpin-2-line",color:r(L)||r(d)?"white":void 0,class:"pushpin",onClick:De},null,8,["icon","color"])])]),default:y(()=>[_(Ut,{inverted:r(L),"split-type":r(se).SECONDARY,"parent-path":r(n),"global-split":"","no-collapsed":""},null,8,["inverted","split-type","parent-path"])]),_:1},8,["class","style","width"])]),_:1},16,["class","width"])),[[ye,ue]])}}}));const ma=F({name:"SiderWrapper",components:{Sider:ha,MixSider:ga},setup(){const{prefixCls:t}=Q("layout-sider-wrapper"),{getIsMobile:e}=fe(),{setMenuSetting:n,getShowSidebar:s,getIsMixSidebar:o,getMobileWidth:i,getCollapsed:a}=Z();function l(c){n({collapsed:!c})}return{prefixCls:t,getMobileWidth:i,getShowSidebar:s,getIsMobile:e,getIsMixSidebar:o,getCollapsed:a,handleChange:l}}});function _a(t,e,n,s,o,i){const a=V("Sider"),l=An,c=Mn,h=V("MixSider");return t.getShowSidebar||t.getIsMobile?(f(),H(xe,{key:0},[t.getIsMobile?(f(),C(c,{key:0,placement:"left",class:q(t.prefixCls),width:t.getMobileWidth,show:!t.getCollapsed,"onUpdate:show":t.handleChange},{default:y(()=>[_(l,{"body-content-style":"padding:0;"},{default:y(()=>[_(a)]),_:1})]),_:1},8,["class","width","show","onUpdate:show"])):t.getIsMixSidebar?(f(),C(h,{key:1})):(f(),C(a,{key:2}))],64)):P("",!0)}const ya=me(ma,[["render",_a]]);function rs(){const t=kn(),e=g(()=>t.getMultiTabsSetting.show);function n(s){t.setProjectConfig({multiTabsSetting:s})}return{setMultipleTabSetting:n,getShowMultipleTab:e}}function va(){const t=Ae(),{currentRoute:e}=t,{getShowMultipleTab:n}=rs(),s=rt(),o=g(()=>a(Rn(t.getRoutes()))||[]),i=g(()=>s.getTabList.reduce((h,u)=>(u.meta&&Reflect.has(u.meta,"frameSrc")&&h.push(u.name),h),[]));function a(h){let u=[];for(const d of h){const{meta:{frameSrc:p}={},children:b}=d;p&&u.push(d),b&&b.length&&u.push(...a(b))}return u=No(u,"name"),u}function l(h){return h.name===r(e).name}function c(h){return r(n)?r(i).includes(h):t.currentRoute.value.name===h}return{hasRenderFrame:c,getFramePages:o,showIframe:l,getAllFramePages:a}}const ba=F({name:"FrameLayout",components:{FramePage:vo},setup(){const{getFramePages:t,hasRenderFrame:e,showIframe:n}=va(),s=g(()=>r(t).length>0);return{getFramePages:t,hasRenderFrame:e,showIframe:n,showFrame:s}}}),wa={key:0};function Ca(t,e,n,s,o,i){const a=V("FramePage");return t.showFrame?(f(),H("div",wa,[(f(!0),H(xe,null,xn(t.getFramePages,l=>{var c;return f(),H(xe,{key:l.path},[(c=l.meta)!=null&&c.frameSrc&&t.hasRenderFrame(l.name)?Ot((f(),C(a,{key:0,"frame-src":l.meta.frameSrc},null,8,["frame-src"])),[[Tn,t.showIframe(l)]]):P("",!0)],64)}),128))])):P("",!0)}const Sa=me(ba,[["render",Ca]]),ka=F({name:"PageLayout",components:{FrameLayout:Sa},setup(){const t=D("readly"),e=D("fade-slide"),{getCanEmbedIFramePage:n}=Ce();to({pageTranstionName:e,pageTranstionState:t});const{openCache:s,getCaches:o,getKey:i}=bo(e);return{openCache:s,getCaches:o,getKey:i,pageTranstionName:e,handleStart:()=>{t.value="readly"},handleEnter:()=>{t.value="running"},handleEnd:()=>{t.value="finshed"},getCanEmbedIFramePage:n}}});function Ea(t,e,n,s,o,i){const a=V("RouterView"),l=V("FrameLayout");return f(),H(xe,null,[_(a,null,{default:y(({Component:c})=>[_(Qe,{name:t.pageTranstionName,mode:"out-in",appear:"",onBeforeEnter:t.handleStart,onEnter:t.handleEnter,onAfterEnter:t.handleEnd},{default:y(()=>[t.openCache?(f(),C(Ks,{key:0,include:t.getCaches},[(f(),C(dt(c),{key:t.getKey}))],1032,["include"])):(f(),C(dt(c),{key:t.getKey}))]),_:2},1032,["name","onBeforeEnter","onEnter","onAfterEnter"])]),_:1}),t.getCanEmbedIFramePage?(f(),C(l,{key:0})):P("",!0)],64)}const Ta=me(ka,[["render",Ea]]),La={class:"flex-1"},Ra=F({__name:"index",setup(t){const e=D(),n=D(),s=Gs(),{prefixCls:o}=Q("layout-content"),{getOpenPageLoading:i}=Ys(),{getPageLoading:a}=Ce(),{width:l,height:c}=En(n),{emit:h}=wo();js(n,h),no({width:l,height:c});const u=g(()=>{var d;return i.value&&!((d=s.meta)!=null&&d.hideLoading)&&a.value});return Xs(()=>z(this,null,function*(){const d=e.value;d&&(yield xt(300),d.scrollTo({left:0,top:0}))})),(d,p)=>{const b=Js,T=Co,L=Bn,S=So;return f(),H("main",{ref_key:"contentEl",ref:n,class:q(["transform-gpu transform",[r(o)]])},[_(b,{show:r(u)},null,8,["show"]),_(S,{embedded:"",class:"h-full",position:"absolute"},{default:y(()=>[_(L,{ref_key:"scrollBarEl",ref:e,style:ae({maxHeight:`${r(c)}px`})},{default:y(()=>[_(T,{right:40,bottom:60}),N("div",{class:"flex flex-col",style:ae({minHeight:`${r(c)}px`})},[N("div",La,[_(Ta)]),Le(d.$slots,"footer")],4)]),_:3},8,["style"])]),_:3})],2)}}});const xa=F({__name:"TabRedo",setup(t){const e=D(!1),{refreshPage:n}=On();function s(){return z(this,null,function*(){const o=Date.now();e.value=!0,yield n(),yield xt(1200-(Date.now()-o)%1200),e.value=!1})}return(o,i)=>(f(),H("div",{class:"app-mtabs-anction-btn-wrapper group",onClick:s},[N("span",{class:q(["i-codicon-refresh app-mtabs-anction-btn",{"app-ease-spin animate-duration-1200":r(e)}])},null,2)]))}});var X=(t=>(t[t.REFRESH_PAGE=0]="REFRESH_PAGE",t[t.TOGGLE_FULL_SCREEN=1]="TOGGLE_FULL_SCREEN",t[t.CLOSE_CURRENT=2]="CLOSE_CURRENT",t[t.CLOSE_LEFT=3]="CLOSE_LEFT",t[t.CLOSE_RIGHT=4]="CLOSE_RIGHT",t[t.CLOSE_OTHER=5]="CLOSE_OTHER",t[t.CLOSE_ALL=6]="CLOSE_ALL",t[t.SCALE=7]="SCALE",t))(X||{}),hn;const Oa=typeof window!="undefined";Oa&&((hn=window==null?void 0:window.navigator)!=null&&hn.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function is(t){return typeof t=="function"?t():r(t)}function Aa(...t){return g(()=>t.every(e=>is(e)))}function dn(t){return g(()=>!is(t))}function Ma(t,e){const n=nt({current:null,currentIndex:0}),{t:s}=Oe(),o=rt(),{currentRoute:i}=Ae(),{refreshPage:a,closeAll:l,close:c,closeLeft:h,closeOther:u,closeRight:d}=On(),p=g(()=>r(e)?t.tabItem:r(i)),{getShowMenu:b,setMenuSetting:T}=Z(),{getShowHeader:L,setHeaderSetting:S}=os(),k=Aa(dn(b),dn(L));function B(){const v=k.value;T({show:v,hidden:!v}),S({show:v})}const I=g(()=>{if(!r(p))return;const{path:v}=r(i),A=n.current,O=A?A.path===v:!1,m=n.currentIndex,x=m===0||!O,ee=o.getTabList.length===1,oe=!O||m===o.getTabList.length-1&&o.getLastDragEndIndex>=0,Y=[{key:X.TOGGLE_FULL_SCREEN,label:s("layout.multipleTab.toggleFullScreen"),iconName:k.value?"i-radix-icons-exit-full-screen":"i-radix-icons-enter-full-screen"},{type:"divider",key:"d2"},{key:X.CLOSE_LEFT,label:s("layout.multipleTab.closeLeft"),disabled:x,iconName:"i-ph:arrow-line-left-bold"},{key:X.CLOSE_RIGHT,label:s("layout.multipleTab.closeRight"),disabled:oe,iconName:"i-ph:arrow-line-right-bold"},{key:X.CLOSE_OTHER,label:s("layout.multipleTab.closeOther"),disabled:ee||!O,iconName:"i-dashicons:align-center"},{key:X.CLOSE_ALL,label:s("layout.multipleTab.closeAll"),disabled:ee,iconName:"i-clarity:minus-line"}];return e.value?Y.slice(2):Y});function w(v){return A=>{if(!v)return;A==null||A.preventDefault();const O=o.getTabList.findIndex(m=>m.path===v.path);n.current=v,n.currentIndex=O}}function E(v){switch(v){case X.REFRESH_PAGE:a();break;case X.TOGGLE_FULL_SCREEN:B();break;case X.CLOSE_CURRENT:c(t.tabItem);break;case X.CLOSE_LEFT:h();break;case X.CLOSE_RIGHT:d();break;case X.CLOSE_OTHER:u();break;case X.CLOSE_ALL:l();break}}return{getDropMenuList:I,handleMenuEvent:E,handleContextMenu:w}}const Ba=F({name:"TabContent",props:{tabItem:{type:Object,default:null},isExtra:Boolean},setup(t){const{prefixCls:e}=Q("multiple-tabs-content"),{t:n}=Oe(),s=nt({x:0,y:0}),o=Zs(!1),i=g(()=>{const{tabItem:{meta:E}={}}=t;return E&&n(E.title)}),a=g(()=>!t.isExtra),l=g(()=>r(a)?s.x:void 0),c=g(()=>r(a)?s.y:void 0),h=g(()=>r(a)?r(o):void 0),u=g(()=>r(a)?B:void 0),d=g(()=>r(a)?"manual":"click"),p=g(()=>r(a)?"bottom-start":"bottom-end"),{getDropMenuList:b,handleMenuEvent:T,handleContextMenu:L}=Ma(t,a);function S(E){return z(this,null,function*(){t.tabItem&&(E.preventDefault(),o.value=!1,yield ge(),s.x=E.clientX,s.y=E.clientY,o.value=!0,L(t.tabItem)(E))})}function k(E){t.tabItem&&L(t.tabItem)(E)}function B(){o.value=!1}function I(E){T(E),B()}function w(E){return _("i",{class:`${E.iconName} z-1 text-4`},null)}return()=>_(xe,null,[r(a)&&_("div",{class:`${e}__info py-1 pl-2`,onContextmenu:S},[_("span",null,[r(i)])]),_(Eo,{x:r(l),y:r(c),show:r(h),onSelect:I,onClickoutside:r(u),options:r(b),"render-label":({label:E})=>E,"render-icon":w,trigger:r(d),placement:r(p)},{default:()=>[!r(a)&&_("div",{class:"app-mtabs-anction-btn-wrapper group",onClick:k},[_("span",{class:"i-fluent-options-48-regular app-mtabs-anction-btn"},null)])]})])}});function $a(){const t=D([]),e=rt(),n=Ae();function s(a){const l=[];return a&&a.forEach(c=>{c.meta&&c.meta.affix&&l.push(Rn(c))}),l}function o(){const a=s(n.getRoutes());t.value=a;for(const l of a)e.addTab({meta:l.meta,name:l.name,path:l.path})}let i=!1;return i||(o(),i=!0),t.value.map(a=>{var l;return(l=a.meta)==null?void 0:l.title}).filter(Boolean)}const Ia=F({name:"MultipleTabs",components:{TabRedo:xa,TabContent:Ba},setup(){$a();const t=D(),e=D(),n=Ae(),s=rt(),{prefixCls:o}=Q("multiple-tabs"),{getShowMultipleTab:i}=rs(),a=st(),l=D({borderTop:"none",borderRadius:"0px",padding:"0px",paddingRight:"6px"}),c=g(()=>({backgroundColor:Qs("Layout","headerColor").value})),h=g(()=>s.getTabList.filter(p=>{var b;return!((b=p.meta)!=null&&b.hideTab)}));return Ln(p=>{const{name:b}=p;if(b===Sn||!p)return;const{path:T,fullPath:L,meta:S={}}=p,{currentActiveMenu:k,hideTab:B}=S,I=B?k:null,w=I||L||T;if(e.value!==w&&(e.value=w),I){const E=n.getRoutes().find(v=>v.path===k);E&&s.addTab(E)}else s.addTab(r(p))}),ie(()=>e.value,p=>{ge(()=>{var T;if(!p)return;const b=(T=Re(t))==null?void 0:T.querySelector(`[data-name="${p}"]`);b&&setTimeout(()=>{b.scrollIntoView({behavior:"smooth"})},50)})},{immediate:!0}),Cn(()=>Re(t),p=>{const b=p.querySelector(".n-tabs-nav");b.style.minHeight=`${eo}px`}),{activeKeyRef:e,panels:h,tabsElRef:t,handleClose:p=>{s.closeTabByKey(p,n)},handleTabChange:p=>{e.value=p,a(p,!1)},prefixCls:o,getTabStyle:l,getWrapperStyle:c,getShowMultipleTab:i}}});const Na=N("div",{class:"placeholder"},null,-1),Pa={class:"flex h-full w-18"};function Ha(t,e,n,s,o,i){const a=V("TabContent"),l=To,c=V("TabRedo"),h=Lo;return t.getShowMultipleTab?(f(),H("div",{key:0,style:ae(t.getWrapperStyle),class:q(t.prefixCls)},[_(h,{ref:"tabsElRef",value:t.activeKeyRef,"onUpdate:value":[e[0]||(e[0]=u=>t.activeKeyRef=u),t.handleTabChange],type:"card",size:"small",closable:"","tab-style":t.getTabStyle,onClose:t.handleClose},{prefix:y(()=>[Na]),suffix:y(()=>[N("div",Pa,[_(a,{"is-extra":"","tab-item":t.$route},null,8,["tab-item"]),_(c)])]),default:y(()=>[(f(!0),H(xe,null,xn(t.panels,u=>{var d,p;return f(),C(l,{key:u.path||u.fullPath,name:u.path||u.fullPath,class:q({"!pr-2":(d=u==null?void 0:u.meta)==null?void 0:d.affix}),closable:!((p=u==null?void 0:u.meta)!=null&&p.affix)},{default:y(()=>[_(a,{"tab-item":u},null,8,["tab-item"])]),_:2},1032,["name","class","closable"])}),128))]),_:1},8,["value","tab-style","onClose","onUpdate:value"])],6)):P("",!0)}const Da=me(Ia,[["render",Ha]]),Fa=F({name:"DefaultLayout",components:{LayoutSider:ya,LayoutHeader:la,LayoutContent:Ra,LayoutFooter:ko,MTabs:Da},setup(){const{prefixCls:t}=Q("default-layout"),{getMenuType:e}=Z(),{runLog:n}=Ro();return{getLayoutCls:g(()=>{let o="";switch(e.value){case Ve.SIDEBAR:o=qe.SIDEBAR;break;case Ve.MIX_SIDEBAR:o=qe.MIX_SIDEBAR;break;case Ve.MIX:o=qe.MIX;break;case Ve.TOP_MENU:o=qe.TOP_MENU;break}return`${o}`}),prefixCls:t,runLog:n}}});function za(t,e,n,s,o,i){const a=V("LayoutHeader"),l=V("LayoutSider"),c=V("MTabs"),h=V("LayoutFooter"),u=V("LayoutContent"),d=fi;return f(),H("div",{class:q([t.prefixCls,t.getLayoutCls])},[_(a),_(l),_(c),_(u,null,{footer:y(()=>[_(h)]),_:1}),_(d,{ref:"runLog"},null,512)],2)}const Lc=me(Fa,[["render",za]]);export{Lc as default};
