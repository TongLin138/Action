import{a6 as g,as as Z,aG as k,G as ue,x as s,C as A,aI as de,a7 as w,at as pe,u as e,a8 as t,ac as o,aE as z,aJ as m,aK as _e,aC as P,aD as q,aL as fe,al as d,aM as me,aN as ge,aO as he,aP as ve,am as ye,aQ as be,aR as we,aH as ke}from"./vendor-c47b8ac0.js";import{_ as xe}from"./PageWrapper.vue_vue_type_style_index_0_lang-bfc5bf26.js";import{b as Ce,c as Se,L as Te}from"./index-f8002877.js";import{f as J,a as Ne,_ as Ee,b as $e,c as ze,d as Pe}from"./folderOpen-2d4a1018.js";import{_ as Ve,a as Ie,f as Be}from"./index-90f777a7.js";import{u as Me}from"./useAppInject-da0b3031.js";import{u as Oe}from"./useTransition-61b46e08.js";import{F as K}from"./fileTreeEnum-8c192873.js";import{s as De,g as Q,a as Fe}from"./file-64061172.js";import{f as Le}from"./folderDisable-95d7bf24.js";import"./sharp-arrow-back-ios-73882074.js";import"./useDesign-53b53602.js";import"./propTypes-8a448afd.js";const He={style:{display:"inline-block"},viewBox:"0 0 2048 2048",width:"1em",height:"1em"},We=k("path",{fill:"currentColor",d:"M1792 0v2048H256V0h1536zM384 128v384h1280V128H384zm1280 1408H384v384h1280v-384zm0-256V640H384v640h1280z"},null,-1),je=[We];function Ge(F,f){return g(),Z("svg",He,je)}const Re={name:"fluent-mdl2-diff-inline",render:Ge},Ue={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ae=k("path",{fill:"currentColor",d:"M13 23h-2V1h2v22m-4-4H5V5h4V3H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h4v-2M19 7v2h2V7h-2m0-2h2a2 2 0 0 0-2-2v2m2 10h-2v2h2v-2m-2-4v2h2v-2h-2m-2-8h-2v2h2V3m2 18c1.11 0 2-.89 2-2h-2v2m-2-2h-2v2h2v-2Z"},null,-1),qe=[Ae];function Je(F,f){return g(),Z("svg",Ue,qe)}const Ke={name:"mdi-select-compare",render:Je},un=ue({__name:"index",setup(F){const{getIsMobile:f}=Me(),{t:r}=Ce(),{message:L}=Se(),H=s("fade-slide");Oe(H);const V=s(),I=s([]),B=s([]),W=s({}),v=s(""),y=s(""),x=s(""),C=s(!f.value),S=s(f.value?"on":"off"),u=s(""),p=s(""),M=s(!1),O=s(!1),h=s(!1),T=async n=>{switch(n){case"showEditorShortcutsInfo":V.value.showShortCuts=!0;break;case"wordWrap":S.value=S.value==="on"?"off":"on";break;case"renderSideBySide":C.value=!C.value;break;case"save":M.value=!0;const a=e(V).getValue();try{await De({content:a,path:u.value}),L.success(r("editor.main.savedSuccess"))}finally{M.value=!1}break}},X=async()=>{h.value=!0;const n=await Q({type:K.CONFIG}),a=await Q({type:K.SAMPLE});I.value=j(n),B.value=j(a),h.value=!1},j=n=>{const a=l=>{l.length&&l.forEach(i=>{if(i.type===0)Object.assign(i,{key:i.path,label:i.title,disabled:!0,prefix:()=>d(m,null,{default:()=>d(J)})}),a(i.children),i.children.length||(Object.assign(i,{children:null,disabled:!0}),i.prefix=()=>d(m,null,{default:()=>d(Le)}));else{const _=i.name;if(_){const E=_.substring(_.lastIndexOf(".")+1),b=Be[E]||{};Object.assign(i,{key:i.path,label:_,language:b.language||"plaintext",disabled:b.disabled||!1,prefix:()=>d(m,null,{default:()=>d(b.icon||Pe)})})}}})};return a(n),n},N=(n,a,l)=>{if(l.node)switch(l.action){case"expand":l.node.prefix=()=>d(m,null,{default:()=>d(Ne)});break;case"collapse":l.node.prefix=()=>d(m,null,{default:()=>d(J)});break}},Y=async(n,a)=>{O.value=!0;const l=await Fe({path:encodeURI(n)});if(O.value=!1,l)switch(a){case"config":v.value=l;break;case"sample":y.value=l;break}else{switch(a){case"config":v.value="";break;case"sample":y.value="";break}L.info(r("page.compareTool.fileContentIsEmptyMsg"))}},G=({option:n})=>({async onClick(){!n.children&&!n.disabled&&(x.value=n.language,W.value=n,await U(n,"config"))}}),R=({option:n})=>({async onClick(){!n.children&&!n.disabled&&(x.value=n.language,W.value=n,await U(n,"sample"))}});async function U(n,a){x.value=n.language,await Y(n.key,a)}return A(u,n=>{n||(v.value="")}),A(p,n=>{n||(y.value="")}),de(async()=>{await X()}),(n,a)=>{const l=me,i=Ke,_=ge,E=he,b=ve,ee=Ve,$=ye,D=be,ne=Ee,ae=Re,te=Ie,oe=$e,le=ze,se=we,ie=Te,re=ke,ce=xe;return g(),w(ce,{ref:"pageWrapper","content-full":!0,title:e(r)("routes.main.page.compareTool")},pe({extra:t(()=>[e(u)&&e(p)?(g(),w(_e,{key:0,name:e(H),mode:"out-in",appear:""},{default:t(()=>[o(_,null,{default:t(()=>[o(_,{style:{gap:"0"}},{default:t(()=>[e(f)?q("",!0):(g(),w(D,{key:0,placement:"bottom",trigger:"hover",delay:500},{trigger:t(()=>[o($,{strong:"",quaternary:"",size:"small",type:"tertiary",focusable:!1,onClick:a[4]||(a[4]=c=>T("showEditorShortcutsInfo"))},{default:t(()=>[o(ee)]),_:1})]),default:t(()=>[k("span",null,P(e(r)("editor.switch.shortcutsTips")),1)]),_:1})),o(D,{placement:"bottom",trigger:"hover",delay:500},{trigger:t(()=>[o($,{strong:"",quaternary:"",type:e(S)==="on"?"primary":"tertiary",size:"small",focusable:!1,onClick:a[5]||(a[5]=c=>T("wordWrap"))},{default:t(()=>[o(ne)]),_:1},8,["type"])]),default:t(()=>[k("span",null,P(e(r)("editor.switch.wordWrapTips")),1)]),_:1}),o(D,{placement:"bottom",trigger:"hover",delay:500},{trigger:t(()=>[o($,{strong:"",quaternary:"",type:e(C)?"tertiary":"primary",size:"small",focusable:!1,onClick:a[6]||(a[6]=c=>T("renderSideBySide"))},{default:t(()=>[o(ae)]),_:1},8,["type"])]),default:t(()=>[k("span",null,P(e(r)("editor.switch.inlineModeTips")),1)]),_:1})]),_:1}),o($,{strong:"",type:"primary",size:"small",disabled:!e(u),loading:e(M),focusable:!1,onClick:a[7]||(a[7]=c=>T("save"))},{icon:t(()=>[o(te)]),default:t(()=>[fe(" "+P(e(r)("editor.main.saveButton")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["name"])):q("",!0)]),default:t(()=>[o(re,{bordered:!e(f),style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:t(()=>[e(v)||e(y)?(g(),w(oe,{key:0,ref_key:"editor",ref:V,value:e(v),"origin-value":e(y),"diff-mode":!0,language:e(x),"word-wrap":e(S),"render-side-by-side":e(C)},null,8,["value","origin-value","language","word-wrap","render-side-by-side"])):(g(),w(se,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge",description:e(r)("common.selectFileEmptyDesc")},{icon:t(()=>[o(e(m),null,{default:t(()=>[o(le)]),_:1})]),_:1},8,["description"])),o(ie,{show:e(O)},null,8,["show"])]),_:1},8,["bordered"])]),_:2},[e(f)?{name:"headerContent",fn:t(()=>[o(b,{"x-gap":12,cols:2},{default:t(()=>[o(E,null,{default:t(()=>[o(l,{value:e(p),"onUpdate:value":a[2]||(a[2]=c=>z(p)?p.value=c:null),size:"small",loading:e(h),"consistent-menu-width":!1,clearable:"",placeholder:e(r)("page.compareTool.selectSampleFilePlaceholder"),options:e(B),"node-props":R,"on-update:expanded-keys":N},null,8,["value","loading","placeholder","options"])]),_:1}),o(E,null,{default:t(()=>[o(l,{value:e(u),"onUpdate:value":a[3]||(a[3]=c=>z(u)?u.value=c:null),size:"small",loading:e(h),"consistent-menu-width":!1,clearable:"",placeholder:e(r)("page.compareTool.selectConfigFilePlaceholder"),options:e(I),"node-props":G,"on-update:expanded-keys":N},null,8,["value","loading","placeholder","options"])]),_:1})]),_:1})]),key:"1"}:{name:"subtitle",fn:t(()=>[o(_,null,{default:t(()=>[o(l,{value:e(p),"onUpdate:value":a[0]||(a[0]=c=>z(p)?p.value=c:null),size:"small",style:{width:"200px"},loading:e(h),"consistent-menu-width":!1,clearable:"",placeholder:e(r)("page.compareTool.selectSampleFilePlaceholder"),options:e(B),"node-props":R,"on-update:expanded-keys":N},null,8,["value","loading","placeholder","options"]),o(e(m),{size:"24",depth:3},{default:t(()=>[o(i)]),_:1}),o(l,{value:e(u),"onUpdate:value":a[1]||(a[1]=c=>z(u)?u.value=c:null),size:"small",style:{width:"200px"},loading:e(h),"consistent-menu-width":!1,clearable:"",placeholder:e(r)("page.compareTool.selectConfigFilePlaceholder"),options:e(I),"node-props":G,"on-update:expanded-keys":N},null,8,["value","loading","placeholder","options"])]),_:1})]),key:"0"}]),1032,["title"])}}});export{un as default};
