import{a6 as g,as as X,aG as F,G as ge,x as l,C as J,aI as ve,a7 as x,at as he,u as e,a8 as a,ac as n,aE as z,aJ as d,aK as ye,aL as L,aC as P,aD as K,al as _,aM as be,aN as we,aO as ke,aP as xe,am as ze,aQ as Ce,aR as Se,aS as Te,aT as $e,aH as Ee}from"./vendor-605eddea.js";import{_ as Ve}from"./PageWrapper.vue_vue_type_style_index_0_lang-f8e03867.js";import{b as Be,c as Pe,L as Ie}from"./index-a28ae7ef.js";import{f as Q,a as Ne,_ as De,b as Me,c as Oe,d as Le,e as Fe}from"./folderOpen-9fc5987d.js";import{_ as He,a as Ue}from"./shortcut-fcedd9ec.js";import{_ as We}from"./swap-outlined-c2e90102.js";import{u as je}from"./useAppInject-bfcb44f9.js";import{u as Re}from"./useTransition-834e05c0.js";import{s as Ae,g as Z,a as qe}from"./file-b1173af7.js";import{f as Ge}from"./index-acb2c891.js";import{f as Je}from"./folderDisable-28fa208b.js";import"./sharp-arrow-back-ios-fa33e058.js";import"./useDesign-c48ceef7.js";import"./propTypes-8a448afd.js";const Ke={style:{display:"inline-block"},viewBox:"0 0 2048 2048",width:"1em",height:"1em"},Qe=F("path",{fill:"currentColor",d:"M1792 0v2048H256V0h1536zM384 128v384h1280V128H384zm1280 1408H384v384h1280v-384zm0-256V640H384v640h1280z"},null,-1),Ze=[Qe];function Xe(H,f){return g(),X("svg",Ke,Ze)}const Ye={name:"fluent-mdl2-diff-inline",render:Xe},en={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},nn=F("path",{fill:"currentColor",d:"M13 23h-2V1h2v22m-4-4H5V5h4V3H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h4v-2M19 7v2h2V7h-2m0-2h2a2 2 0 0 0-2-2v2m2 10h-2v2h2v-2m-2-4v2h2v-2h-2m-2-8h-2v2h2V3m2 18c1.11 0 2-.89 2-2h-2v2m-2-2h-2v2h2v-2Z"},null,-1),an=[nn];function on(H,f){return g(),X("svg",en,an)}const tn={name:"mdi-select-compare",render:on},bn=ge({__name:"index",setup(H){const{getIsMobile:f}=je(),{t:c}=Be(),{message:U}=Pe(),W=l("fade-slide");Re(W);const I=l(),N=l([]),D=l([]),j=l({}),y=l(""),b=l(""),C=l(""),S=l(!f.value),T=l(f.value?13:15),$=l(f.value?"on":"off"),p=l(""),m=l(""),M=l(!1),O=l(!1),v=l(!1),h=l(!1),E=async t=>{switch(t){case"showEditorShortcutsInfo":I.value.showShortCuts=!0;break;case"wordWrap":$.value=$.value==="on"?"off":"on",h.value=!1;break;case"renderSideBySide":S.value=!S.value,h.value=!1;break;case"save":M.value=!0;const o=e(I).getValue();try{await Ae({content:o,path:p.value}),U.success(c("editor.main.savedSuccess"))}finally{M.value=!1}break}},Y=async()=>{v.value=!0;const t=await Z({}),o=await Z({});N.value=R(t),D.value=R(o),v.value=!1},R=t=>{const o=s=>{s.length&&s.forEach(r=>{if(r.type===0)Object.assign(r,{key:r.path,label:r.title,disabled:!0,prefix:()=>_(d,null,{default:()=>_(Q)})}),o(r.children),r.children.length||(Object.assign(r,{children:null,disabled:!0}),r.prefix=()=>_(d,null,{default:()=>_(Je)}));else{const u=r.name;if(u){const B=u.substring(u.lastIndexOf(".")+1),w=Ge[B]||{};Object.assign(r,{key:r.path,label:u,language:w.language||"plaintext",disabled:w.disabled||!1,prefix:()=>_(d,null,{default:()=>_(w.icon||Fe)})})}}})};return o(t),t},V=(t,o,s)=>{if(s.node)switch(s.action){case"expand":s.node.prefix=()=>_(d,null,{default:()=>_(Ne)});break;case"collapse":s.node.prefix=()=>_(d,null,{default:()=>_(Q)});break}},ee=async(t,o)=>{O.value=!0;const s=await qe({path:encodeURI(t)});if(O.value=!1,s)switch(o){case"config":y.value=s;break;case"sample":b.value=s;break}else{switch(o){case"config":y.value="";break;case"sample":b.value="";break}U.info(c("page.compareTool.fileContentIsEmptyMsg"))}},A=({option:t})=>({async onClick(){!t.children&&!t.disabled&&(C.value=t.language,j.value=t,await G(t,"config"))}}),q=({option:t})=>({async onClick(){!t.children&&!t.disabled&&(C.value=t.language,j.value=t,await G(t,"sample"))}});async function G(t,o){C.value=t.language,await ee(t.key,o)}return J(p,t=>{t||(y.value="")}),J(m,t=>{t||(b.value="")}),ve(async()=>{await Y()}),(t,o)=>{const s=be,r=tn,u=we,B=ke,w=xe,ne=De,k=ze,ae=Me,oe=Ce,te=We,le=Ye,se=Se,ie=He,re=Te,ce=Ue,ue=Oe,de=Le,pe=$e,_e=Ie,fe=Ee,me=Ve;return g(),x(me,{ref:"pageWrapper","content-full":!0,title:e(c)("routes.main.page.compareTool")},he({extra:a(()=>[e(p)&&e(m)?(g(),x(ye,{key:0,name:e(W),mode:"out-in",appear:""},{default:a(()=>[n(u,null,{default:a(()=>[n(u,{style:{gap:"0"}},{default:a(()=>[n(se,{trigger:"manual",show:e(h),"show-arrow":!1,placement:"bottom"},{trigger:a(()=>[n(k,{strong:"",quaternary:"",size:"small",type:e(h)?"primary":"tertiary",style:{padding:"6px"},focusable:!1,onClick:o[4]||(o[4]=i=>h.value=!e(h))},{default:a(()=>[n(e(d),{size:"18"},{default:a(()=>[n(ne,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1},8,["type"])]),default:a(()=>[n(u,{vertical:""},{default:a(()=>[n(u,{size:"small"},{default:a(()=>[n(e(d),{size:20},{default:a(()=>[n(ae,{style:{"vertical-align":"-0.4em"}})]),_:1}),n(oe,{value:e(T),"onUpdate:value":o[5]||(o[5]=i=>z(T)?T.value=i:null),min:12,max:40,"button-placement":"both",size:"small",class:"max-w-94px"},null,8,["value"])]),_:1}),n(u,{size:"small"},{default:a(()=>[n(e(d),{size:20,color:e($)==="on"?"var(--app-primary-color)":void 0},{default:a(()=>[n(te,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),n(k,{strong:"",secondary:"",size:"small",style:{width:"94px"},onClick:o[6]||(o[6]=i=>E("wordWrap"))},{default:a(()=>[L(P(e(c)("editor.switch.wordWrapBtn")),1)]),_:1})]),_:1}),n(u,{size:"small"},{default:a(()=>[n(e(d),{size:20,color:e(S)?void 0:"var(--app-primary-color)"},{default:a(()=>[n(le,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),n(k,{strong:"",secondary:"",size:"small",style:{width:"94px"},onClick:o[7]||(o[7]=i=>E("renderSideBySide"))},{default:a(()=>[L(P(e(c)("editor.switch.inlineModeTips")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),e(f)?K("",!0):(g(),x(re,{key:0,placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[n(k,{strong:"",quaternary:"",size:"small",type:"tertiary",style:{padding:"6px"},focusable:!1,onClick:o[8]||(o[8]=i=>E("showEditorShortcutsInfo"))},{default:a(()=>[n(e(d),{size:"18"},{default:a(()=>[n(ie,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:a(()=>[F("span",null,P(e(c)("editor.switch.shortcutsTips")),1)]),_:1}))]),_:1}),n(k,{strong:"",type:"primary",size:"small",disabled:!e(p),loading:e(M),focusable:!1,onClick:o[9]||(o[9]=i=>E("save"))},{icon:a(()=>[n(ce)]),default:a(()=>[L(" "+P(e(c)("editor.main.saveButton")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["name"])):K("",!0)]),default:a(()=>[n(fe,{bordered:!e(f),style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:a(()=>[e(y)||e(b)?(g(),x(ue,{key:0,ref_key:"editor",ref:I,value:e(y),"origin-value":e(b),"diff-mode":!0,language:e(C),"word-wrap":e($),"render-side-by-side":e(S),"font-size":e(T)},null,8,["value","origin-value","language","word-wrap","render-side-by-side","font-size"])):(g(),x(pe,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge",description:e(c)("common.selectFileEmptyDesc")},{icon:a(()=>[n(e(d),null,{default:a(()=>[n(de)]),_:1})]),_:1},8,["description"])),n(_e,{show:e(O)},null,8,["show"])]),_:1},8,["bordered"])]),_:2},[e(f)?{name:"headerContent",fn:a(()=>[n(w,{"x-gap":12,cols:2},{default:a(()=>[n(B,null,{default:a(()=>[n(s,{value:e(m),"onUpdate:value":o[2]||(o[2]=i=>z(m)?m.value=i:null),size:"small",loading:e(v),"consistent-menu-width":!1,clearable:"",placeholder:e(c)("page.compareTool.selectSampleFilePlaceholder"),options:e(D),"node-props":q,"on-update:expanded-keys":V},null,8,["value","loading","placeholder","options"])]),_:1}),n(B,null,{default:a(()=>[n(s,{value:e(p),"onUpdate:value":o[3]||(o[3]=i=>z(p)?p.value=i:null),size:"small",loading:e(v),"consistent-menu-width":!1,clearable:"",placeholder:e(c)("page.compareTool.selectConfigFilePlaceholder"),options:e(N),"node-props":A,"on-update:expanded-keys":V},null,8,["value","loading","placeholder","options"])]),_:1})]),_:1})]),key:"1"}:{name:"subtitle",fn:a(()=>[n(u,null,{default:a(()=>[n(s,{value:e(m),"onUpdate:value":o[0]||(o[0]=i=>z(m)?m.value=i:null),size:"small",style:{width:"200px"},loading:e(v),"consistent-menu-width":!1,clearable:"",placeholder:e(c)("page.compareTool.selectSampleFilePlaceholder"),options:e(D),"node-props":q,"on-update:expanded-keys":V},null,8,["value","loading","placeholder","options"]),n(e(d),{size:"24",depth:3},{default:a(()=>[n(r)]),_:1}),n(s,{value:e(p),"onUpdate:value":o[1]||(o[1]=i=>z(p)?p.value=i:null),size:"small",style:{width:"200px"},loading:e(v),"consistent-menu-width":!1,clearable:"",placeholder:e(c)("page.compareTool.selectConfigFilePlaceholder"),options:e(N),"node-props":A,"on-update:expanded-keys":V},null,8,["value","loading","placeholder","options"])]),_:1})]),key:"0"}]),1032,["title"])}}});export{bn as default};
