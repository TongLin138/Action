var H=(k,f,h)=>new Promise((b,n)=>{var V=r=>{try{s(h.next(r))}catch(m){n(m)}},$=r=>{try{s(h.throw(r))}catch(m){n(m)}},s=r=>r.done?b(r.value):Promise.resolve(r.value).then(V,$);s((h=h.apply(k,f)).next())});import{o as w,p as C,v as p,d as E,z as O,b as Z,a4 as q,a8 as D,a6 as F,e as l,c as K,w as o,a as e,E as g,t as _,i as T,aI as G,f as J}from"./index-797c0a85.js";import{u as Q}from"./useAppInject-e4ee4e96.js";import{u as W}from"./useRunLog-7bd89b36.js";import{N as X}from"./DynamicInput-8878e17a.js";import{N as Y}from"./Icon-abc31adc.js";import{a as ee,_ as le}from"./RadioGroup-69d2c4f1.js";import{N as oe}from"./Space-3cb079f3.js";import{_ as ne,a as te}from"./FormItem-e64e13b9.js";import{_ as ae}from"./Scrollbar-cdc51570.js";import{_ as re}from"./Ellipsis-348a6bfd.js";import{_ as se,a as ue}from"./DrawerContent-784d0172.js";const ie={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},pe=p("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[p("path",{d:"m18 4l3 3l-3 3m0 10l3-3l-3-3"}),p("path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5m0-10h-5a4.978 4.978 0 0 0-3 1m-4 8a4.984 4.984 0 0 1-3 1H3"})],-1),ce=[pe];function de(k,f){return w(),C("svg",ie,[...ce])}const _e={name:"tabler-arrows-shuffle",render:de},me={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},fe=p("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[p("path",{d:"M3 7h1.948c1.913 0 3.705.933 4.802 2.5a5.861 5.861 0 0 0 4.802 2.5H21"}),p("path",{d:"M3 17h1.95a5.854 5.854 0 0 0 4.798-2.5a5.854 5.854 0 0 1 4.798-2.5H20"}),p("path",{d:"m18 15l3-3l-3-3"})],-1),he=[fe];function ve(k,f){return w(),C("svg",me,[...he])}const ye={name:"tabler-arrows-join2",render:ve},ge={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},ke=p("path",{fill:"currentColor",d:"M13.54 22H10c-.25 0-.46-.18-.5-.42l-.37-2.65c-.63-.25-1.17-.59-1.69-.99l-2.49 1.01c-.22.08-.49 0-.61-.22l-2-3.46a.493.493 0 0 1 .12-.64l2.11-1.66L4.5 12l.07-1l-2.11-1.63a.493.493 0 0 1-.12-.64l2-3.46c.12-.22.39-.31.61-.22l2.49 1c.52-.39 1.06-.73 1.69-.98l.37-2.65c.04-.24.25-.42.5-.42h4c.25 0 .46.18.5.42l.37 2.65c.63.25 1.17.59 1.69.98l2.49-1c.22-.09.49 0 .61.22l2 3.46c.13.22.07.49-.12.64L19.43 11l.07 1v.19c-.5-.12-1-.19-1.5-.19c-.17 0-.34 0-.5.03c0-.62-.1-1.24-.3-1.83l2.11-1.55l-.75-1.3l-2.41 1.04a5.42 5.42 0 0 0-3.03-1.77L12.75 4h-1.5l-.37 2.61c-1.2.25-2.26.89-3.03 1.78L5.44 7.35l-.75 1.3L6.8 10.2a5.55 5.55 0 0 0 0 3.6l-2.12 1.56l.75 1.3l2.43-1.04c.77.88 1.82 1.52 3.01 1.76l.37 2.62h1.11c.26.75.65 1.42 1.19 2m2.42-9.64c.04-.12.04-.24.04-.36c0-2.21-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4c.12 0 .24 0 .36-.04a6.045 6.045 0 0 1 3.6-3.6M12 14c-1.1 0-2-.89-2-2s.9-2 2-2s2 .9 2 2s-.89 2-2 2m4 1v6l5-3l-5-3Z"},null,-1),be=[ke];function xe(k,f){return w(),C("svg",ge,[...be])}const we={name:"mdi-cog-play-outline",render:xe},$e={style:{"vertical-align":"-4px",padding:"0 2px"}},Te=E({__name:"runParamModal",setup(k,{expose:f}){const{getIsMobile:h}=Q(),{message:b}=O(),{t:n}=Z(),{runLog:V}=W(),$={show:!1,title:"",runPath:"",model:{param:[],env:[],runMode:"run"},cmd:""},s=q(D($)),{show:r,title:m,model:u}=F(s),N=()=>H(this,null,function*(){var d;let c;c=`task ${s.model.runMode} ${s.runPath}`;const t=s.model.param.map(i=>i.key?i.value?`${i.key} ${i.value}`:`${i.key}`:"").join(" ");t&&(c=`${c} ${t}`);const x=s.model.env.map(i=>i.key?`task env edit ${i.key} ${i.value||'""'} >/dev/null 2>&1`:"").join(" ; ");x&&(c=`${x} ; ${c}`);try{s.cmd=c,s.show=!1,(d=V.value)==null||d.open({title:s.title,cmd:s.cmd})}catch(i){b==null||b.error(`${n("file.run.fail")} (${i})`,{keepAliveOnHover:!0})}});return f({open:(c={runPath:""})=>{Object.assign(s,D($),c,{show:!0})}}),(c,t)=>{const x=we,d=Y,i=ye,M=ee,B=_e,v=oe,j=le,y=ne,P=X,L=ae,U=te,A=G,R=re,I=J,S=se,z=ue;return l(h)?(w(),K(z,{key:1,show:l(r),"onUpdate:show":t[10]||(t[10]=a=>T(r)?r.value=a:null),height:"100vh",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:o(()=>[e(S,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:o(()=>[e(v,null,{default:o(()=>[e(d,{color:"var(--app-primary-color)"},{default:o(()=>[e(x,{style:{"font-size":"24px","vertical-align":"0"}})]),_:1}),e(R,{style:{height:"100%","max-width":"260px"}},{tooltip:o(()=>[p("span",null,_(l(m)),1)]),default:o(()=>[p("span",$e,_(l(m)),1)]),_:1})]),_:1})]),footer:o(()=>[e(v,null,{default:o(()=>[e(I,{tertiary:"",focusable:!1,onClick:t[8]||(t[8]=a=>r.value=!1)},{default:o(()=>[g(_(l(n)("common.cancelText")),1)]),_:1}),e(I,{type:"primary",focusable:!1,onClick:t[9]||(t[9]=a=>N())},{default:o(()=>[g(_(l(n)("common.okText")),1)]),_:1})]),_:1})]),default:o(()=>[e(U,{model:l(u),style:{"padding-top":"1em"}},{default:o(()=>[e(v,{vertical:""},{default:o(()=>[e(y,{"show-feedback":!1,label:l(n)("file.run.form.runModeLable"),path:"runMode"},{default:o(()=>[e(j,{value:l(u).runMode,"onUpdate:value":t[5]||(t[5]=a=>l(u).runMode=a)},{default:o(()=>[e(v,null,{default:o(()=>[e(M,{value:"run"},{default:o(()=>[g(_(l(n)("file.run.form.runModeValueNormal"))+" ",1),e(d,null,{default:o(()=>[e(i,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1}),e(M,{value:"conc"},{default:o(()=>[g(_(l(n)("file.run.form.runModeValueConcurrency"))+" ",1),e(d,null,{default:o(()=>[e(B,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(n)("file.run.form.optionsLable"),path:"param"},{default:o(()=>[e(L,{style:{"max-height":"160px"}},{default:o(()=>[e(P,{value:l(u).param,"onUpdate:value":t[6]||(t[6]=a=>l(u).param=a),preset:"pair","key-placeholder":l(n)("file.run.form.paramKeyPlaceholder"),"value-placeholder":l(n)("file.run.form.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(n)("file.run.form.envLable"),path:"env"},{default:o(()=>[e(L,{style:{"max-height":"160px"}},{default:o(()=>[e(P,{value:l(u).env,"onUpdate:value":t[7]||(t[7]=a=>l(u).env=a),preset:"pair","key-placeholder":l(n)("file.run.form.envKeyPlaceholder"),"value-placeholder":l(n)("file.run.form.envValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])):(w(),K(A,{key:0,show:l(r),"onUpdate:show":t[3]||(t[3]=a=>T(r)?r.value=a:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,title:l(m),"positive-text":l(n)("file.run.form.confirmButtion"),"negative-text":l(n)("common.cancelText"),style:{width:"600px"},"negative-button-props":{ghost:!1,tertiary:!0},onPositiveClick:t[4]||(t[4]=a=>N())},{icon:o(()=>[e(d,null,{default:o(()=>[e(x,{style:{"vertical-align":"-0.15em"}})]),_:1})]),default:o(()=>[e(U,{model:l(u),style:{"padding-top":"1em"}},{default:o(()=>[e(v,{vertical:""},{default:o(()=>[e(y,{"show-feedback":!1,label:l(n)("file.run.form.runModeLable"),path:"runMode"},{default:o(()=>[e(j,{value:l(u).runMode,"onUpdate:value":t[0]||(t[0]=a=>l(u).runMode=a)},{default:o(()=>[e(v,null,{default:o(()=>[e(M,{value:"run"},{default:o(()=>[g(_(l(n)("file.run.form.runModeValueNormal"))+" ",1),e(d,null,{default:o(()=>[e(i,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1}),e(M,{value:"conc"},{default:o(()=>[g(_(l(n)("file.run.form.runModeValueConcurrency"))+" ",1),e(d,null,{default:o(()=>[e(B,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(n)("file.run.form.optionsLable"),path:"param"},{default:o(()=>[e(L,{style:{"max-height":"160px"}},{default:o(()=>[e(P,{value:l(u).param,"onUpdate:value":t[1]||(t[1]=a=>l(u).param=a),preset:"pair","key-placeholder":l(n)("file.run.form.paramKeyPlaceholder"),"value-placeholder":l(n)("file.run.form.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(n)("file.run.form.envLable"),path:"env"},{default:o(()=>[e(L,{style:{"max-height":"160px"}},{default:o(()=>[e(P,{value:l(u).env,"onUpdate:value":t[2]||(t[2]=a=>l(u).env=a),preset:"pair","key-placeholder":l(n)("file.run.form.envKeyPlaceholder"),"value-placeholder":l(n)("file.run.form.envValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text"]))}}});export{Te as _};
