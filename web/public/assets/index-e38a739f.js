import{a6 as u,a7 as _,aH as I,as as x,a8 as n,a9 as l,aB as c,G as jt,x as v,al as r,bu as oe,aC as C,aL as Gt,au as _e,u as e,aV as ve,aI as m,aD as F,ax as We,aJ as me,aN as D,bv as he,bj as Je,y as Xt,b9 as Yt,bw as Wt,bx as Jt,am as Ke,by as Kt,aR as Qt,aK as en,bs as tn,bt as nn,bz as ln,ba as an,aS as on,bA as sn,bB as rn,a$ as un,bC as cn,aO as dn,bD as pn,bE as fn,bF as _n,bG as vn,bH as mn,av as hn,bI as gn,ay as yn,bJ as bn}from"./vendor-339b2486.js";import{_ as kn}from"./PageWrapper.vue_vue_type_style_index_0_lang-ebcdd68c.js";import{_ as xn,c as W,u as J,m as ge,r as ye,a as Qe,b as wn,d as Cn,e as $n,f as Tn,g as Dn,h as In}from"./create-971d7f82.js";import{_ as Mn}from"./more-horiz-299ff3a0.js";import{u as zn}from"./useTransition-0172c80f.js";import{_ as ke,c as An,a as Bn,k as Pn,P as Nn}from"./index-b98e63e9.js";import{u as qn}from"./useAppInject-25d4ad8f.js";import{f as et,a as tt,d as be,b as Rn,c as nt}from"./delete-15d244d2.js";import{b as Sn,f as On,c as En,d as Fn,e as lt,h as Un,i as Hn,g as Ln}from"./file-1f2fda02.js";import{b as at,f as ot,a as Zn}from"./index-02fa18bb.js";import{_ as Vn}from"./square-edit-outline-c0755133.js";import{R as jn,a as st}from"./index-dcba765c.js";import"./sharp-arrow-back-ios-59e3289b.js";import"./useDesign-d1f0a28d.js";import"./clock-edit-outline-4df5b965.js";import"./trash-ddde501b.js";import"./helper-121dcefa.js";const Gn={};function Xn(S,b){const U=xn;return u(),_(U,{style:{"vertical-align":"baseline"}})}const it=ke(Gn,[["render",Xn]]),Yn={},Wn={xmlns:"http://www.w3.org/2000/svg",style:{"vertical-align":"baseline",margin:"0 auto"},x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 48 48"},Jn=x("path",{fill:"#ffa000",d:"M40,12H22l-4-4H8c-2.2,0-4,1.8-4,4v24c0,2.2,1.8,4,4,4h29.7L44,29V16C44,13.8,42.2,12,40,12z"},null,-1),Kn=x("path",{fill:"#ffca28",d:"M40,12H8c-2.2,0-4,1.8-4,4v20c0,2.2,1.8,4,4,4h32c2.2,0,4-1.8,4-4V16C44,13.8,42.2,12,40,12z"},null,-1),Qn=[Jn,Kn];function el(S,b){return u(),I("svg",Wn,Qn)}const rt=ke(Yn,[["render",el]]),tl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},nl=x("path",{fill:"currentColor",d:"M7 5h14v2H7V5m0 8v-2h14v2H7M4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2H7m-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5Z"},null,-1),ll=[nl];function al(S,b){return u(),I("svg",tl,[...ll])}const ol={name:"mdi-format-list-bulleted",render:al},sl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},il=x("path",{fill:"currentColor",d:"M5 11q-.825 0-1.413-.588T3 9V5q0-.825.588-1.413T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.588 1.413T9 11H5Zm0 10q-.825 0-1.413-.588T3 19v-4q0-.825.588-1.413T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.588 1.413T9 21H5Zm10-10q-.825 0-1.413-.588T13 9V5q0-.825.588-1.413T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.588 1.413T19 11h-4Zm0 10q-.825 0-1.413-.588T13 19v-4q0-.825.588-1.413T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.588 1.413T19 21h-4ZM5 9h4V5H5v4Zm10 0h4V5h-4v4Zm0 10h4v-4h-4v4ZM5 19h4v-4H5v4ZM15 9Zm0 6Zm-6 0Zm0-6Z"},null,-1),rl=[il];function ul(S,b){return u(),I("svg",sl,[...rl])}const cl={name:"material-symbols-grid-view-outline-rounded",render:ul},dl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},pl=x("path",{fill:"currentColor",d:"M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8h5Z"},null,-1),fl=[pl];function _l(S,b){return u(),I("svg",dl,[...fl])}const vl={name:"mdi-home",render:_l},ml={};function hl(S,b){const U=Vn,w=c;return u(),_(w,null,{default:n(()=>[l(U,{style:{"vertical-align":"baseline"}})]),_:1})}const ut=ke(ml,[["render",hl]]),gl={key:0},yl={key:1},bl={key:2},kl={key:0,style:{height:"100%"}},xl={style:{"user-drag":"none","-webkit-user-select":"none","user-select":"none"}},wl={style:{"line-height":"0"}},Cl={style:{"vertical-align":"-4px"}},$l={style:{"margin-bottom":"12px"}},Zl=jt({__name:"index",setup(S){const{message:b,confirm:U}=An(),{getIsMobile:w}=qn(),{t:s}=Bn(),ct=Pn(),xe=v("fade-slide");zn(xe);const we=v(),q=v(!0),O=v(!1),H=v(!1),L=v(!1),Z=v(!1),V=v(!1),j=v(!1),se=v(!0),ie=v(!1),E=v([]),A=v(""),re=v([]),Ce=v([]),z=w.value?3:7,p=v([]),K=v([]),f=v(null),R=v(null),Q=v(""),$=v({type:1,name:null,dir:null}),$e=v(!1),Te=v(!1),ue=v(0),ce=v(0),De=v(0),Ie=v(0),Me=v(0),dt=[{title:s("page.file.table.columnsLabel.name"),key:"name",align:"left",render(a){const t=a.name;return r(C,{style:"gap: 4px"},{default:()=>[r(c,{size:16,style:"vertical-align: -0.2em"},{default:()=>r(a.type===0?rt:(at[t.substring(t.lastIndexOf(".")+1)]||{}).icon||it)}),r(oe,{lineClamp:1,style:"max-width: 160px; user-select: none;"},{default:()=>t})]})}},{title:s("page.file.table.columnsLabel.editTime"),key:"mTime",align:"center",titleAlign:"center",width:180}],G=async a=>{switch(a){case"clickContextMenu":O.value=!1;break;case"exitContextMenu":O.value=!1,k("opreationItem");break;case"goBack":let t=p.value[p.value.length-2];if(Array.isArray(t)){const i=t.length-1;t=t[i],ee(t,i,!0)}else{const i=p.value.length-2;ee(t,i,!1)}break;case"closeDrawer":H.value=!1;break}},pt=(a,t)=>{f.value=t,re.value=Ae(t),ue.value=a.clientX,ce.value=a.clientY,a.preventDefault(),O.value=!0},ze=async a=>{f.value=a,H.value=!0},Ae=a=>{const t={create:{label:s("file.create.button"),key:"create",icon:()=>r(c,null,{default:()=>r(W)}),props:{onClick:()=>{te()}}},edit:{label:s("file.edit.button"),key:"edit",icon:()=>r(c,null,{default:()=>r(ut)}),props:{onClick:()=>{Ne()}}},upload:{label:s("file.upload.button"),key:"upload",icon:()=>r(c,null,{default:()=>r(J)}),props:{onClick:()=>{ne()}}},download:{label:s("file.download.button"),key:"ndownload",icon:()=>r(c,null,{default:()=>r(a.type===0?tt:et)}),props:{onClick:()=>{Fe()}}},attribute:{label:s("file.attribute.button"),key:"attribute",icon:()=>r(c,null,{default:()=>r(Qe)}),props:{onClick:()=>{Ue()}}},move:{label:s("file.move.button"),key:"move",icon:()=>r(c,null,{default:()=>r(ge)}),props:{onClick:()=>{qe()}}},rename:{label:s("file.rename.button"),key:"rename",icon:()=>r(c,null,{default:()=>r(ye)}),props:{onClick:()=>{Se()}}},divider:{type:"divider",key:"d1"},delete:{label:()=>r(Je,{style:{color:"var(--app-error-color)"}},{default:()=>s("file.delete.button")}),key:"delete",icon:()=>r(c,{color:"var(--app-error-color)"},{default:()=>r(be)}),props:{onClick:()=>{Ee()}}}};let i=[t.download,t.attribute,t.move,t.rename,t.divider,t.delete];return a.type===0?i=[t.create,t.upload,...i]:i=[t.edit,...i],i},Be=a=>{const t=[];for(let i=0;i<a.length;i++){const d=a[i];t.push({label:d.title,key:d.path,props:{onClick:()=>{ee(d,i,!0)}}})}return t},ft=(a,t,i)=>{if(i.node)switch(i.action){case"expand":i.node.prefix=()=>r(c,null,{default:()=>r(Zn)});break;case"collapse":i.node.prefix=()=>r(c,null,{default:()=>r(ot)});break}};let de;const _t=(a,t)=>({onContextmenu:i=>{w.value||(f.value=a,re.value=Ae(a),i.preventDefault(),O.value=!1,Xt().then(()=>{O.value=!0,ue.value=i.clientX,ce.value=i.clientY}))},ondblclick:()=>{w.value||X(a)},onclick:()=>{w.value&&X(a)},ontouchstart:i=>{w.value&&(De.value=Date.now(),Ie.value=i.touches[0].clientX,Me.value=i.touches[0].clientY,de=setTimeout(()=>{ze(a)},300))},ontouchmove:()=>{w.value&&clearTimeout(de)},ontouchend:i=>{if(!w.value)return;clearTimeout(de);const d=Date.now(),T=i.changedTouches[0].clientX,g=i.changedTouches[0].clientY,h=d-De.value,y=Math.sqrt((T-Ie.value)**2+(g-Me.value)**2);h<300&&y<10&&X(a)}}),vt=(a,t,i)=>{switch(i.action){case"select":i.node&&(R.value=i.node,$.value.dir=i.node.key);break;case"delete":case"clear":case"unselect":k("treeSelect");break}},ee=(a,t,i)=>{if(P(a.path),p.value.length>=3&&Array.isArray(p.value[p.value.length-2])){const d=p.value[p.value.length-2],T=p.value.length-2+(t+1-1)+1,g=[];if(T>z){for(let y=0;y<p.value.length-2;y++)g.push(p.value[y]);const h=[];if(i){for(let y=0;y<=t-1;y++)h.push(d[y]);g.push(h),g.push(d[t])}else{for(let y=0;y<d.length;y++)h.push(d[y]);g.push(h),g.push(p.value[t])}p.value=g,K.value=Be(p.value[p.value.length-2])}else{for(let h=0;h<p.value.length-2;h++)g.push(p.value[h]);for(let h=0;h<t;h++)g.push(d[h]);g.push(d[t]),p.value=g,K.value=[]}}else p.value=p.value.splice(0,t+1);$e.value=!1,Te.value=!1},X=a=>{if(a.type===0){P(a.path);const t={path:a.path,title:a.name,type:a.type};p.value.length<z?p.value.push(t):(Array.isArray(p.value[z-2])?p.value[z-2].push(p.value[z-1]):p.value[z-2]=[p.value[z-2],p.value[z-1]],p.value[z-1]=t,K.value=Be(p.value[z-2])),$e.value=!1,Te.value=!1}else b.info(s("page.file.isFileTips"))},Pe=async()=>{ie.value=!0;const a=await Ln({isDir:"true"}),t=await mt(a);Ce.value=t,ie.value=!1},P=async a=>{se.value=!0;try{const t=await Sn({path:a});if(t.children&&t.children.length){const i=[];t.children.forEach(d=>{const T=d.name,g=T.substring(T.lastIndexOf(".")+1),h=at[g]||{},y=()=>r(d.type===0?rt:h.icon||it),N={name:d.name,path:d.path,type:d.type,mTime:d.mTime,icon:y,isChecked:!1,isDir:d.type===0};i.push(N)}),E.value=i}else E.value=[];A.value=a}finally{se.value=!1}},mt=async a=>{const t=i=>{i.length&&i.forEach(d=>{d.type===0&&(Object.assign(d,{key:d.path,label:d.title,isDir:!0,prefix:()=>r(c,null,{default:()=>r(ot)})}),t(d.children),d.children.length||(Object.assign(d,{children:null}),d.prefix=()=>r(c,null,{default:()=>r(In)})))})};return t(a),a},k=a=>{switch(a){case"opreationItem":f.value=null;break;case"renameInput":Q.value="";break;case"treeSelect":R.value=null,$.value.dir=void 0;break;case"createData":$.value={type:1,name:void 0,dir:void 0};break}},pe=()=>({ghost:!1,tertiary:!0}),Ne=async()=>{ct(`${Nn.SCRIPT_MANAGE_PAGE}?path=${f.value.path}`)},ht=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(ge)}),qe=()=>{Z.value=!0,Pe()},gt=async()=>{const a=f.value.path,t=f.value.name;let i=R.value?R.value.path:"";i=`${i}${a.includes("\\")?"\\":"/"}${t}`;try{await On({path:a,newPath:i}),b.success(s("file.move.success")),P(A.value)}catch{}finally{k("treeSelect"),k("opreationItem")}},yt=()=>({disabled:!R.value}),Re=()=>{Z.value=!1,k("treeSelect")},bt=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(ye)}),Se=()=>{L.value=!0},kt=async()=>{const a=f.value.path;try{await En({path:a,name:Q.value}),b.success(s("file.rename.success")),P(A.value)}catch{}finally{k("opreationItem")}},xt=()=>({disabled:!Q.value}),Oe=()=>{L.value=!1,k("opreationItem"),k("renameInput")},wt=a=>{Q.value=a},Ct=a=>!["<",">","?","*","/"].some(t=>a.includes(t)),Ee=async()=>{const a=f.value.path;U.error({title:s("file.delete.title"),content:s("file.delete.confirm"),icon:()=>r(c,{style:"vertical-align: 0"},{default:()=>r(be)}),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:s("file.delete.button"),onPositiveClick:async()=>{try{await Fn({path:a}),b.success(s("file.delete.success")),P(A.value)}catch{}finally{k("opreationItem")}},onNegativeClick:()=>{k("opreationItem")},negativeButtonProps:{ghost:!1,tertiary:!0}})},Fe=async()=>{const a=f.value.path,t=f.value.name,i=f.value.isDir,d=b.info(s("file.download.wait"),{duration:0,icon:()=>r(c,null,{default:()=>r(Rn)})});try{if(i){const{code:T,message:g,blob:h}=await lt({path:a});d.destroy(),T?(b.success(s("file.download.success")),h&&nt(h,`${t}.zip`)):g&&b.error(g)}else{const{code:T,message:g,blob:h}=await lt({path:a});d.destroy(),T?(b.success(s("file.download.success")),h&&nt(h,t)):g&&b.error(g)}}catch{d.destroy(),b.error(s("file.download.fail"),{keepAliveOnHover:!0})}finally{k("opreationItem")}},Ue=async()=>{const a=f.value.path,t=f.value.isDir;try{we.value?.open({path:a,isDir:t})}catch{}finally{k("opreationItem")}},$t={name:{required:!0},dir:{required:!0}},Tt=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(W)}),te=()=>{V.value=!0},Dt=async()=>{$.value.dir=f.value?f.value.path:A.value;const a=$.value.type,t=$.value.name,i=$.value.dir;try{await Un({type:a,name:t,dir:i}),b.success(s("file.create.success")),P(A.value)}catch{}finally{k("createData"),k("opreationItem")}},He=()=>{V.value=!1,k("createData"),k("opreationItem")},It=()=>({disabled:!$.value.name}),Mt=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(J)}),ne=()=>{j.value=!0,Pe()},zt=({file:a,onFinish:t,onError:i,onProgress:d})=>{const T=a.name,g=new FormData,h=f.value?f.value.path:A.value;g.append("file",a.file),Hn({params:g,path:h,onUploadProgress:({progress:y})=>{d({percent:Math.ceil((y||0)*100)})}}).then(()=>{b.success(`${T} ${s("file.upload.success")}`),P(A.value),t()}).catch(y=>{b.error(y.message,{keepAliveOnHover:!0}),i()})},At=()=>{j.value=!1,k("createData"),k("opreationItem")};return Gt(async()=>{p.value=[{title:s("page.file.rootPathLabel"),path:"/arcadia",type:0}],await P("/arcadia")}),(a,t)=>{const i=Yt,d=yn,T=vl,g=bn,h=Wt,y=Jt,N=Ke,fe=Kt,Le=Qt,Ze=cl,Ve=ol,M=Ke,Y=en,Bt=Mn,le=tn,je=nn,Ge=ln,Pt=an,Nt=on,qt=sn,Rt=rn,Xe=un,ae=cn,St=dn,Ot=pn,Et=Cn,Ft=fn,Ut=_n,Ht=$n,Lt=Tn,Ye=vn,Zt=mn,Vt=kn;return u(),_(Vt,{ref:"pageWrapper","content-full":!0},{title:n(()=>[l(e(C),null,{default:n(()=>[l(y,{"x-scrollable":"",size:0},{default:n(()=>[l(h,null,{default:n(()=>[(u(!0),I(ve,null,_e(e(p),(o,B)=>(u(),_(g,{key:o?.title||"...",onClick:Tl=>Array.isArray(o)&&o.length>0?()=>{}:ee(o,B,!1)},{default:n(()=>[Array.isArray(o)&&o.length>0?(u(),I("div",gl,[l(i,{trigger:e(w)?"click":"hover",size:"small",options:e(K)},{default:n(()=>[l(e(c),null,{default:n(()=>[l(e(Dn))]),_:1})]),_:1},8,["trigger","options"])])):(u(),I("div",yl,[l(e(C),{style:{gap:"4px"}},{default:n(()=>[B===0?(u(),_(e(c),{key:0,size:16},{default:n(()=>[e(se)?(u(),_(d,{key:0,size:16,style:{"vertical-align":"baseline"}})):(u(),_(T,{key:1,style:{"vertical-align":"0"}}))]),_:1})):me("",!0),e(w)&&B===2?(u(),_(e(oe),{key:1,style:{height:"100%","max-width":"80px"}},{tooltip:n(()=>[x("span",null,m(o.title),1)]),default:n(()=>[x("span",null,m(o.title),1)]),_:2},1024)):(u(),I("span",bl,m(o.title),1))]),_:2},1024)]))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),extra:n(()=>[l(We,{name:e(xe),mode:"out-in",appear:""},{default:n(()=>[l(e(C),null,{default:n(()=>[e(w)?(u(),_(fe,{key:1,style:{height:"28px"}},{default:n(()=>[l(Le,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(N,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[2]||(t[2]=o=>te())},{icon:n(()=>[l(e(W))]),_:1})]),default:n(()=>[x("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(Le,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(N,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[3]||(t[3]=o=>ne())},{icon:n(()=>[l(e(J))]),_:1})]),default:n(()=>[x("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(fe,{key:0,style:{height:"28px"}},{default:n(()=>[l(N,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[0]||(t[0]=o=>te())},{icon:n(()=>[l(e(W))]),default:n(()=>[x("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(N,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[1]||(t[1]=o=>ne())},{icon:n(()=>[l(e(J))]),default:n(()=>[x("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})),e(w)?(u(),_(M,{key:3,tertiary:"",strong:"",size:"small",style:{padding:"6px"},onClick:t[5]||(t[5]=o=>q.value=!e(q))},{icon:n(()=>[l(e(c),{size:18},{default:n(()=>[e(q)?(u(),_(Ze,{key:0,style:{"vertical-align":"baseline"}})):(u(),_(Ve,{key:1,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})):(u(),_(e(jn),{key:2,value:e(q),"onUpdate:value":t[4]||(t[4]=o=>F(q)?q.value=o:null),size:"small","default-value":!0,style:{"background-color":"var(--app-hover-color)",height:"28px"},variant:"default-filled"},{default:n(()=>[l(e(st),{value:!0,style:{height:"100%"}},{default:n(()=>[l(e(c),{size:18},{default:n(()=>[l(Ze,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1}),l(e(st),{value:!1,style:{height:"100%"}},{default:n(()=>[l(e(c),{size:18},{default:n(()=>[l(Ve,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1})]),_:1},8,["value"]))]),_:1})]),_:1},8,["name"])]),default:n(()=>[l(Y,{bordered:!e(w),style:{height:"100%"},"content-style":"padding: 0; height: 100%"},{default:n(()=>[l(We,{name:"fade",mode:"out-in",appear:""},{default:n(()=>[e(E).length?(u(),I("div",kl,[e(q)?(u(),_(y,{key:0},{default:n(()=>[e(w)?(u(),_(je,{key:1,"x-gap":"4",cols:3},{default:n(()=>[(u(!0),I(ve,null,_e(e(E),o=>(u(),_(le,{key:o.name,style:{padding:"8px"}},{default:n(()=>[l(Y,{bordered:!1,style:{height:"140px",width:"100%"},"content-style":"max-height: 60px; padding: 0; margin: 0 auto","footer-style":"height: 100%; padding: 0; text-align: center; width: 100%",onClick:B=>X(o)},{default:n(()=>[l(e(c),{size:50,depth:1,style:{height:"100px",width:"100%"}},{default:n(()=>[(u(),_(he(o.icon)))]),_:2},1024)]),footer:n(()=>[l(e(C),{vertical:""},{default:n(()=>[l(e(oe),{"line-clamp":2,style:{height:"100%","user-drag":"none","-webkit-user-select":"none","user-select":"none"}},{tooltip:n(()=>[x("span",null,m(o.name),1)]),default:n(()=>[x("span",wl,m(o.name),1)]),_:2},1024),l(M,{round:"",secondary:"",size:"tiny",focusable:!1,onClick:gn(B=>ze(o),["stop"])},{icon:n(()=>[l(e(c),{size:22,depth:5},{default:n(()=>[l(Bt,{style:{"vertical-align":"baseline"}})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(u(),_(e(C),{key:0,inline:"",style:{gap:"0"}},{default:n(()=>[(u(!0),I(ve,null,_e(e(E),o=>(u(),I("div",{key:o.name,bordered:!1,style:{height:"200px",width:"200px",padding:"20px"}},[l(Y,{bordered:!1,class:hn(o.isSelected?"file-selected":"file"),style:{height:"100%",width:"100%","border-radius":"6px"},"content-style":"padding: 0; margin: 0 auto","footer-style":"text-align: center; width: 100%",onContextmenu:B=>pt(B,o),onClick:B=>o.isSelected=!o.isSelected,onDblclick:B=>X(o)},{cover:n(()=>[l(e(c),{size:60,depth:1,style:{height:"100px",width:"100%","padding-top":"20px"}},{default:n(()=>[(u(),_(he(o.icon)))]),_:2},1024)]),footer:n(()=>[x("span",xl,m(o.name),1)]),_:2},1032,["class","onContextmenu","onClick","onDblclick"])]))),128))]),_:1})),l(Ge)]),_:1})):(u(),_(y,{key:1},{default:n(()=>[l(Pt,{columns:dt,data:e(E),"row-props":_t,"paginate-single-page":!1},null,8,["data"]),l(Ge)]),_:1})),e(w)?me("",!0):(u(),_(i,{key:2,placement:"bottom-start",trigger:"manual",x:e(ue),y:e(ce),options:e(re),show:e(O),onSelect:t[6]||(t[6]=o=>G("clickContextMenu")),onClickoutside:t[7]||(t[7]=o=>G("exitContextMenu"))},null,8,["x","y","options","show"]))])):(u(),_(Nt,{key:1,class:"min-h-200px flex-jc-ac h-full",description:e(s)("page.file.emptyDirectory"),size:"huge"},{extra:n(()=>[l(M,{secondary:"",type:"primary",size:"large",focusable:!1,onClick:t[8]||(t[8]=o=>G("goBack"))},{default:n(()=>[D(m(e(s)("page.file.goBack")),1)]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1},8,["bordered"]),l(Rt,{show:e(H),"onUpdate:show":t[17]||(t[17]=o=>F(H)?H.value=o:null),"auto-focus":!1,height:e(f)?.type===0?"370px":"330px",placement:"bottom",onOnEsc:t[18]||(t[18]=o=>G("closeDrawer")),onOnMaskClick:t[19]||(t[19]=o=>G("closeDrawer"))},{default:n(()=>[l(qt,{closable:"","header-style":"padding: 10px 18px; border-bottom: hidden; user-drag: none; -webkit-user-select: none; user-select: none;","body-content-style":"padding: 10px 18px; overscroll-behavior: none; user-drag: none; -webkit-user-select: none; user-select: none;"},{header:n(()=>[l(e(C),null,{default:n(()=>[l(e(c),{size:50,depth:1},{default:n(()=>[(u(),_(he(e(f).icon)))]),_:1}),l(Y,{bordered:!1,"header-style":"padding: 0","content-style":"padding: 0; font-size: 12px"},{header:n(()=>[l(e(oe),{style:{height:"100%","max-width":"240px"}},{tooltip:n(()=>[x("span",null,m(e(f)?.name),1)]),default:n(()=>[x("span",Cl,m(e(f)?.name),1)]),_:1})]),default:n(()=>[D(" "+m(e(s)("page.file.editAt"))+" "+m(e(f)?.mTime),1)]),_:1})]),_:1})]),default:n(()=>[l(e(C),{vertical:"",style:{gap:"16px 0"}},{default:n(()=>[l(je,{"x-gap":"6px ",cols:3,style:{width:"100%"}},{default:n(()=>[l(le,null,{default:n(()=>[e(f)?.type===0?(u(),_(M,{key:0,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[9]||(t[9]=o=>ne())},{default:n(()=>[l(e(C),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(J))]),_:1}),D(" "+m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(M,{key:1,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[10]||(t[10]=o=>Ne())},{default:n(()=>[l(e(C),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(ut))]),_:1}),D(" "+m(e(s)("file.edit.button")),1)]),_:1})]),_:1}))]),_:1}),l(le,null,{default:n(()=>[l(M,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[11]||(t[11]=o=>qe())},{default:n(()=>[l(e(C),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(ge))]),_:1}),D(" "+m(e(s)("file.move.button")),1)]),_:1})]),_:1})]),_:1}),l(le,null,{default:n(()=>[l(M,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[12]||(t[12]=o=>Se())},{default:n(()=>[l(e(C),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(ye))]),_:1}),D(" "+m(e(s)("file.rename.button")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(fe,{vertical:"",size:"large",style:{gap:"1px 0",width:"100%"}},{default:n(()=>[l(M,{secondary:"",block:"",strong:"",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[13]||(t[13]=o=>Fe())},{icon:n(()=>[l(e(c),null,{default:n(()=>[e(f)?.type===1?(u(),_(e(et),{key:0})):(u(),_(e(tt),{key:1}))]),_:1})]),default:n(()=>[D(" "+m(e(s)("file.download.button")),1)]),_:1}),l(M,{secondary:"",block:"",strong:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[14]||(t[14]=o=>Ue())},{icon:n(()=>[l(e(c),null,{default:n(()=>[l(e(Qe))]),_:1})]),default:n(()=>[D(" "+m(e(s)("file.attribute.button")),1)]),_:1}),e(f)?.type===0?(u(),_(M,{key:0,secondary:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[15]||(t[15]=o=>te())},{icon:n(()=>[l(e(c),null,{default:n(()=>[l(e(W))]),_:1})]),default:n(()=>[D(" "+m(e(s)("file.create.button")),1)]),_:1})):me("",!0),l(M,{secondary:"",block:"",strong:"",type:"error",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[16]||(t[16]=o=>Ee())},{icon:n(()=>[l(e(c),null,{default:n(()=>[l(e(be))]),_:1})]),default:n(()=>[D(" "+m(e(s)("file.delete.button")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show","height"]),l(ae,{show:e(L),"onUpdate:show":t[20]||(t[20]=o=>F(L)?L.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:bt,title:e(s)("file.rename.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Oe,"positive-button-props":xt(),"negative-button-props":pe(),onNegativeClick:t[21]||(t[21]=o=>Oe()),onPositiveClick:t[22]||(t[22]=o=>kt())},{default:n(()=>[l(Xe,{clearable:"",style:{"margin-top":"5px"},"default-value":e(f)?e(f).name:null,"allow-input":Ct,onInput:wt},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ae,{show:e(Z),"onUpdate:show":t[23]||(t[23]=o=>F(Z)?Z.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:ht,title:e(s)("file.move.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Re,"positive-button-props":yt(),"negative-button-props":pe(),onNegativeClick:t[24]||(t[24]=o=>Re()),onPositiveClick:t[25]||(t[25]=o=>gt())},{default:n(()=>[l(St,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(ie),options:e(Ce),"on-update:expanded-keys":ft,"on-update:value":vt},null,8,["loading","options"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ae,{show:e(j),"onUpdate:show":t[26]||(t[26]=o=>F(j)?j.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Mt,title:!e(R)&&!e(f)?e(s)("file.upload.needSelect"):e(s)("file.upload.title"),"on-close":At},{default:n(()=>[l(e(C),{vertical:""},{default:n(()=>[l(Ot,{type:"info",closable:""},{default:n(()=>[D(m(e(s)("file.upload.info")),1)]),_:1}),l(Ut,{multiple:"","directory-dnd":"",disabled:!e(R)&&!e(f)&&!e(A),"custom-request":zt},{default:n(()=>[l(Ft,null,{default:n(()=>[x("div",$l,[l(e(c),{size:"48",depth:3},{default:n(()=>[l(Et)]),_:1})]),l(e(Je),{style:{"font-size":"16px"}},{default:n(()=>[D(m(e(s)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["show","title"]),l(ae,{show:e(V),"onUpdate:show":t[30]||(t[30]=o=>F(V)?V.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Tt,title:e(s)("file.create.title"),"on-close":He,"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"positive-button-props":It(),"negative-button-props":pe(),onNegativeClick:t[31]||(t[31]=o=>He()),onPositiveClick:t[32]||(t[32]=o=>Dt())},{default:n(()=>[l(Y,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:n(()=>[l(Zt,{model:e($),rules:$t,"label-placement":"left",style:{"padding-top":"1em"}},{default:n(()=>[l(Ye,{label:e(s)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-top":"1em"}},{default:n(()=>[l(e(C),{style:{width:"100%",height:"140px",gap:"0"},justify:"space-around"},{default:n(()=>[l(N,{strong:"",dashed:"",type:e($).type===1?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[27]||(t[27]=o=>e($).type=1)},{default:n(()=>[l(e(C),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(c),{size:48},{default:n(()=>[l(Ht,{style:{"vertical-align":"base-line"}})]),_:1}),D(" "+m(e(s)("file.create.form.typeFile")),1)]),_:1})]),_:1},8,["type"]),l(N,{strong:"",dashed:"",type:e($).type===0?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[28]||(t[28]=o=>e($).type=0)},{default:n(()=>[l(e(C),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(c),{size:48},{default:n(()=>[l(Lt,{style:{"vertical-align":"base-line"}})]),_:1}),D(" "+m(e(s)("file.create.form.typeFolder")),1)]),_:1})]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),l(Ye,{label:e(s)("file.create.form.name"),path:"name"},{default:n(()=>[l(Xe,{value:e($).name,"onUpdate:value":t[29]||(t[29]=o=>e($).name=o),clearable:"",placeholder:e(s)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(wn,{ref_key:"fileAttributeModal",ref:we},null,512)]),_:1},512)}}});export{Zl as default};
