var I=(b,f,h)=>new Promise((k,o)=>{var L=r=>{try{s(h.next(r))}catch(m){o(m)}},$=r=>{try{s(h.throw(r))}catch(m){o(m)}},s=r=>r.done?k(r.value):Promise.resolve(r.value).then(L,$);s((h=h.apply(b,f)).next())});import{a6 as w,aI as V,as as c,G as O,r as z,ah as D,I as E,u as l,a7 as A,a8 as n,a9 as e,aN as g,aH as _,aD as K,aB as Z,ca as q,aC as F,cb as J,bG as Q,cj as W,bx as X,bH as Y,bC as ee,bs as le,am as ne,bA as oe,bB as ae}from"./vendor-tP7MJkVm.js";import{c as te,a as re}from"./index-YWZYq8iG.js";import{u as se}from"./useAppInject-BuU8lio7.js";import{u as ue}from"./useRunLog-IJiSGNPm.js";const ie={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},ce=c("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[c("path",{d:"m18 4l3 3l-3 3m0 10l3-3l-3-3"}),c("path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5m0-10h-5a4.978 4.978 0 0 0-3 1m-4 8a4.984 4.984 0 0 1-3 1H3"})],-1),de=[ce];function pe(b,f){return w(),V("svg",ie,[...de])}const _e={name:"tabler-arrows-shuffle",render:pe},me={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},fe=c("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[c("path",{d:"M3 7h1.948c1.913 0 3.705.933 4.802 2.5a5.861 5.861 0 0 0 4.802 2.5H21"}),c("path",{d:"M3 17h1.95a5.854 5.854 0 0 0 4.798-2.5a5.854 5.854 0 0 1 4.798-2.5H20"}),c("path",{d:"m18 15l3-3l-3-3"})],-1),he=[fe];function ve(b,f){return w(),V("svg",me,[...he])}const ye={name:"tabler-arrows-join2",render:ve},ge={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},be=c("path",{fill:"currentColor",d:"M13.54 22H10c-.25 0-.46-.18-.5-.42l-.37-2.65c-.63-.25-1.17-.59-1.69-.99l-2.49 1.01c-.22.08-.49 0-.61-.22l-2-3.46a.493.493 0 0 1 .12-.64l2.11-1.66L4.5 12l.07-1l-2.11-1.63a.493.493 0 0 1-.12-.64l2-3.46c.12-.22.39-.31.61-.22l2.49 1c.52-.39 1.06-.73 1.69-.98l.37-2.65c.04-.24.25-.42.5-.42h4c.25 0 .46.18.5.42l.37 2.65c.63.25 1.17.59 1.69.98l2.49-1c.22-.09.49 0 .61.22l2 3.46c.13.22.07.49-.12.64L19.43 11l.07 1v.19c-.5-.12-1-.19-1.5-.19c-.17 0-.34 0-.5.03c0-.62-.1-1.24-.3-1.83l2.11-1.55l-.75-1.3l-2.41 1.04a5.42 5.42 0 0 0-3.03-1.77L12.75 4h-1.5l-.37 2.61c-1.2.25-2.26.89-3.03 1.78L5.44 7.35l-.75 1.3L6.8 10.2a5.55 5.55 0 0 0 0 3.6l-2.12 1.56l.75 1.3l2.43-1.04c.77.88 1.82 1.52 3.01 1.76l.37 2.62h1.11c.26.75.65 1.42 1.19 2m2.42-9.64c.04-.12.04-.24.04-.36c0-2.21-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4c.12 0 .24 0 .36-.04a6.045 6.045 0 0 1 3.6-3.6M12 14c-1.1 0-2-.89-2-2s.9-2 2-2s2 .9 2 2s-.89 2-2 2m4 1v6l5-3l-5-3Z"},null,-1),ke=[be];function xe(b,f){return w(),V("svg",ge,[...ke])}const we={name:"mdi-cog-play-outline",render:xe},$e={style:{"vertical-align":"-4px",padding:"0 2px"}},je=O({__name:"runParamModal",setup(b,{expose:f}){const{getIsMobile:h}=se(),{message:k}=te(),{t:o}=re(),{runLog:L}=ue(),$={show:!1,title:"",runPath:"",model:{param:[],env:[],runMode:"run"},cmd:""},s=z(D($)),{show:r,title:m,model:u}=E(s),B=()=>I(this,null,function*(){var p;let d;d=`task ${s.model.runMode} ${s.runPath}`;const a=s.model.param.map(i=>i.key?i.value?`${i.key} ${i.value}`:`${i.key}`:"").join(" ");a&&(d=`${d} ${a}`);const x=s.model.env.map(i=>i.key?`task env edit ${i.key} ${i.value||'""'} >/dev/null 2>&1`:"").join(" ; ");x&&(d=`${x} ; ${d}`);try{s.cmd=d,s.show=!1,(p=L.value)==null||p.open({title:s.title,cmd:s.cmd})}catch(i){k==null||k.error(`${o("file.run.fail")} (${i})`,{keepAliveOnHover:!0})}});return f({open:(d={runPath:""})=>{Object.assign(s,D($),d,{show:!0})}}),(d,a)=>{const x=we,p=Z,i=ye,M=q,j=_e,v=F,N=J,y=Q,P=W,C=X,U=Y,T=ee,R=le,H=ne,S=oe,G=ae;return l(h)?(w(),A(G,{key:1,show:l(r),"onUpdate:show":a[10]||(a[10]=t=>K(r)?r.value=t:null),height:"100vh",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:n(()=>[e(S,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:n(()=>[e(v,null,{default:n(()=>[e(p,{color:"var(--app-primary-color)"},{default:n(()=>[e(x,{style:{"font-size":"24px","vertical-align":"0"}})]),_:1}),e(R,{style:{height:"100%","max-width":"260px"}},{tooltip:n(()=>[c("span",null,_(l(m)),1)]),default:n(()=>[c("span",$e,_(l(m)),1)]),_:1})]),_:1})]),footer:n(()=>[e(v,null,{default:n(()=>[e(H,{tertiary:"",focusable:!1,onClick:a[8]||(a[8]=t=>r.value=!1)},{default:n(()=>[g(_(l(o)("common.cancelText")),1)]),_:1}),e(H,{type:"primary",focusable:!1,onClick:a[9]||(a[9]=t=>B())},{default:n(()=>[g(_(l(o)("common.okText")),1)]),_:1})]),_:1})]),default:n(()=>[e(U,{model:l(u),style:{"padding-top":"1em"}},{default:n(()=>[e(v,{vertical:""},{default:n(()=>[e(y,{"show-feedback":!1,label:l(o)("file.run.form.runModeLable"),path:"runMode"},{default:n(()=>[e(N,{value:l(u).runMode,"onUpdate:value":a[5]||(a[5]=t=>l(u).runMode=t)},{default:n(()=>[e(v,null,{default:n(()=>[e(M,{value:"run"},{default:n(()=>[g(_(l(o)("file.run.form.runModeValueNormal"))+" ",1),e(p,null,{default:n(()=>[e(i,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1}),e(M,{value:"conc"},{default:n(()=>[g(_(l(o)("file.run.form.runModeValueConcurrency"))+" ",1),e(p,null,{default:n(()=>[e(j,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(o)("file.run.form.optionsLable"),path:"param"},{default:n(()=>[e(C,{style:{"max-height":"160px"}},{default:n(()=>[e(P,{value:l(u).param,"onUpdate:value":a[6]||(a[6]=t=>l(u).param=t),preset:"pair","key-placeholder":l(o)("file.run.form.paramKeyPlaceholder"),"value-placeholder":l(o)("file.run.form.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(o)("file.run.form.envLable"),path:"env"},{default:n(()=>[e(C,{style:{"max-height":"160px"}},{default:n(()=>[e(P,{value:l(u).env,"onUpdate:value":a[7]||(a[7]=t=>l(u).env=t),preset:"pair","key-placeholder":l(o)("file.run.form.envKeyPlaceholder"),"value-placeholder":l(o)("file.run.form.envValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])):(w(),A(T,{key:0,show:l(r),"onUpdate:show":a[3]||(a[3]=t=>K(r)?r.value=t:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,title:l(m),"positive-text":l(o)("file.run.form.confirmButtion"),"negative-text":l(o)("common.cancelText"),style:{width:"600px"},"negative-button-props":{ghost:!1,tertiary:!0},onPositiveClick:a[4]||(a[4]=t=>B())},{icon:n(()=>[e(p,null,{default:n(()=>[e(x,{style:{"vertical-align":"-0.15em"}})]),_:1})]),default:n(()=>[e(U,{model:l(u),style:{"padding-top":"1em"}},{default:n(()=>[e(v,{vertical:""},{default:n(()=>[e(y,{"show-feedback":!1,label:l(o)("file.run.form.runModeLable"),path:"runMode"},{default:n(()=>[e(N,{value:l(u).runMode,"onUpdate:value":a[0]||(a[0]=t=>l(u).runMode=t)},{default:n(()=>[e(v,null,{default:n(()=>[e(M,{value:"run"},{default:n(()=>[g(_(l(o)("file.run.form.runModeValueNormal"))+" ",1),e(p,null,{default:n(()=>[e(i,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1}),e(M,{value:"conc"},{default:n(()=>[g(_(l(o)("file.run.form.runModeValueConcurrency"))+" ",1),e(p,null,{default:n(()=>[e(j,{style:{"vertical-align":"-0.15em"}})]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(o)("file.run.form.optionsLable"),path:"param"},{default:n(()=>[e(C,{style:{"max-height":"160px"}},{default:n(()=>[e(P,{value:l(u).param,"onUpdate:value":a[1]||(a[1]=t=>l(u).param=t),preset:"pair","key-placeholder":l(o)("file.run.form.paramKeyPlaceholder"),"value-placeholder":l(o)("file.run.form.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"]),e(y,{"show-feedback":!1,label:l(o)("file.run.form.envLable"),path:"env"},{default:n(()=>[e(C,{style:{"max-height":"160px"}},{default:n(()=>[e(P,{value:l(u).env,"onUpdate:value":a[2]||(a[2]=t=>l(u).env=t),preset:"pair","key-placeholder":l(o)("file.run.form.envKeyPlaceholder"),"value-placeholder":l(o)("file.run.form.envValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1})]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title","positive-text","negative-text"]))}}});export{je as _};
