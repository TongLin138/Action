import{_ as ne}from"./swap-outlined-206b9abd.js";import{c as te,_ as oe}from"./index-11f80ee5.js";import{a6 as o,aH as T,as as c,G as se,r as le,I as ae,u as e,a7 as s,a8 as n,a9 as t,aN as P,aI as u,aJ as A,aD as j,aB as ie,am as ce,aR as re,by as _e,aC as pe,bS as ue,cb as de,bx as ge,aK as me,bC as he,bu as fe,bA as ye,bB as ve}from"./vendor-339b2486.js";import{b as we,_ as be,d as xe,e as ke}from"./index-02fa18bb.js";import{c as ze,a as $e,k as Ce,P as Te}from"./index-b98e63e9.js";import{u as We}from"./useAppInject-25d4ad8f.js";import{a as qe}from"./file-1f2fda02.js";import L from"./loading-ab369df4.js";const Be={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ve=c("path",{fill:"currentColor",d:"M8 12h8v2H8v-2m2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4v-2m-2-2h4.1l.9-.9V16H8v2m12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1l-2.1-2.1l1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1l2.1 2.1Z"},null,-1),He=[Ve];function Ne(k,v){return o(),T("svg",Be,[...He])}const Se={name:"mdi-file-document-edit-outline",render:Ne},Ee={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ie=c("path",{fill:"currentColor",d:"M9 18h6q.425 0 .713-.288T16 17q0-.425-.288-.713T15 16H9q-.425 0-.713.288T8 17q0 .425.288.713T9 18Zm0-4h6q.425 0 .713-.288T16 13q0-.425-.288-.713T15 12H9q-.425 0-.713.288T8 13q0 .425.288.713T9 14Zm-3 8q-.825 0-1.413-.588T4 20V4q0-.825.588-1.413T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V20q0 .825-.588 1.413T18 22H6Zm7-14V4H6v16h12V9h-4q-.425 0-.713-.288T13 8ZM6 4v5v-5v16V4Z"},null,-1),Me=[Ie];function Ze(k,v){return o(),T("svg",Ee,[...Me])}const Pe={name:"material-symbols-description-outline-rounded",render:Ze},Ae={style:{display:"inline-block"},viewBox:"0 0 32 32",width:"1em",height:"1em"},je=c("path",{fill:"#d9b400",d:"M29.4 27.6H2.5V4.5h26.9Zm-25.9-1h24.9V5.5H3.5Z"},null,-1),Le=c("path",{fill:"#d9b400",d:"m6.077 19.316l-.555-.832l4.844-3.229l-4.887-4.071l.641-.768l5.915 4.928l-5.958 3.972zM12.7 18.2h7.8v1h-7.8zM2.5 5.5h26.9v1.9H2.5z"},null,-1),Ge=[je,Le];function Re(k,v){return o(),T("svg",Ae,[...Ge])}const De={name:"vscode-icons-file-type-shell",render:Re},Fe={style:{"vertical-align":"-4px",padding:"0 2px"}},nn=se({__name:"viewScript",setup(k,{expose:v}){const{message:z}=ze(),{t:r}=$e(),{getIsMobile:G}=We(),R=Ce(),l=le({title:r("page.cron.table.script"),formatTitle:"",path:"",show:!1,loading:!0,code:"",language:"",wordWrap:!0,showLineNumbers:!1}),{title:i,formatTitle:W,path:D,show:d,loading:m,code:w,language:q,wordWrap:B,showLineNumbers:$}=ae(l),F=async _=>{l.title=_.scriptPath.split("/").pop(),l.formatTitle=l.title.replace(/\.(js|py|ts|sh)$/,""),l.path=_.scriptPath,l.code="",l.language="",l.loading=!0,l.show=!0;try{await O(_.scriptPath)}finally{l.code?l.loading=!1:z.warning(r("page.cron.viewScript.noScriptMsg"))}},O=async _=>{const a=await qe({path:_}),b=_.substring(_.lastIndexOf(".")+1),x=we[b]||{};l.code=a,l.language=x.language||"plaintext"},f=async _=>{switch(_){case"goEdit":l.show=!1,R(`${Te.SCRIPT_MANAGE_PAGE}?path=${D.value}`);break;case"copyContent":te(l.code)?z.success(r("common.copyOk")):z.error(r("common.copyFail"));break;case"changeWrap":l.showLineNumbers=!l.showLineNumbers,l.wordWrap=!l.wordWrap;break}};return v({open:F}),(_,a)=>{const b=be,x=xe,V=ke,H=De,N=Pe,g=ie,S=Se,h=ce,y=re,U=oe,E=ne,I=_e,C=pe,M=ue,Z=de,J=ge,K=me,Q=he,X=fe,Y=ye,ee=ve;return e(G)?(o(),s(ee,{key:1,show:e(d),"onUpdate:show":a[7]||(a[7]=p=>j(d)?d.value=p:null),height:"100vh",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:n(()=>[t(Y,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":`padding: ${e($)?"4px 4px":"4px 8px"}; overscroll-behavior: none`,"footer-style":"padding: 16px 24px"},{header:n(()=>[t(C,null,{default:n(()=>[t(g,{color:"var(--app-primary-color)"},{default:n(()=>[e(m)?(o(),s(L,{key:0,style:{"font-size":"24"}})):e(i).endsWith(".js")?(o(),s(b,{key:1,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".py")?(o(),s(x,{key:2,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".ts")?(o(),s(V,{key:3,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".sh")?(o(),s(H,{key:4,style:{"font-size":"24px","vertical-align":"0"}})):(o(),s(N,{key:5,style:{"font-size":"24px","vertical-align":"0"}}))]),_:1}),t(X,{style:{height:"100%","max-width":"200px"}},{tooltip:n(()=>[c("span",null,u(e(i)),1)]),default:n(()=>[c("span",Fe,u(e(W)||e(i)),1)]),_:1}),!e(m)&&e(w)?(o(),s(I,{key:0},{default:n(()=>[t(y,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(h,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[4]||(a[4]=p=>f("goEdit"))},{icon:n(()=>[t(g,{size:16},{default:n(()=>[t(S,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[c("span",null,u(e(r)("page.cron.viewScript.goEditBtn")),1)]),_:1}),t(y,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(h,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[5]||(a[5]=p=>f("changeWrap"))},{icon:n(()=>[t(g,{size:16},{default:n(()=>[t(E,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[c("span",null,u(e(r)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):A("",!0)]),_:1})]),footer:n(()=>[t(C,null,{default:n(()=>[t(h,{type:"primary",focusable:!1,onClick:a[6]||(a[6]=p=>d.value=!1)},{default:n(()=>[P(u(e(r)("component.modal.close")),1)]),_:1})]),_:1})]),default:n(()=>[e(m)?(o(),s(M,{key:0,text:"",repeat:30,height:"16px"})):(o(),s(Z,{key:1,code:e(w),language:e(q),"show-line-numbers":e($),"word-wrap":e(B),style:{"font-size":"13px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"]))]),_:1},8,["body-content-style"])]),_:1},8,["show"])):(o(),s(Q,{key:0,show:e(d),"onUpdate:show":a[3]||(a[3]=p=>j(d)?d.value=p:null),preset:"dialog","auto-focus":!1,style:{width:"800px"}},{icon:n(()=>[t(g,null,{default:n(()=>[e(m)?(o(),s(L,{key:0,style:{"font-size":"24px"}})):e(i).endsWith(".js")?(o(),s(b,{key:1,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".py")?(o(),s(x,{key:2,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".ts")?(o(),s(V,{key:3,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".sh")?(o(),s(H,{key:4,style:{"font-size":"24px","vertical-align":"0"}})):(o(),s(N,{key:5,style:{"font-size":"24px","vertical-align":"0"}}))]),_:1})]),header:n(()=>[t(C,null,{default:n(()=>[P(u(e(W)||e(i))+" ",1),!e(m)&&e(w)?(o(),s(I,{key:0},{default:n(()=>[t(y,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(h,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[0]||(a[0]=p=>f("goEdit"))},{icon:n(()=>[t(g,{size:16},{default:n(()=>[t(S,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[c("span",null,u(e(r)("page.cron.viewScript.goEditBtn")),1)]),_:1}),t(y,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(h,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[1]||(a[1]=p=>f("copyContent"))},{icon:n(()=>[t(g,{size:14},{default:n(()=>[t(U,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[c("span",null,u(e(r)("common.copyBtn")),1)]),_:1}),t(y,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(h,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[2]||(a[2]=p=>f("changeWrap"))},{icon:n(()=>[t(g,{size:16},{default:n(()=>[t(E,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[c("span",null,u(e(r)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):A("",!0)]),_:1})]),default:n(()=>[e(m)?(o(),s(M,{key:0,text:"",repeat:27,height:"16px"})):(o(),s(K,{key:1,bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"height: 100%; padding: 1em 0 0 0; "},{default:n(()=>[t(J,{"x-scrollable":"",style:{"max-height":"680px",height:"100%"}},{default:n(()=>[t(Z,{code:e(w),language:e(q),"show-line-numbers":e($),"word-wrap":e(B),style:{"font-size":"14px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"])]),_:1})]),_:1}))]),_:1},8,["show"]))}}});export{nn as _};
