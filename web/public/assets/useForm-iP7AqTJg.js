var Ge=Object.defineProperty,Le=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var be=(e,s,o)=>s in e?Ge(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,S=(e,s)=>{for(var o in s||(s={}))_e.call(s,o)&&be(e,o,s[o]);if(ne)for(var o of ne(s))ye.call(s,o)&&be(e,o,s[o]);return e},Ne=(e,s)=>Le(e,Ue(s));var ke=(e,s)=>{var o={};for(var d in e)_e.call(e,d)&&s.indexOf(d)<0&&(o[d]=e[d]);if(e!=null&&ne)for(var d of ne(e))s.indexOf(d)<0&&ye.call(e,d)&&(o[d]=e[d]);return o};var I=(e,s,o)=>new Promise((d,P)=>{var V=i=>{try{g(o.next(i))}catch(k){P(k)}},a=i=>{try{g(o.throw(i))}catch(k){P(k)}},g=i=>i.done?d(i.value):Promise.resolve(i.value).then(V,a);g((o=o.apply(e,s)).next())});import{a6 as p,aI as z,as as Ce,u as c,ck as ze,cl as Ee,cm as qe,cn as Je,co as Fe,s as Z,b2 as We,cj as He,bn as Be,cp as Ye,aP as Ke,cq as Xe,b3 as Ze,b4 as Qe,cr as xe,cs as et,ct as tt,cu as nt,aO as ot,b5 as st,b6 as at,cv as rt,bF as lt,bo as it,G as ut,x as E,r as ct,b_ as dt,h as G,ah as pt,C as ie,aL as ft,a7 as y,a8 as f,ab as ve,aa as le,aY as H,aG as q,M as Pe,au as X,a9 as L,aH as O,aN as T,bv as we,cw as gt,aJ as U,aw as he,at as mt,bh as bt,aR as _t,aZ as yt,aC as Nt,a_ as kt,ca as vt,cb as Pt,cx as wt,bG as ht,bq as It,am as Ct,aB as Ft,br as Bt,bH as Rt,aW as Vt,y as Mt}from"./vendor-tP7MJkVm.js";import{_ as St}from"./question-circle-outlined-UzBURG29.js";import{h as Q,S as Dt,f as Re,U as Ie,e as Ve,a as jt,d as Ot,V as Tt,W as $t,_ as At,X as Gt,Y as Lt}from"./index-YWZYq8iG.js";import{p as v}from"./propTypes-LGH0h7_d.js";import{u as Ut}from"./useBreakpoint-bV1NAm7K.js";const zt={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Et=Ce("path",{fill:"currentColor",d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 0 0 140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"},null,-1),qt=[Et];function Jt(e,s){return p(),z("svg",zt,[...qt])}const Wt={name:"ant-design-up-outlined",render:Jt},Ht={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Yt=Ce("path",{fill:"currentColor",d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2L227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"},null,-1),Kt=[Yt];function Xt(e,s){return p(),z("svg",Ht,[...Kt])}const Zt={name:"ant-design-down-outlined",render:Xt};function Qt(e){return e?["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"请选择":"请输入":""}function xt(e,s,o=!0){switch(s){case"NDatePicker":case"NTimePicker":e.type=o?"string":"object";break;case"NUpload":case"NCheckboxGroup":case"NDateRangePicker":e.type="array";break;case"NInputNumber":e.type="number";break}}function en({emit:e,getProps:s,formModel:o,getSchema:d,formElRef:P,defaultFormModel:V,handleFormValues:a}){function g(){return I(this,null,function*(){var m;return(m=c(P))==null?void 0:m.validate()})}function i(m){return I(this,null,function*(){m&&m.preventDefault();const{submitFunc:b}=c(s);if(b&&Q(b)){yield b(o);return}if(c(P))try{return yield g(),e("submit",o),o}catch(j){return!1}})}function k(){return I(this,null,function*(){var m;yield(m=c(P))==null?void 0:m.restoreValidation()})}function M(){return I(this,null,function*(){const{resetFunc:m,submitOnReset:b}=c(s);if(m&&Q(m)&&(yield m()),!c(P))return;c(d).forEach($=>{ze(o,$.field,()=>Fe(V.value,$.field)||null)}),yield k();const j=a(o);e("reset",j),b&&(yield i())})}function F(){return c(P)?a(o):{}}function J(m){return I(this,null,function*(){const b=c(d).map(w=>Ee(w.field)?w.field[0]:w.field).filter(Boolean);Object.keys(m).forEach(w=>{const j=m[w];b.includes(w)&&(o[w]=qe(j)?Je(o[w],j):j)})})}return{handleSubmit:i,validate:g,resetFields:M,getFieldsValue:F,clearValidate:k,setFieldsValue:J}}function tn({defaultFormModel:e,getSchema:s,formModel:o}){function d(V){if(!Dt(V))return{};const a={};for(const g of Object.entries(V)){let[,i]=g;const[k]=g;!k||Re(i)&&i.length===0||Q(i)||Ie(i)||(Ve(i)&&(i=i.trim()),Z(a,k,i))}return a}function P(){const V=c(s),a={},g=i=>{i.forEach(k=>{const{defaultValue:M,childrens:F}=k;Ie(M)||(Z(a,k.field,M),Z(o,k.field,M)),F&&(F==null?void 0:F.length)>0&&g(F)})};g(V),e.value=a}return{handleFormValues:d,initDefault:P}}const nn={model:{type:Object,default:{}},disabled:v.bool.def(!1),require:v.bool.def(!1),rulesMessageJoinLabel:v.bool.def(!0),labelWidth:v.stringNumber.def(80),schemas:{type:[Array],default:()=>[]},inline:v.bool.def(!1),size:v.string.def("medium"),labelPlacement:v.string,isFull:v.bool.def(!0),showActionButtonGroup:v.bool.def(!0),showResetButton:v.bool.def(!0),resetButtonOptions:Object,showSubmitButton:v.bool.def(!0),submitButtonOptions:Object,showAdvancedButton:v.bool.def(!0),submitButtonText:v.string,resetButtonText:v.string,gridProps:Object,giProps:Object,formItemProps:Object,baseGridStyle:Object,collapsed:v.bool.def(!1),collapsedRows:v.number.def(1)},_=new Map;_.set("NInput",We);_.set("NDynamicInput",He);_.set("NInputGroup",Be);_.set("NInputGroupLabel",Ye);_.set("NInputNumber",Ke);_.set("NAutoComplete",Xe);_.set("NSelect",Ze);_.set("NSwitch",Qe);_.set("NCascader",xe);_.set("NSlider",et);_.set("NRate",tt);_.set("NTransfer",nt);_.set("NTreeSelect",ot);_.set("NDatePicker",st);_.set("NTimePicker",at);_.set("NColorPicker",rt);_.set("NUpload",lt);_.set("NDivider",it);const on=ut({name:"BasicForm",props:S({},nn),emits:["reset","submit","register"],setup(e,{emit:s,attrs:o}){const{t:d}=jt(),{smaller:P,sizeEnum:V}=Ut(),a=E({}),g=ct({}),i=E({}),k=E(null),M=E(null),F=E(!1),J=E(!1),m=dt(()=>P(V.MD).value?"top":"left"),b=G(()=>{const n=Object.assign({},e,c(i)),l={rules:{}};return(n.schemas||[]).forEach(N=>{const D=Te(N);Z(l.rules,N.field,D)}),S(S({},n),c(l))}),w=G(()=>{const{schemas:n}=c(b);return{schemas:n,model:c(g)}});function j(n){if(Re(n))return n.join(".");if(Ve(n))return n}function $(n){const{rulesMessageJoinLabel:l,label:u,component:N}=n,{rulesMessageJoinLabel:D}=e,B=Reflect.has(n,"rulesMessageJoinLabel")?l:D;return`${Qt(N)}${B&&u!=null?u:""}`}function Y(n){const{component:l}=n;let u;switch(l){case"NInputTextarea":u="NInput";break;case"NInputPassword":u="NInput";break;case"NDateRangePicker":u="NDatePicker";break;case"NDatetimeRangePicker":u="NDatePicker";break;default:u=l}return _.get(u)}function oe(n){const{component:l,componentProps:u}=n;let N={};switch(l){case null:case void 0:break;case"NInputTextarea":N={type:"textarea"};break;case"NInputPassword":N={type:"password"};break;case"NDateRangePicker":N={type:"daterange"};break;case"NDatetimeRangePicker":N={type:"datetimerange"};break}const D=u!=null?u:{};return S(S({clearable:!0,placeholder:$(n),disabled:x(n)},N),D)}function x(n){var N;const{disabled:l}=n,{disabled:u}=c(b);return Q(l)?l(w.value):(N=l!=null?l:u)!=null?N:!1}function se(n){const{show:l=!0}=n;return Q(l)?l(w.value):l}const ae=G(()=>Object.assign({size:e.size,type:"default"},i.value.resetButtonOptions)),re=G(()=>Object.assign({size:e.size,type:"primary"},i.value.submitButtonOptions)),t=G(()=>c(b).inline),r=G(()=>{const{gridProps:n}=c(b);return S({responsive:"screen",collapsed:t.value?F.value:!1,cols:1},n)});function h(n){const{giProps:l}=n,{giProps:u}=c(b);return S(S({span:1},u),l)}const A=G(()=>{const u=c(b),{labelPlacement:n}=u,l=ke(u,["labelPlacement"]);return Ne(S(S(S({},o),e),l),{labelPlacement:n!=null?n:m.value})}),W=G(()=>{const n=c(k)||c(b).schemas;for(const l of n){const{defaultValue:u,bindVal:N="value",bindUpdateVal:D="update:value"}=l;l.bindVal=N,l.bindUpdateVal=D,u&&(l.defaultValue=u)}return n}),{handleFormValues:ee,initDefault:ue}=tn({defaultFormModel:a,getSchema:W,formModel:g}),{handleSubmit:ce,validate:Me,resetFields:de,getFieldsValue:Se,clearValidate:De,setFieldsValue:pe}=en({emit:s,getProps:b,formModel:g,getSchema:W,formElRef:M,defaultFormModel:a,handleFormValues:ee});function je(){F.value=!F.value}function Oe(n){return I(this,null,function*(){i.value=$t(c(i)||{},n)})}function Te(n){const{rules:l=[],show:u,required:N,component:D}=n;let B=pt(l);const fe=["blur","input"],ge=$(n);function Ae(C,R){const te=C.message||ge;return R===void 0||Tt(R)||Array.isArray(R)&&R.length===0||typeof R=="string"&&R.trim()===""||typeof R=="object"&&Reflect.has(R,"checked")&&Reflect.has(R,"halfChecked")&&Array.isArray(R.checked)&&Array.isArray(R.halfChecked)&&R.checked.length===0&&R.halfChecked.length===0?Promise.reject(te):Promise.resolve()}(!B||B.length===0)&&N&&(B=[{required:N,validator:Ae,trigger:fe}]);const me=B.findIndex(C=>Reflect.has(C,"required")&&!Reflect.has(C,"validator"));if(me!==-1){const C=B[me];Ot(u)&&!u&&(C.required=!1),D&&(Reflect.has(C,"type")||xt(C,D),C.message=C.message||ge,C.trigger=fe,D.includes("NInput")&&(C.whitespace=!0))}const K=B.findIndex(C=>C.max);return K!==-1&&!B[K].validator&&(B[K].message=B[K].message||d("component.form.maxTip",[B[K].max])),B}const $e={getFieldsValue:Se,setFieldsValue:pe,resetFields:de,validate:Me,clearValidate:De,setProps:Oe,submit:ce};return ie(()=>W.value,n=>{c(J)||n!=null&&n.length&&(ue(),J.value=!0)}),ie(()=>c(b).model,n=>{n&&pe(n)},{immediate:!0}),ft(()=>{ue(),s("register",$e)}),{t:d,get:Fe,set:Z,formElRef:M,formModel:g,getGrid:r,getGridItem:h,getProps:b,getShow:se,getFormItemPath:j,getBindValue:A,getSchema:W,getSubmitBtnOptions:re,getResetBtnOptions:ae,handleSubmit:ce,resetFields:de,isInline:t,getComponentProps:oe,getComp:Y,unfoldToggle:je,componentMap:_}}});function sn(e,s,o,d,P,V){const a=bt,g=St,i=_t,k=yt,M=Nt,F=kt,J=vt,m=Pt,b=wt,w=Be,j=ht,$=It,Y=Ct,oe=Zt,x=Ft,se=Wt,ae=Bt,re=Rt;return p(),y(re,q(e.getBindValue,{ref:"formElRef",model:e.formModel,class:"mt-2"}),{default:f(()=>[L(ae,le(ve(e.getGrid)),{default:f(()=>[(p(!0),z(H,null,X(e.getSchema,t=>(p(),z(H,{key:t.field},[e.getShow(t)?(p(),y($,le(q({key:0},e.getGridItem(t))),{default:f(()=>[L(j,q({label:t.label,path:e.getFormItemPath(t.field)},t.formItemProps),mt({default:f(()=>[t.slot?Pe(e.$slots,t.slot,{key:0,model:e.formModel,field:t.field,value:e.get(e.formModel,t.field)},void 0,!0):t.component==="NCheckbox"?(p(),y(F,{key:1,value:e.formModel[t.field],"onUpdate:value":r=>e.formModel[t.field]=r},{default:f(()=>[L(M,null,{default:f(()=>{var r;return[(p(!0),z(H,null,X((r=t==null?void 0:t.componentProps)==null?void 0:r.options,h=>(p(),y(k,{key:h.value,value:h.value,label:h.label},null,8,["value","label"]))),128))]}),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):t.component==="NRadioGroup"?(p(),y(m,{key:2,value:e.formModel[t.field],"onUpdate:value":r=>e.formModel[t.field]=r},{default:f(()=>{var r;return[L(M,le(ve((r=t==null?void 0:t.componentProps)==null?void 0:r.spaceProps)),{default:f(()=>{var h;return[(p(!0),z(H,null,X((h=t==null?void 0:t.componentProps)==null?void 0:h.options,A=>(p(),y(J,{key:A.value,value:A.value},{default:f(()=>[T(O(A.label),1)]),_:2},1032,["value"]))),128))]}),_:2},1040)]}),_:2},1032,["value","onUpdate:value"])):t.component==="NRadioButtonGroup"?(p(),y(m,{key:3,value:e.formModel[t.field],"onUpdate:value":r=>e.formModel[t.field]=r},{default:f(()=>{var r;return[(p(!0),z(H,null,X((r=t==null?void 0:t.componentProps)==null?void 0:r.options,h=>(p(),y(b,{key:h.value,value:h.value},{default:f(()=>[T(O(h.label),1)]),_:2},1032,["value"]))),128))]}),_:2},1032,["value","onUpdate:value"])):t.component==="NInputGroup"?(p(),y(w,{key:4},{default:f(()=>[(p(!0),z(H,null,X(t.childrens,r=>{var h,A;return p(),y(we(e.getComp(r)),q({key:r.filed},e.getComponentProps(r),{value:e.get(e.formModel,(h=r.field)!=null?h:t.field),class:{isFull:((A=r.isFull)!=null?A:t.isFull)!=!1&&e.getProps.isFull},"onUpdate:value":W=>{var ee;return e.set(e.formModel,(ee=r.field)!=null?ee:t.field,W)}}),{default:f(()=>[T(O(r==null?void 0:r.defaultSlot),1)]),_:2},1040,["value","class","onUpdate:value"])}),128))]),_:2},1024)):(p(),y(we(e.getComp(t)),q({key:5},e.getComponentProps(t),{[t.bindVal||""]:e.get(e.formModel,t.field),class:{isFull:t.isFull!=!1&&e.getProps.isFull}},{[gt(t.bindUpdateVal)]:r=>e.set(e.formModel,t.field,r)}),null,16,["class"])),t.suffix?Pe(e.$slots,t.suffix,{key:6,model:e.formModel,field:t.field,value:e.get(e.formModel,t.field)},void 0,!0):U("",!0)]),_:2},[t.subLabel||t.labelMessage?{name:"label",fn:f(()=>[T(O(t.label)+" ",1),t.subLabel?(p(),y(a,{key:0,depth:3,class:"mr-2"},{default:f(()=>[T(O(t.subLabel),1)]),_:2},1024)):U("",!0),t.labelMessage?(p(),y(i,{key:1,trigger:"hover",style:he(t.labelMessageStyle)},{trigger:f(()=>[L(g,{class:"text-18px cursor-pointer text-$app-text-color-3"})]),default:f(()=>[T(" "+O(t.labelMessage),1)]),_:2},1032,["style"])):U("",!0)]),key:"0"}:void 0]),1040,["label","path"])]),_:2},1040)):U("",!0)],64))),128)),e.getProps.showActionButtonGroup?(p(),y($,{key:0,span:e.isInline?"":24,suffix:!!e.isInline},{default:f(({overflow:t})=>[L(M,{align:"center",justify:e.isInline?"end":"start",style:he({"margin-left":`${e.isInline?12:e.getProps.labelWidth}px`,"margin-bottom":"24px"})},{default:f(()=>[e.getProps.showSubmitButton?(p(),y(Y,q({key:0},e.getSubmitBtnOptions,{onClick:e.handleSubmit}),{default:f(()=>{var r;return[T(O((r=e.getProps.submitButtonText)!=null?r:e.t("common.queryText")),1)]}),_:1},16,["onClick"])):U("",!0),e.getProps.showResetButton?(p(),y(Y,q({key:1},e.getResetBtnOptions,{onClick:e.resetFields}),{default:f(()=>{var r;return[T(O((r=e.getProps.resetButtonText)!=null?r:e.t("common.resetText")),1)]}),_:1},16,["onClick"])):U("",!0),e.isInline&&e.getProps.showAdvancedButton?(p(),y(Y,{key:2,type:"primary",text:"","icon-placement":"right",onClick:e.unfoldToggle},{icon:f(()=>[t?(p(),y(x,{key:0,size:"14",class:"unfold-icon"},{default:f(()=>[L(oe)]),_:1})):(p(),y(x,{key:1,size:"14",class:"unfold-icon"},{default:f(()=>[L(se)]),_:1}))]),default:f(()=>[T(" "+O(t?"展开":"收起"),1)]),_:2},1032,["onClick"])):U("",!0)]),_:2},1032,["justify","style"])]),_:1},8,["span","suffix"])):U("",!0)]),_:3},16)]),_:3},16,["model"])}const pn=At(on,[["render",sn],["__scopeId","data-v-99776a72"]]);function fn(e){const s=E(null),o=E(!1);function d(){return I(this,null,function*(){const a=c(s);return a||console.error("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield Mt(),a})}function P(a){Vt(()=>{s.value=null,o.value=null}),!(c(o)&&Gt()&&a===c(s))&&(s.value=a,o.value=!0,ie(()=>e,()=>{e&&a.setProps(Lt(e))},{immediate:!0,deep:!0}))}return[P,{setProps:a=>I(this,null,function*(){yield(yield d()).setProps(a)}),resetFields:()=>I(this,null,function*(){d().then(a=>I(this,null,function*(){yield a.resetFields()}))}),clearValidate:a=>I(this,null,function*(){yield(yield d()).clearValidate(a)}),getFieldsValue:()=>{var a;return(a=c(s))==null?void 0:a.getFieldsValue()},setFieldsValue:a=>I(this,null,function*(){yield(yield d()).setFieldsValue(a)}),submit:()=>I(this,null,function*(){return(yield d()).submit()}),validate:a=>I(this,null,function*(){return(yield d()).validate(a)})}]}export{pn as _,fn as u};
