var z=(p,h,s)=>new Promise((f,l)=>{var _=c=>{try{g(s.next(c))}catch(v){l(v)}},b=c=>{try{g(s.throw(c))}catch(v){l(v)}},g=c=>c.done?f(c.value):Promise.resolve(c.value).then(_,b);g((s=s.apply(p,h)).next())});import{a7 as a,aJ as m,at as k,H as B,aY as L,a8 as y,a9 as e,aZ as V,aw as j,aI as u,aO as $,aa as i,au as A,av as R,ar as H,ce as P,bi as U,bw as X,bm as F,c_ as I,c$ as K,aT as q,d0 as J,bz as W,y as C,ai as Y,h as N,u as n,ax as Z,aE as Q,aD as D,c9 as tt,c1 as et,bo as at,aR as nt,aC as st,b$ as ot}from"./vendor--53G7TFY.js";import{u as lt}from"./useDesign-WRqooCBp.js";import"./index-BeP8DsMB.js";const ct={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},it=k("path",{fill:"currentColor",d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32M512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48M304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340z"},null,-1),rt=[it];function pt(p,h){return a(),m("svg",ct,[...rt])}const dt={name:"ant-design-bell-outlined",render:pt},S=[{key:"1",name:"通知",list:[{id:"000000001",avatar:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png",title:"你收到了 14 份新周报",datetime:"2022-08-09",type:"1"},{id:"000000002",avatar:"https://gw.alipayobjects.com/zos/rmsportal/OKJXDXrmkNshAMvwtvhu.png",title:"你推荐的 罗伯茨 已通过第三轮面试",datetime:"2022-08-08",type:"1"},{id:"000000003",avatar:"https://gw.alipayobjects.com/zos/rmsportal/kISTdvpyTAhtGxpovNWd.png",title:"这种模板可以区分多种通知类型",datetime:"2022-08-07",type:"1"},{id:"000000004",avatar:"https://gw.alipayobjects.com/zos/rmsportal/GvqBnKhFgObvnSGkDsje.png",title:"左侧图标用于区分不同的类型",datetime:"2022-08-07",type:"1"},{id:"000000005",avatar:"https://gw.alipayobjects.com/zos/rmsportal/GvqBnKhFgObvnSGkDsje.png",title:"标题可以设置自动显示省略号，本例中标题行数已设为1行，如果内容超过1行将自动截断并支持tooltip显示完整标题。",datetime:"2022-08-07",type:"1"}]},{key:"2",name:"消息",badgeType:"info",list:[{id:"000000006",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"莉蛐蛐 评论了你",description:"描述信息描述信息描述信息",datetime:"2017-08-07",type:"2"},{id:"000000007",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"范德萨 回复了你",description:"这种模板用于提醒谁与你发生了互动",datetime:"2022-08-07",type:"2"},{id:"000000008",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"标题",description:"请将鼠标移动到此处，以便测试超长的消息在此处将如何处理。本例中设置的描述最大行数为2，超过2行的描述内容将被省略并且可以通过tooltip查看完整内容",datetime:"2024-08-07",type:"2"}]},{key:"3",name:"待办",badgeType:"success",list:[{id:"000000009",avatar:"",title:"任务名称",description:"任务需要在 2017-01-12 20:00 前启动",datetime:"",extra:"未开始",color:"default",type:"3"},{id:"000000010",avatar:"",title:"第三方紧急代码变更",description:"范德萨 需在 2023-01-07 前完成代码变更任务",datetime:"",extra:"马上到期",color:"error",type:"3"},{id:"000000011",avatar:"",title:"信息安全考试",description:"指派史蒂芬斯于 2022-01-09 前完成更新并发布",datetime:"",extra:"已耗时 8 天",color:"warning",type:"3"},{id:"000000012",avatar:"",title:"ABCD 版本发布",description:"指派竹尔于 2021-01-09 前完成更新并发布后面还加了好几个文字以此增加长度",datetime:"",extra:"进行中",color:"info",type:"3"}]}],_t={key:1},ut={key:1,class:"text-$app-text-color-3"},mt={class:"text-$app-text-color-3"},gt=B({__name:"NoticeList",props:{list:{default:()=>[]},loading:{type:Boolean,default:!1},titleRows:{default:1},descRows:{default:2}},setup(p){const h=s=>{s.read=!0};return(s,f)=>{const l=P,_=U,b=X,g=F,c=I,v=K,d=q,o=J,x=W,w=L("loading");return a(),y(x,{style:{"max-height":"360px"}},{default:e(()=>[H((a(),y(o,null,{default:e(()=>[p.list.length?(a(!0),m(V,{key:0},R(p.list,t=>(a(),y(v,{key:t.id,class:"hover:bg-$app-hover-color cursor-pointer",onClick:T=>h(t)},{default:e(()=>[i(c,{class:j(["px-4",{"opacity-30":t.read}])},A({avatar:e(()=>[t.avatar?(a(),y(l,{key:0,style:{backgroundColor:"transparent"},src:t.avatar},null,8,["src"])):(a(),m("span",_t,u(t.avatar),1))]),header:e(()=>[i(b,{"line-clamp":p.titleRows,tooltip:{placement:"top"}},{tooltip:e(()=>[$(u(t.title),1)]),default:e(()=>[i(_,null,{default:e(()=>[$(u(t.title),1)]),_:2},1024)]),_:2},1032,["line-clamp"])]),description:e(()=>[t.description?(a(),y(b,{key:0,"line-clamp":p.descRows},{default:e(()=>[$(u(t.description),1)]),_:2},1032,["line-clamp"])):(a(),m("span",ut,u(t.datetime),1))]),_:2},[t.extra?{name:"header-extra",fn:e(()=>[i(g,{type:t==null?void 0:t.color,size:"small"},{default:e(()=>[$(u(t.extra),1)]),_:2},1032,["type"])]),key:"0"}:void 0,t.description?{name:"footer",fn:e(()=>[k("span",mt,u(t.datetime),1)]),key:"1"}:void 0]),1032,["class"])]),_:2},1032,["onClick"]))),128)):(a(),y(d,{key:1,class:"min-h-200px flex-jc-ac"}))]),_:1})),[[w,p.loading]])]),_:1})}}}),vt={class:"app-layout-header-anction-icon mr-1 relative"},yt={class:"mt-1px"},ht={key:0,class:"flex border-t border-$n-divider-color"},wt=B({__name:"index",setup(p){const{prefixCls:h}=lt("header-notify"),s=C(Y(S)),f=C(!1),l=C(0),_=N(()=>s.value.reduce((d,o)=>d+o.list.filter(x=>!x.read).length,0)),b=N(()=>({display:"flex",justifyContent:"center",minWidth:"6rem"})),g=N(()=>({right:`-${_.value>9?6:1}px`})),c=d=>{s.value[d].list=[]},v=d=>z(this,null,function*(){const o=s.value[d];o.list.length>99||(f.value=!0,yield tt(1e3),o.list.push(...S[d].list),f.value=!1)});return(d,o)=>{const x=dt,w=et,t=st,T=ot,G=at,M=nt;return a(),m("div",{class:j([n(h),"h-full"])},[i(M,{trigger:"click",class:"!p-0",placement:"bottom"},{trigger:e(()=>[k("span",vt,[i(x,{class:j(["text-$n-text-color",{"mt-1":n(_)>0}])},null,8,["class"]),i(w,{value:n(_),show:n(_)>0,class:"absolute top-1.5",style:Z(n(g)),max:99},null,8,["value","show","style"])])]),default:e(()=>[i(G,{value:n(l),"onUpdate:value":o[0]||(o[0]=r=>Q(l)?l.value=r:null),"tab-style":n(b),type:"line","justify-content":"space-evenly",class:"w-20rem"},{default:e(()=>[(a(!0),m(V,null,R(n(s),(r,E)=>(a(),y(T,{key:r.key,name:E},{tab:e(()=>[i(t,{size:3},{default:e(()=>[k("div",yt,u(r.name),1),i(w,{value:r.list.filter(O=>!O.read).length,type:r.badgeType,max:99,show:r.list.length!==0},null,8,["value","type","show"])]),_:2},1024)]),default:e(()=>[i(gt,{list:r.list,loading:n(f)},null,8,["list","loading"])]),_:2},1032,["name"]))),128))]),_:1},8,["value","tab-style"]),n(s)[n(l)].list.length>0?(a(),m("div",ht,[k("div",{class:"py-3 text-center cursor-pointer flex-1",onClick:o[1]||(o[1]=r=>c(n(l)))}," 清空 "),n(l)!==2?(a(),m("div",{key:0,class:"py-3 text-center cursor-pointer flex-1 border-l border-$n-divider-color",onClick:o[2]||(o[2]=r=>v(n(l)))}," 查看更多 ")):D("",!0)])):D("",!0)]),_:1})],2)}}});export{wt as default};
