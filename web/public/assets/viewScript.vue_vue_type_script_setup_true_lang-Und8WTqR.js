var W=(w,f,g)=>new Promise((c,z)=>{var q=_=>{try{i(g.next(_))}catch(b){z(b)}},l=_=>{try{i(g.throw(_))}catch(b){z(b)}},i=_=>_.done?c(_.value):Promise.resolve(_.value).then(q,l);i((g=g.apply(w,f)).next())});import{_ as ne}from"./swap-outlined-YCG3qHHs.js";import{_ as te}from"./content-copy-JmFHhe3T.js";import{a7 as o,aJ as V,at as r,H as oe,r as se,J as le,u as e,a8 as s,a9 as n,aa as t,aI as u,aD as O,aE as D,aO as ae,bO as ie,aN as ce,an as re,aS as _e,bA as pe,aC as de,c4 as ue,bj as ge,bz as me,aK as he,bG as fe,bw as ye,bE as ve,bF as we}from"./vendor-88CfsZ0h.js";import{b as be,_ as ke,d as xe,e as ze}from"./index-yq5lHf06.js";import{I as $e}from"./Icon-aws_DtUj.js";import{c as Ce,a as Te,m as We,P as qe}from"./index--j6H_bt4.js";import{u as Ne}from"./useAppInject-faVZEYvY.js";import{a as Se}from"./file-vpPRl6K6.js";const Ve={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Be=r("path",{fill:"currentColor",d:"M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1l-2.1-2.1l1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"},null,-1),Ee=[Be];function He(w,f){return o(),V("svg",Ve,[...Ee])}const Ie={name:"mdi-file-document-edit-outline",render:He},Me={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Pe=r("path",{fill:"currentColor",d:"M9 18h6q.425 0 .713-.288T16 17q0-.425-.288-.712T15 16H9q-.425 0-.712.288T8 17q0 .425.288.713T9 18m0-4h6q.425 0 .713-.288T16 13q0-.425-.288-.712T15 12H9q-.425 0-.712.288T8 13q0 .425.288.713T9 14m-3 8q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V20q0 .825-.587 1.413T18 22zm7-14V4H6v16h12V9h-4q-.425 0-.712-.288T13 8M6 4v5zv16z"},null,-1),je=[Pe];function Ae(w,f){return o(),V("svg",Me,[...je])}const Le={name:"material-symbols-description-outline-rounded",render:Ae},Fe={style:{display:"inline-block"},viewBox:"0 0 32 32",width:"1em",height:"1em"},Ge=r("path",{fill:"#d9b400",d:"M29.4 27.6H2.5V4.5h26.9Zm-25.9-1h24.9V5.5H3.5Z"},null,-1),Oe=r("path",{fill:"#d9b400",d:"m6.077 19.316l-.555-.832l4.844-3.229l-4.887-4.071l.641-.768l5.915 4.928zM12.7 18.2h7.8v1h-7.8zM2.5 5.5h26.9v1.9H2.5z"},null,-1),De=[Ge,Oe];function Re(w,f){return o(),V("svg",Fe,[...De])}const Je={name:"vscode-icons-file-type-shell",render:Re},Ue={style:{"font-family":"'SF Mono'"}},Ze={style:{"vertical-align":"-5px",padding:"0 2px"}},ln=oe({__name:"viewScript",setup(w,{expose:f}){const{message:g}=Ce(),{t:c}=Te(),{getIsMobile:z}=Ne(),q=We(),l=se({title:c("page.cron.table.script"),formatTitle:"",path:"",show:!1,loading:!0,code:"",language:"",wordWrap:!0,showLineNumbers:!1}),{title:i,formatTitle:_,path:b,show:m,loading:y,code:$,language:B,wordWrap:E,showLineNumbers:N}=le(l),R=p=>W(this,null,function*(){l.title=p.scriptPath.split("/").pop(),l.formatTitle=l.title.replace(/\.(js|py|ts|sh)$/,""),l.path=p.scriptPath,l.code="",l.language="",l.loading=!0,l.show=!0;try{yield J(p.scriptPath)}finally{l.code?l.loading=!1:g.warning(c("page.cron.viewScript.noScriptMsg"))}}),J=p=>W(this,null,function*(){const a=yield Se({path:p}),C=p.substring(p.lastIndexOf(".")+1),T=be[C]||{};l.code=a,l.language=T.language||"plaintext"}),k=p=>W(this,null,function*(){switch(p){case"goEdit":l.show=!1,q(`${qe.SCRIPT_MANAGE_PAGE}?path=${b.value}`);break;case"copyContent":ie(l.code)?g.success(c("common.copyOk")):g.error(c("common.copyFail"));break;case"changeWrap":l.showLineNumbers=!l.showLineNumbers,l.wordWrap=!l.wordWrap;break}});return f({open:R}),(p,a)=>{const C=$e,T=ke,H=xe,I=ze,M=Je,P=Le,h=ce,j=Ie,v=re,x=_e,U=te,A=ne,L=pe,S=de,F=ue,G=ge,Z=me,K=he,Q=fe,X=ye,Y=ve,ee=we;return e(z)?(o(),s(ee,{key:1,show:e(m),"onUpdate:show":a[7]||(a[7]=d=>D(m)?m.value=d:null),height:"100vh",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:n(()=>[t(Y,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":`padding: ${e(N)?"4px 4px":"4px 8px"}; overscroll-behavior: none`,"footer-style":"padding: 16px 24px"},{header:n(()=>[t(S,null,{default:n(()=>[e(y)?(o(),s(C,{key:0,icon:"svg-spinners:pulse-2",size:28,color:"var(--app-primary-color)",style:{"vertical-align":"0"}})):(o(),s(h,{key:1,size:28},{default:n(()=>[e(i).endsWith(".js")?(o(),s(T,{key:0,style:{"vertical-align":"0"}})):e(i).endsWith(".py")?(o(),s(H,{key:1,style:{"vertical-align":"0"}})):e(i).endsWith(".ts")?(o(),s(I,{key:2,style:{"vertical-align":"0"}})):e(i).endsWith(".sh")?(o(),s(M,{key:3,style:{"vertical-align":"0"}})):(o(),s(P,{key:4,style:{"vertical-align":"0"}}))]),_:1})),t(X,{style:{height:"100%","max-width":"190px"}},{tooltip:n(()=>[r("span",null,u(e(i)),1)]),default:n(()=>[r("span",Ze,u(e(_)||e(i)),1)]),_:1}),!e(y)&&e($)?(o(),s(L,{key:2},{default:n(()=>[t(x,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[4]||(a[4]=d=>k("goEdit"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(j,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.goEditBtn")),1)]),_:1}),t(x,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[5]||(a[5]=d=>k("changeWrap"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(A,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):O("",!0)]),_:1})]),footer:n(()=>[t(S,null,{default:n(()=>[t(v,{type:"primary",focusable:!1,onClick:a[6]||(a[6]=d=>m.value=!1)},{default:n(()=>[ae(u(e(c)("component.modal.close")),1)]),_:1})]),_:1})]),default:n(()=>[e(y)?(o(),s(F,{key:0,text:"",repeat:30,height:"16px"})):(o(),s(G,{key:1,code:e($),language:e(B),"show-line-numbers":e(N),"word-wrap":e(E),style:{"font-size":"13px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"]))]),_:1},8,["body-content-style"])]),_:1},8,["show"])):(o(),s(Q,{key:0,show:e(m),"onUpdate:show":a[3]||(a[3]=d=>D(m)?m.value=d:null),preset:"dialog","auto-focus":!1,style:{width:"800px"}},{icon:n(()=>[e(y)?(o(),s(C,{key:0,icon:"svg-spinners:pulse-2",size:24,style:{"vertical-align":"0"}})):(o(),s(h,{key:1,size:24},{default:n(()=>[e(i).endsWith(".js")?(o(),s(T,{key:0,style:{"vertical-align":"0"}})):e(i).endsWith(".py")?(o(),s(H,{key:1,style:{"vertical-align":"0"}})):e(i).endsWith(".ts")?(o(),s(I,{key:2,style:{"vertical-align":"0"}})):e(i).endsWith(".sh")?(o(),s(M,{key:3,style:{"vertical-align":"0"}})):(o(),s(P,{key:4,style:{"vertical-align":"0"}}))]),_:1}))]),header:n(()=>[t(S,null,{default:n(()=>[r("span",Ue,u(e(_)||e(i)),1),!e(y)&&e($)?(o(),s(L,{key:0},{default:n(()=>[t(x,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[0]||(a[0]=d=>k("goEdit"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(j,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.goEditBtn")),1)]),_:1}),t(x,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[1]||(a[1]=d=>k("copyContent"))},{icon:n(()=>[t(h,{size:14},{default:n(()=>[t(U,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("common.copyBtn")),1)]),_:1}),t(x,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[2]||(a[2]=d=>k("changeWrap"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(A,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):O("",!0)]),_:1})]),default:n(()=>[e(y)?(o(),s(F,{key:0,text:"",repeat:27,height:"16px"})):(o(),s(K,{key:1,bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"height: 100%; padding: 1em 0 0 0; "},{default:n(()=>[t(Z,{"x-scrollable":"",style:{"max-height":"680px",height:"100%"}},{default:n(()=>[t(G,{code:e($),language:e(B),"show-line-numbers":e(N),"word-wrap":e(E),style:{"font-size":"14px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"])]),_:1})]),_:1}))]),_:1},8,["show"]))}}});export{ln as _};
