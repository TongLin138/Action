import{d as j,h as a,F as Y,H as K,P as g,R as E,Q as x,aK as ee,G as te,c6 as ne,r as ae,J as O,S as G,e4 as re,j as U,V as le,aN as ie,I as oe,f as w,K as L,b$ as H,e5 as $,a7 as F,b6 as ue,N as C,Z as T}from"./index-797c0a85.js";import{_ as N}from"./Input-c8aa899c.js";import{u as se}from"./Tooltip-271e10cc.js";import{u as ce}from"./use-locale-3967e664.js";import{A as W}from"./Add-843bb42e.js";import{_ as de}from"./ButtonGroup-4b5594ea.js";import{R as me}from"./Remove-cd58428d.js";import{A as pe}from"./ArrowDown-a35ebdc5.js";const fe=j({name:"ArrowUp",render(){return a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},a("g",{fill:"none"},a("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),z=Y("n-dynamic-input"),he=j({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:n,placeholderRef:m}=K(z);return{mergedTheme:n,placeholder:m}},render(){const{mergedTheme:n,placeholder:m,value:i,clsPrefix:u,onUpdateValue:d,disabled:s}=this;return a("div",{class:`${u}-dynamic-input-preset-input`},a(N,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:i,placeholder:m,onUpdateValue:d,disabled:s}))}}),ye=j({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(n){const{mergedThemeRef:m,keyPlaceholderRef:i,valuePlaceholderRef:u}=K(z);return{mergedTheme:m,keyPlaceholder:i,valuePlaceholder:u,handleKeyInput(d){n.onUpdateValue({key:d,value:n.value.value})},handleValueInput(d){n.onUpdateValue({key:n.value.key,value:d})}}},render(){const{mergedTheme:n,keyPlaceholder:m,valuePlaceholder:i,value:u,clsPrefix:d,disabled:s}=this;return a("div",{class:`${d}-dynamic-input-preset-pair`},a(N,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:u.key,class:`${d}-dynamic-input-pair-input`,placeholder:m,onUpdateValue:this.handleKeyInput,disabled:s}),a(N,{theme:n.peers.Input,"theme-overrides":n.peerOverrides.Input,value:u.value,class:`${d}-dynamic-input-pair-input`,placeholder:i,onUpdateValue:this.handleValueInput,disabled:s}))}}),ve=g("dynamic-input",{width:"100%"},[g("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[g("dynamic-input-preset-input",{flex:1,alignItems:"center"}),g("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[g("dynamic-input-pair-input",[E("&:first-child",{"margin-right":"12px"})])]),x("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[ee("icon",{cursor:"pointer"})]),E("&:last-child",{marginBottom:0})]),g("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[g("form-item-blank",{paddingTop:"0 !important"})])]),_=new WeakMap,ge=Object.assign(Object.assign({},G.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Ae=j({name:"DynamicInput",props:ge,setup(n,{slots:m}){const{mergedComponentPropsRef:i,mergedClsPrefixRef:u,mergedRtlRef:d,inlineThemeDisabled:s}=te(),b=K(ne,null),I=ae(n.defaultValue),A=O(n,"value"),p=se(A,I),c=G("DynamicInput","-dynamic-input",ve,re,n,u),S=U(()=>{const{value:e}=p;if(Array.isArray(e)){const{max:t}=n;return t!==void 0&&e.length>=t}return!1}),B=U(()=>{const{value:e}=p;return Array.isArray(e)?e.length<=n.min:!0}),D=U(()=>{var e,t;return(t=(e=i==null?void 0:i.value)===null||e===void 0?void 0:e.DynamicInput)===null||t===void 0?void 0:t.buttonSize});function f(e){const{onInput:t,"onUpdate:value":l,onUpdateValue:r}=n;t&&T(t,e),l&&T(l,e),r&&T(r,e),I.value=e}function R(e,t){if(e==null||typeof e!="object")return t;const l=$(e)?F(e):e;let r=_.get(l);return r===void 0&&_.set(l,r=ue()),r}function k(e,t){const{value:l}=p,r=Array.from(l!=null?l:[]),y=r[e];if(r[e]=t,y&&t&&typeof y=="object"&&typeof t=="object"){const Z=$(y)?F(y):y,X=$(t)?F(t):t,q=_.get(Z);q!==void 0&&_.set(X,q)}f(r)}function h(){v(-1)}function v(e){const{value:t}=p,{onCreate:l}=n,r=Array.from(t!=null?t:[]);if(l)r.splice(e+1,0,l(e+1)),f(r);else if(m.default)r.splice(e+1,0,null),f(r);else switch(n.preset){case"input":r.splice(e+1,0,""),f(r);break;case"pair":r.splice(e+1,0,{key:"",value:""}),f(r);break}}function o(e){const{value:t}=p;if(!Array.isArray(t))return;const{min:l}=n;if(t.length<=l)return;const{onRemove:r}=n;r&&r(e);const y=Array.from(t);y.splice(e,1),f(y)}function P(e,t,l){if(t<0||l<0||t>=e.length||l>=e.length||t===l)return;const r=e[t];e[t]=e[l],e[l]=r}function J(e,t){const{value:l}=p;if(!Array.isArray(l))return;const r=Array.from(l);e==="up"&&P(r,t,t-1),e==="down"&&P(r,t,t+1),f(r)}le(z,{mergedThemeRef:c,keyPlaceholderRef:O(n,"keyPlaceholder"),valuePlaceholderRef:O(n,"valuePlaceholder"),placeholderRef:O(n,"placeholder")});const Q=ie("DynamicInput",d,u),M=U(()=>{const{self:{actionMargin:e,actionMarginRtl:t}}=c.value;return{"--action-margin":e,"--action-margin-rtl":t}}),V=s?oe("dynamic-input",void 0,M,n):void 0;return{locale:ce("DynamicInput").localeRef,rtlEnabled:Q,buttonSize:D,mergedClsPrefix:u,NFormItem:b,uncontrolledValue:I,mergedValue:p,insertionDisabled:S,removeDisabled:B,handleCreateClick:h,ensureKey:R,handleValueChange:k,remove:o,move:J,createItem:v,mergedTheme:c,cssVars:s?void 0:M,themeClass:V==null?void 0:V.themeClass,onRender:V==null?void 0:V.onRender}},render(){const{$slots:n,buttonSize:m,mergedClsPrefix:i,mergedValue:u,locale:d,mergedTheme:s,keyField:b,itemStyle:I,preset:A,showSortButton:p,NFormItem:c,ensureKey:S,handleValueChange:B,remove:D,createItem:f,move:R,onRender:k,disabled:h}=this;return k==null||k(),a("div",{class:[`${i}-dynamic-input`,this.rtlEnabled&&`${i}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(u)||u.length===0?a(w,Object.assign({block:!0,ghost:!0,dashed:!0,size:m},this.createButtonProps,{disabled:this.insertionDisabled||h,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>L(n["create-button-default"],()=>[d.create]),icon:()=>L(n["create-button-icon"],()=>[a(C,{clsPrefix:i},{default:()=>a(W,null)})])}):u.map((v,o)=>a("div",{key:b?v[b]:S(v,o),"data-key":b?v[b]:S(v,o),class:`${i}-dynamic-input-item`,style:I},H(n.default,{value:u[o],index:o},()=>[A==="input"?a(he,{disabled:h,clsPrefix:i,value:u[o],parentPath:c?c.path.value:void 0,path:c!=null&&c.path.value?`${c.path.value}[${o}]`:void 0,onUpdateValue:P=>{B(o,P)}}):A==="pair"?a(ye,{disabled:h,clsPrefix:i,value:u[o],parentPath:c?c.path.value:void 0,path:c!=null&&c.path.value?`${c.path.value}[${o}]`:void 0,onUpdateValue:P=>{B(o,P)}}):null]),H(n.action,{value:u[o],index:o,create:f,remove:D,move:R},()=>[a("div",{class:`${i}-dynamic-input-item__action`},a(de,{size:m},{default:()=>[a(w,{disabled:this.removeDisabled||h,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,circle:!0,onClick:()=>{D(o)}},{icon:()=>a(C,{clsPrefix:i},{default:()=>a(me,null)})}),a(w,{disabled:this.insertionDisabled||h,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>{f(o)}},{icon:()=>a(C,{clsPrefix:i},{default:()=>a(W,null)})}),p?a(w,{disabled:o===0||h,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>{R("up",o)}},{icon:()=>a(C,{clsPrefix:i},{default:()=>a(fe,null)})}):null,p?a(w,{disabled:o===u.length-1||h,circle:!0,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,onClick:()=>{R("down",o)}},{icon:()=>a(C,{clsPrefix:i},{default:()=>a(pe,null)})}):null]}))]))))}});export{Ae as N};
