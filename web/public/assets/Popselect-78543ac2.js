import{_ as A,p as M}from"./Tooltip-271e10cc.js";import{N as I,c as V,m as O}from"./utils-c87a7780.js";import{F as B,P as U,d as R,H as $,G as j,S as y,bH as x,j as C,A as F,J as H,I as L,h as b,Z as v,an as S,O as z,r as D,V as K,X as E,Y as N}from"./index-797c0a85.js";import{c as G,h as J}from"./Empty-aa248199.js";import{c as X}from"./create-ref-setter-f485918b.js";const k=B("n-popselect"),Y=U("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),P={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},T=z(P),Z=R({name:"PopselectPanel",props:P,setup(e){const o=$(k),{mergedClsPrefixRef:s,inlineThemeDisabled:a}=j(e),m=y("Popselect","-pop-select",Y,x,o.props,s),p=C(()=>G(e.options,V("value","children")));function h(t,d){const{onUpdateValue:r,"onUpdate:value":c,onChange:u}=e;r&&v(r,t,d),c&&v(c,t,d),u&&v(u,t,d)}function n(t){i(t.key)}function l(t){J(t,"action")||t.preventDefault()}function i(t){const{value:{getNode:d}}=p;if(e.multiple)if(Array.isArray(e.value)){const r=[],c=[];let u=!0;e.value.forEach(w=>{if(w===t){u=!1;return}const g=d(w);g&&(r.push(g.key),c.push(g.rawNode))}),u&&(r.push(t),c.push(d(t).rawNode)),h(r,c)}else{const r=d(t);r&&h([t],[r.rawNode])}else if(e.value===t&&e.cancelable)h(null,null);else{const r=d(t);r&&h(t,r.rawNode);const{"onUpdate:show":c,onUpdateShow:u}=o.props;c&&v(c,!1),u&&v(u,!1),o.setShow(!1)}S(()=>{o.syncPosition()})}F(H(e,"options"),()=>{S(()=>{o.syncPosition()})});const _=C(()=>{const{self:{menuBoxShadow:t}}=m.value;return{"--n-menu-box-shadow":t}}),f=a?L("select",void 0,_,o.props):void 0;return{mergedTheme:o.mergedThemeRef,mergedClsPrefix:s,treeMate:p,handleToggle:n,handleMenuMousedown:l,cssVars:a?void 0:_,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),b(I,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{action:()=>{var o,s;return((s=(o=this.$slots).action)===null||s===void 0?void 0:s.call(o))||[]},empty:()=>{var o,s;return((s=(o=this.$slots).empty)===null||s===void 0?void 0:s.call(o))||[]}})}}),q=Object.assign(Object.assign(Object.assign(Object.assign({},y.props),N(M,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},M.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),P),oe=R({name:"Popselect",props:q,inheritAttrs:!1,__popover__:!0,setup(e){const{mergedClsPrefixRef:o}=j(e),s=y("Popselect","-popselect",void 0,x,e,o),a=D(null);function m(){var n;(n=a.value)===null||n===void 0||n.syncPosition()}function p(n){var l;(l=a.value)===null||l===void 0||l.setShow(n)}return K(k,{props:e,mergedThemeRef:s,syncPosition:m,setShow:p}),Object.assign(Object.assign({},{syncPosition:m,setShow:p}),{popoverInstRef:a,mergedTheme:s})},render(){const{mergedTheme:e}=this,o={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(s,a,m,p,h)=>{const{$attrs:n}=this;return b(Z,Object.assign({},n,{class:[n.class,s],style:[n.style,m]},E(this.$props,T),{ref:X(a),onMouseenter:O([p,n.onMouseenter]),onMouseleave:O([h,n.onMouseleave])}),{action:()=>{var l,i;return(i=(l=this.$slots).action)===null||i===void 0?void 0:i.call(l)},empty:()=>{var l,i;return(i=(l=this.$slots).empty)===null||i===void 0?void 0:i.call(l)}})}};return b(A,Object.assign({},N(this.$props,T),o,{internalDeactivateImmediately:!0}),{trigger:()=>{var s,a;return(a=(s=this.$slots).default)===null||a===void 0?void 0:a.call(s)}})}});export{oe as _};
