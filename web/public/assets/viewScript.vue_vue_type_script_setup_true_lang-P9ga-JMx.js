var W=(w,f,g)=>new Promise((c,z)=>{var V=_=>{try{i(g.next(_))}catch(b){z(b)}},s=_=>{try{i(g.throw(_))}catch(b){z(b)}},i=_=>_.done?c(_.value):Promise.resolve(_.value).then(V,s);i((g=g.apply(w,f)).next())});import{_ as te}from"./swap-outlined-tp0eCcWN.js";import{_ as oe}from"./content-copy-zEcwTW-4.js";import{a6 as o,aI as H,as as r,G as se,r as le,I as ae,u as e,a7 as l,a8 as n,a9 as t,aN as G,aH as u,aJ as R,aD as D,bK as ie,aB as ce,am as re,aR as _e,by as pe,aC as de,bV as ue,cf as ge,bx as me,aK as he,bC as fe,bs as ye,bA as ve,bB as we}from"./vendor-tP7MJkVm.js";import{b as be,_ as xe,d as ke,e as ze}from"./index-Fh6gHIZ9.js";import{c as $e,a as Ce,k as Te,P as We}from"./index-YWZYq8iG.js";import{u as Ve}from"./useAppInject-BuU8lio7.js";import{a as qe}from"./file-myfSNQEg.js";import F from"./loading-QxtvXiBZ.js";const Be={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},He=r("path",{fill:"currentColor",d:"M8 12h8v2H8v-2m2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4v-2m-2-2h4.1l.9-.9V16H8v2m12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1l-2.1-2.1l1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1l2.1 2.1Z"},null,-1),Ne=[He];function Se(w,f){return o(),H("svg",Be,[...Ne])}const Ee={name:"mdi-file-document-edit-outline",render:Se},Ie={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Me=r("path",{fill:"currentColor",d:"M9 18h6q.425 0 .713-.288T16 17q0-.425-.288-.713T15 16H9q-.425 0-.713.288T8 17q0 .425.288.713T9 18Zm0-4h6q.425 0 .713-.288T16 13q0-.425-.288-.713T15 12H9q-.425 0-.713.288T8 13q0 .425.288.713T9 14Zm-3 8q-.825 0-1.413-.588T4 20V4q0-.825.588-1.413T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V20q0 .825-.588 1.413T18 22H6Zm7-14V4H6v16h12V9h-4q-.425 0-.713-.288T13 8ZM6 4v5v-5v16V4Z"},null,-1),Ze=[Me];function Pe(w,f){return o(),H("svg",Ie,[...Ze])}const Ae={name:"material-symbols-description-outline-rounded",render:Pe},je={style:{display:"inline-block"},viewBox:"0 0 32 32",width:"1em",height:"1em"},Le=r("path",{fill:"#d9b400",d:"M29.4 27.6H2.5V4.5h26.9Zm-25.9-1h24.9V5.5H3.5Z"},null,-1),Ge=r("path",{fill:"#d9b400",d:"m6.077 19.316l-.555-.832l4.844-3.229l-4.887-4.071l.641-.768l5.915 4.928l-5.958 3.972zM12.7 18.2h7.8v1h-7.8zM2.5 5.5h26.9v1.9H2.5z"},null,-1),Re=[Le,Ge];function De(w,f){return o(),H("svg",je,[...Re])}const Fe={name:"vscode-icons-file-type-shell",render:De},Ke={style:{"vertical-align":"-4px",padding:"0 2px"}},on=se({__name:"viewScript",setup(w,{expose:f}){const{message:g}=$e(),{t:c}=Ce(),{getIsMobile:z}=Ve(),V=Te(),s=le({title:c("page.cron.table.script"),formatTitle:"",path:"",show:!1,loading:!0,code:"",language:"",wordWrap:!0,showLineNumbers:!1}),{title:i,formatTitle:_,path:b,show:m,loading:y,code:$,language:N,wordWrap:S,showLineNumbers:q}=ae(s),K=p=>W(this,null,function*(){s.title=p.scriptPath.split("/").pop(),s.formatTitle=s.title.replace(/\.(js|py|ts|sh)$/,""),s.path=p.scriptPath,s.code="",s.language="",s.loading=!0,s.show=!0;try{yield O(p.scriptPath)}finally{s.code?s.loading=!1:g.warning(c("page.cron.viewScript.noScriptMsg"))}}),O=p=>W(this,null,function*(){const a=yield qe({path:p}),C=p.substring(p.lastIndexOf(".")+1),T=be[C]||{};s.code=a,s.language=T.language||"plaintext"}),x=p=>W(this,null,function*(){switch(p){case"goEdit":s.show=!1,V(`${We.SCRIPT_MANAGE_PAGE}?path=${b.value}`);break;case"copyContent":ie(s.code)?g.success(c("common.copyOk")):g.error(c("common.copyFail"));break;case"changeWrap":s.showLineNumbers=!s.showLineNumbers,s.wordWrap=!s.wordWrap;break}});return f({open:K}),(p,a)=>{const C=xe,T=ke,E=ze,I=Fe,M=Ae,h=ce,Z=Ee,v=re,k=_e,U=oe,P=te,A=pe,B=de,j=ue,L=ge,J=me,Q=he,X=fe,Y=ye,ee=ve,ne=we;return e(z)?(o(),l(ne,{key:1,show:e(m),"onUpdate:show":a[7]||(a[7]=d=>D(m)?m.value=d:null),height:"100vh",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:n(()=>[t(ee,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":`padding: ${e(q)?"4px 4px":"4px 8px"}; overscroll-behavior: none`,"footer-style":"padding: 16px 24px"},{header:n(()=>[t(B,null,{default:n(()=>[t(h,{color:"var(--app-primary-color)"},{default:n(()=>[e(y)?(o(),l(F,{key:0,style:{"font-size":"24"}})):e(i).endsWith(".js")?(o(),l(C,{key:1,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".py")?(o(),l(T,{key:2,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".ts")?(o(),l(E,{key:3,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".sh")?(o(),l(I,{key:4,style:{"font-size":"24px","vertical-align":"0"}})):(o(),l(M,{key:5,style:{"font-size":"24px","vertical-align":"0"}}))]),_:1}),t(Y,{style:{height:"100%","max-width":"200px"}},{tooltip:n(()=>[r("span",null,u(e(i)),1)]),default:n(()=>[r("span",Ke,u(e(_)||e(i)),1)]),_:1}),!e(y)&&e($)?(o(),l(A,{key:0},{default:n(()=>[t(k,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[4]||(a[4]=d=>x("goEdit"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(Z,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.goEditBtn")),1)]),_:1}),t(k,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[5]||(a[5]=d=>x("changeWrap"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(P,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):R("",!0)]),_:1})]),footer:n(()=>[t(B,null,{default:n(()=>[t(v,{type:"primary",focusable:!1,onClick:a[6]||(a[6]=d=>m.value=!1)},{default:n(()=>[G(u(e(c)("component.modal.close")),1)]),_:1})]),_:1})]),default:n(()=>[e(y)?(o(),l(j,{key:0,text:"",repeat:30,height:"16px"})):(o(),l(L,{key:1,code:e($),language:e(N),"show-line-numbers":e(q),"word-wrap":e(S),style:{"font-size":"13px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"]))]),_:1},8,["body-content-style"])]),_:1},8,["show"])):(o(),l(X,{key:0,show:e(m),"onUpdate:show":a[3]||(a[3]=d=>D(m)?m.value=d:null),preset:"dialog","auto-focus":!1,style:{width:"800px"}},{icon:n(()=>[t(h,null,{default:n(()=>[e(y)?(o(),l(F,{key:0,style:{"font-size":"24px"}})):e(i).endsWith(".js")?(o(),l(C,{key:1,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".py")?(o(),l(T,{key:2,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".ts")?(o(),l(E,{key:3,style:{"font-size":"24px","vertical-align":"0"}})):e(i).endsWith(".sh")?(o(),l(I,{key:4,style:{"font-size":"24px","vertical-align":"0"}})):(o(),l(M,{key:5,style:{"font-size":"24px","vertical-align":"0"}}))]),_:1})]),header:n(()=>[t(B,null,{default:n(()=>[G(u(e(_)||e(i))+" ",1),!e(y)&&e($)?(o(),l(A,{key:0},{default:n(()=>[t(k,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[0]||(a[0]=d=>x("goEdit"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(Z,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.goEditBtn")),1)]),_:1}),t(k,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[1]||(a[1]=d=>x("copyContent"))},{icon:n(()=>[t(h,{size:14},{default:n(()=>[t(U,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("common.copyBtn")),1)]),_:1}),t(k,{"show-arrow":!1,trigger:"hover"},{trigger:n(()=>[t(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:a[2]||(a[2]=d=>x("changeWrap"))},{icon:n(()=>[t(h,{size:16},{default:n(()=>[t(P,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:n(()=>[r("span",null,u(e(c)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):R("",!0)]),_:1})]),default:n(()=>[e(y)?(o(),l(j,{key:0,text:"",repeat:27,height:"16px"})):(o(),l(Q,{key:1,bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"height: 100%; padding: 1em 0 0 0; "},{default:n(()=>[t(J,{"x-scrollable":"",style:{"max-height":"680px",height:"100%"}},{default:n(()=>[t(L,{code:e($),language:e(N),"show-line-numbers":e(q),"word-wrap":e(S),style:{"font-size":"14px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"])]),_:1})]),_:1}))]),_:1},8,["show"]))}}});export{on as _};
