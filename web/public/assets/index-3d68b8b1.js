var ye=Math.pow;var z=(E,b,N)=>new Promise((x,s)=>{var ce=T=>{try{Z(N.next(T))}catch(q){s(q)}},te=T=>{try{Z(N.throw(T))}catch(q){s(q)}},Z=T=>T.done?x(T.value):Promise.resolve(T.value).then(ce,te);Z((N=N.apply(E,b)).next())});import{_ as De,o as u,c as _,p as B,v as C,w as n,a as l,d as Gt,z as Wt,b as Jt,aF as Kt,r as m,h as r,B as Qt,ab as be,e,ac as ke,t as v,i as L,D as et,q as xe,E as A,aG as we,an as en,aH as tn,f as tt,y as nn,aI as ln,n as on,aJ as an,aE as sn}from"./index-797c0a85.js";import{_ as rn}from"./PageWrapper.vue_vue_type_style_index_0_lang-f0d6bddb.js";import{_ as un,c as Q,u as ee,m as Ce,r as $e,a as nt,b as cn,d as pn,e as dn,f as fn,g as _n,h as mn}from"./create-cb04db47.js";import{_ as vn}from"./more-horiz-d6aadfdf.js";import{u as hn}from"./useTransition-5809f8e4.js";import{u as gn}from"./useAppInject-e4ee4e96.js";import{f as lt,a as ot,d as Te,b as yn,c as at}from"./delete-9a94d6a6.js";import{b as bn,f as kn,c as xn,d as wn,e as st,h as Cn,i as $n,g as Tn}from"./file-6dbc6db3.js";import{b as it,f as rt,a as Dn}from"./index-9f937feb.js";import{_ as Mn}from"./square-edit-outline-5e955a5c.js";import{N as p}from"./Icon-abc31adc.js";import{R as In,a as ut}from"./index-95695dfb.js";import{_ as zn,a as An}from"./BreadcrumbItem-a6910d65.js";import{_ as Bn}from"./Alert-c87d39d3.js";import{_ as Pn,N as Nn}from"./Upload-a0b3c563.js";import{_ as ue}from"./Ellipsis-348a6bfd.js";import{N as $}from"./Space-3cb079f3.js";import{_ as ct}from"./text-116532e9.js";import{N as qn}from"./Dropdown-03dfd01d.js";import{_ as Rn}from"./Scrollbar-cdc51570.js";import{_ as Sn}from"./ButtonGroup-4b5594ea.js";import{a as En}from"./Tooltip-271e10cc.js";import{_ as On,a as Fn}from"./Grid-5e99a5d0.js";import{_ as Un}from"./BackTop-ed1045ea.js";import{_ as Zn}from"./DataTable-53a931d0.js";import{_ as Hn}from"./Empty-aa248199.js";import{_ as Ln,a as Vn}from"./DrawerContent-784d0172.js";import{_ as jn}from"./Input-c8aa899c.js";import{N as Xn}from"./TreeSelect-10e2e39e.js";import{_ as Yn,a as Gn}from"./FormItem-e64e13b9.js";import"./monacoEditor-d72532b2.js";import"./sharp-arrow-back-ios-ca1144ee.js";import"./useDesign-a03ef768.js";import"./clock-edit-outline-f7ef4db4.js";import"./Tag-274eae2a.js";import"./Skeleton-e990348c.js";import"./use-houdini-2ac76cd5.js";import"./Table-f28f3c40.js";import"./trash-531af726.js";import"./helper-b8eb37e9.js";import"./Image-b643de14.js";import"./utils-e4b90de2.js";import"./use-locale-3967e664.js";import"./Add-843bb42e.js";import"./ChevronRight-54f6887a.js";import"./create-ref-setter-f485918b.js";import"./on-fonts-ready-2684803e.js";import"./ArrowDown-a35ebdc5.js";import"./Checkbox-007ffc49.js";import"./RadioGroup-69d2c4f1.js";import"./FocusDetector-effeeed3.js";import"./Select-8bb3e227.js";import"./utils-c87a7780.js";import"./use-resize-d169ca1a.js";import"./Selection-a7bafa19.js";import"./attribute-2ee9e579.js";import"./Forward-204e17dc.js";import"./Popselect-78543ac2.js";import"./Tree-c1a4f7b1.js";const Wn={};function Jn(E,b){const N=un;return u(),_(N,{style:{"vertical-align":"baseline"}})}const pt=De(Wn,[["render",Jn]]),Kn={},Qn={xmlns:"http://www.w3.org/2000/svg",style:{"vertical-align":"baseline",margin:"0 auto"},x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 48 48"},el=C("path",{fill:"#ffa000",d:"M40,12H22l-4-4H8c-2.2,0-4,1.8-4,4v24c0,2.2,1.8,4,4,4h29.7L44,29V16C44,13.8,42.2,12,40,12z"},null,-1),tl=C("path",{fill:"#ffca28",d:"M40,12H8c-2.2,0-4,1.8-4,4v20c0,2.2,1.8,4,4,4h32c2.2,0,4-1.8,4-4V16C44,13.8,42.2,12,40,12z"},null,-1),nl=[el,tl];function ll(E,b){return u(),B("svg",Qn,nl)}const dt=De(Kn,[["render",ll]]),ol={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},al=C("path",{fill:"currentColor",d:"M7 5h14v2H7V5m0 8v-2h14v2H7M4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2H7m-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5Z"},null,-1),sl=[al];function il(E,b){return u(),B("svg",ol,[...sl])}const rl={name:"mdi-format-list-bulleted",render:il},ul={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},cl=C("path",{fill:"currentColor",d:"M5 11q-.825 0-1.413-.588T3 9V5q0-.825.588-1.413T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.588 1.413T9 11H5Zm0 10q-.825 0-1.413-.588T3 19v-4q0-.825.588-1.413T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.588 1.413T9 21H5Zm10-10q-.825 0-1.413-.588T13 9V5q0-.825.588-1.413T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.588 1.413T19 11h-4Zm0 10q-.825 0-1.413-.588T13 19v-4q0-.825.588-1.413T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.588 1.413T19 21h-4ZM5 9h4V5H5v4Zm10 0h4V5h-4v4Zm0 10h4v-4h-4v4ZM5 19h4v-4H5v4ZM15 9Zm0 6Zm-6 0Zm0-6Z"},null,-1),pl=[cl];function dl(E,b){return u(),B("svg",ul,[...pl])}const fl={name:"material-symbols-grid-view-outline-rounded",render:dl},_l={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},ml=C("path",{fill:"currentColor",d:"M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8h5Z"},null,-1),vl=[ml];function hl(E,b){return u(),B("svg",_l,[...vl])}const gl={name:"mdi-home",render:hl},yl={};function bl(E,b){const N=Mn,x=p;return u(),_(x,null,{default:n(()=>[l(N,{style:{"vertical-align":"baseline"}})]),_:1})}const ft=De(yl,[["render",bl]]),kl={key:0},xl={key:1},wl={key:2},Cl={key:0,style:{height:"100%"}},$l={style:{"user-drag":"none","-webkit-user-select":"none","user-select":"none"}},Tl={style:{"line-height":"0"}},Dl={style:{"vertical-align":"-4px"}},Ml={style:{"margin-bottom":"12px"}},Ro=Gt({__name:"index",setup(E){const{message:b,confirm:N}=Wt(),{getIsMobile:x}=gn(),{t:s}=Jt(),ce=Kt(),te=m("fade-slide");hn(te);const Z=m(),T=m(!0),q=m(!1),V=m(!1),j=m(!1),X=m(!1),Y=m(!1),G=m(!1),pe=m(!0),de=m(!1),H=m([]),S=m(""),fe=m([]),Me=m([]),R=x.value?3:7,d=m([]),ne=m([]),f=m(null),U=m(null),le=m(""),D=m({type:1,name:null,dir:null}),Ie=m(!1),ze=m(!1),_e=m(0),me=m(0),Ae=m(0),Be=m(0),Pe=m(0),_t=[{title:s("page.file.table.columnsLabel.name"),key:"name",align:"left",render(o){const t=o.name;return r($,{style:"gap: 4px"},{default:()=>[r(p,{size:16,style:"vertical-align: -0.2em"},{default:()=>r(o.type===0?dt:(it[t.substring(t.lastIndexOf(".")+1)]||{}).icon||pt)}),r(ue,{lineClamp:1,style:"max-width: 160px; user-select: none;"},{default:()=>t})]})}},{title:s("page.file.table.columnsLabel.editTime"),key:"mTime",align:"center",titleAlign:"center",width:180}],W=o=>z(this,null,function*(){switch(o){case"clickContextMenu":q.value=!1;break;case"exitContextMenu":q.value=!1,w("opreationItem");break;case"goBack":let t=d.value[d.value.length-2];if(Array.isArray(t)){const i=t.length-1;t=t[i],oe(t,i,!0)}else{const i=d.value.length-2;oe(t,i,!1)}break;case"closeDrawer":V.value=!1;break}}),mt=(o,t)=>{f.value=t,fe.value=qe(t),_e.value=o.clientX,me.value=o.clientY,o.preventDefault(),q.value=!0},Ne=o=>z(this,null,function*(){f.value=o,V.value=!0}),qe=o=>{const t={create:{label:s("file.create.button"),key:"create",icon:()=>r(p,null,{default:()=>r(Q)}),props:{onClick:()=>{ae()}}},edit:{label:s("file.edit.button"),key:"edit",icon:()=>r(p,null,{default:()=>r(ft)}),props:{onClick:()=>{Ee()}}},upload:{label:s("file.upload.button"),key:"upload",icon:()=>r(p,null,{default:()=>r(ee)}),props:{onClick:()=>{se()}}},download:{label:s("file.download.button"),key:"ndownload",icon:()=>r(p,null,{default:()=>r(o.type===0?ot:lt)}),props:{onClick:()=>{Le()}}},attribute:{label:s("file.attribute.button"),key:"attribute",icon:()=>r(p,null,{default:()=>r(nt)}),props:{onClick:()=>{Ve()}}},move:{label:s("file.move.button"),key:"move",icon:()=>r(p,null,{default:()=>r(Ce)}),props:{onClick:()=>{Oe()}}},rename:{label:s("file.rename.button"),key:"rename",icon:()=>r(p,null,{default:()=>r($e)}),props:{onClick:()=>{Ue()}}},divider:{type:"divider",key:"d1"},delete:{label:()=>r(ct,{style:{color:"var(--app-error-color)"}},{default:()=>s("file.delete.button")}),key:"delete",icon:()=>r(p,{color:"var(--app-error-color)"},{default:()=>r(Te)}),props:{onClick:()=>{He()}}}};let i=[t.download,t.attribute,t.move,t.rename,t.divider,t.delete];return o.type===0?i=[t.create,t.upload,...i]:i=[t.edit,...i],i},Re=o=>{const t=[];for(let i=0;i<o.length;i++){const c=o[i];t.push({label:c.title,key:c.path,props:{onClick:()=>{oe(c,i,!0)}}})}return t},vt=(o,t,i)=>{if(i.node)switch(i.action){case"expand":i.node.prefix=()=>r(p,null,{default:()=>r(Dn)});break;case"collapse":i.node.prefix=()=>r(p,null,{default:()=>r(rt)});break}};let ve;const ht=(o,t)=>({onContextmenu:i=>{x.value||(f.value=o,fe.value=qe(o),i.preventDefault(),q.value=!1,en().then(()=>{q.value=!0,_e.value=i.clientX,me.value=i.clientY}))},ondblclick:()=>{x.value||J(o)},onclick:()=>{x.value&&J(o)},ontouchstart:i=>{x.value&&(Ae.value=Date.now(),Be.value=i.touches[0].clientX,Pe.value=i.touches[0].clientY,ve=setTimeout(()=>{Ne(o)},300))},ontouchmove:()=>{x.value&&clearTimeout(ve)},ontouchend:i=>{if(!x.value)return;clearTimeout(ve);const c=Date.now(),M=i.changedTouches[0].clientX,g=i.changedTouches[0].clientY,h=c-Ae.value,y=Math.sqrt(ye(M-Be.value,2)+ye(g-Pe.value,2));h<300&&y<10&&J(o)}}),gt=(o,t,i)=>{switch(i.action){case"select":i.node&&(U.value=i.node,D.value.dir=i.node.key);break;case"delete":case"clear":case"unselect":w("treeSelect");break}},oe=(o,t,i)=>{if(O(o.path),d.value.length>=3&&Array.isArray(d.value[d.value.length-2])){const c=d.value[d.value.length-2],M=d.value.length-2+(t+1-1)+1,g=[];if(M>R){for(let y=0;y<d.value.length-2;y++)g.push(d.value[y]);const h=[];if(i){for(let y=0;y<=t-1;y++)h.push(c[y]);g.push(h),g.push(c[t])}else{for(let y=0;y<c.length;y++)h.push(c[y]);g.push(h),g.push(d.value[t])}d.value=g,ne.value=Re(d.value[d.value.length-2])}else{for(let h=0;h<d.value.length-2;h++)g.push(d.value[h]);for(let h=0;h<t;h++)g.push(c[h]);g.push(c[t]),d.value=g,ne.value=[]}}else d.value=d.value.splice(0,t+1);Ie.value=!1,ze.value=!1},J=o=>{if(o.type===0){O(o.path);const t={path:o.path,title:o.name,type:o.type};d.value.length<R?d.value.push(t):(Array.isArray(d.value[R-2])?d.value[R-2].push(d.value[R-1]):d.value[R-2]=[d.value[R-2],d.value[R-1]],d.value[R-1]=t,ne.value=Re(d.value[R-2])),Ie.value=!1,ze.value=!1}else b.info(s("page.file.isFileTips"))},Se=()=>z(this,null,function*(){de.value=!0;const o=yield Tn({isDir:"true"}),t=yield yt(o);Me.value=t,de.value=!1}),O=o=>z(this,null,function*(){pe.value=!0;try{const t=yield bn({path:o});if(t.children&&t.children.length){const i=[];t.children.forEach(c=>{const M=c.name,g=M.substring(M.lastIndexOf(".")+1),h=it[g]||{},y=()=>r(c.type===0?dt:h.icon||pt),F={name:c.name,path:c.path,type:c.type,mTime:c.mTime,icon:y,isChecked:!1,isDir:c.type===0};i.push(F)}),H.value=i}else H.value=[];S.value=o}finally{pe.value=!1}}),yt=o=>z(this,null,function*(){const t=i=>{i.length&&i.forEach(c=>{c.type===0&&(Object.assign(c,{key:c.path,label:c.title,isDir:!0,prefix:()=>r(p,null,{default:()=>r(rt)})}),t(c.children),c.children.length||(Object.assign(c,{children:null}),c.prefix=()=>r(p,null,{default:()=>r(mn)})))})};return t(o),o}),w=o=>{switch(o){case"opreationItem":f.value=null;break;case"renameInput":le.value="";break;case"treeSelect":U.value=null,D.value.dir=void 0;break;case"createData":D.value={type:1,name:void 0,dir:void 0};break}},he=()=>({ghost:!1,tertiary:!0}),Ee=()=>z(this,null,function*(){ce(`${tn.SCRIPT_MANAGE_PAGE}?path=${f.value.path}`)}),bt=()=>r(p,{style:"vertical-align: 0"},{default:()=>r(Ce)}),Oe=()=>{X.value=!0,Se()},kt=()=>z(this,null,function*(){const o=f.value.path,t=f.value.name;let i=U.value?U.value.path:"";i=`${i}${o.includes("\\")?"\\":"/"}${t}`;try{yield kn({path:o,newPath:i}),b.success(s("file.move.success")),O(S.value)}catch(c){}finally{w("treeSelect"),w("opreationItem")}}),xt=()=>({disabled:!U.value}),Fe=()=>{X.value=!1,w("treeSelect")},wt=()=>r(p,{style:"vertical-align: 0"},{default:()=>r($e)}),Ue=()=>{j.value=!0},Ct=()=>z(this,null,function*(){const o=f.value.path;try{yield xn({path:o,name:le.value}),b.success(s("file.rename.success")),O(S.value)}catch(t){}finally{w("opreationItem")}}),$t=()=>({disabled:!le.value}),Ze=()=>{j.value=!1,w("opreationItem"),w("renameInput")},Tt=o=>{le.value=o},Dt=o=>!["<",">","?","*","/"].some(t=>o.includes(t)),He=()=>z(this,null,function*(){const o=f.value.path;N.error({title:s("file.delete.title"),content:s("file.delete.confirm"),icon:()=>r(p,{style:"vertical-align: 0"},{default:()=>r(Te)}),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:s("file.delete.button"),onPositiveClick:()=>z(this,null,function*(){try{yield wn({path:o}),b.success(s("file.delete.success")),O(S.value)}catch(t){}finally{w("opreationItem")}}),onNegativeClick:()=>{w("opreationItem")},negativeButtonProps:{ghost:!1,tertiary:!0}})}),Le=()=>z(this,null,function*(){const o=f.value.path,t=f.value.name,i=f.value.isDir,c=b.info(s("file.download.wait"),{duration:0,icon:()=>r(p,null,{default:()=>r(yn)})});try{if(i){const{code:M,message:g,blob:h}=yield st({path:o});c.destroy(),M?(b.success(s("file.download.success")),h&&at(h,`${t}.zip`)):g&&b.error(g)}else{const{code:M,message:g,blob:h}=yield st({path:o});c.destroy(),M?(b.success(s("file.download.success")),h&&at(h,t)):g&&b.error(g)}}catch(M){c.destroy(),b.error(s("file.download.fail"),{keepAliveOnHover:!0})}finally{w("opreationItem")}}),Ve=()=>z(this,null,function*(){var i;const o=f.value.path,t=f.value.isDir;try{(i=Z.value)==null||i.open({path:o,isDir:t})}catch(c){}finally{w("opreationItem")}}),Mt={name:{required:!0},dir:{required:!0}},It=()=>r(p,{style:"vertical-align: 0"},{default:()=>r(Q)}),ae=()=>{Y.value=!0},zt=()=>z(this,null,function*(){D.value.dir=f.value?f.value.path:S.value;const o=D.value.type,t=D.value.name,i=D.value.dir;try{yield Cn({type:o,name:t,dir:i}),b.success(s("file.create.success")),O(S.value)}catch(c){}finally{w("createData"),w("opreationItem")}}),je=()=>{Y.value=!1,w("createData"),w("opreationItem")},At=()=>({disabled:!D.value.name}),Bt=()=>r(p,{style:"vertical-align: 0"},{default:()=>r(ee)}),se=()=>{G.value=!0,Se()},Pt=({file:o,onFinish:t,onError:i,onProgress:c})=>{const M=o.name,g=new FormData,h=f.value?f.value.path:S.value;g.append("file",o.file),$n({params:g,path:h,onUploadProgress:({progress:y})=>{c({percent:Math.ceil((y||0)*100)})}}).then(()=>{b.success(`${M} ${s("file.upload.success")}`),O(S.value),t()}).catch(y=>{b.error(y.message,{keepAliveOnHover:!0}),i()})},Nt=()=>{G.value=!1,w("createData"),w("opreationItem")};return Qt(()=>z(this,null,function*(){d.value=[{title:s("page.file.rootPathLabel"),path:"/arcadia",type:0}],yield O("/arcadia")})),(o,t)=>{const i=qn,c=sn,M=gl,g=An,h=zn,y=Rn,F=tt,ge=Sn,Xe=En,Ye=fl,Ge=rl,P=tt,K=nn,qt=vn,ie=On,We=Fn,Je=Un,Rt=Zn,St=Hn,Et=Ln,Ot=Vn,Ke=jn,re=ln,Ft=Xn,Ut=Bn,Zt=pn,Ht=Pn,Lt=Nn,Vt=dn,jt=fn,Qe=Yn,Xt=Gn,Yt=rn;return u(),_(Yt,{ref:"pageWrapper","content-full":!0},{title:n(()=>[l(e($),null,{default:n(()=>[l(y,{"x-scrollable":"",size:0},{default:n(()=>[l(h,null,{default:n(()=>[(u(!0),B(ke,null,be(e(d),(k,a)=>(u(),_(g,{key:(k==null?void 0:k.title)||"...",onClick:I=>Array.isArray(k)&&k.length>0?()=>{}:oe(k,a,!1)},{default:n(()=>[Array.isArray(k)&&k.length>0?(u(),B("div",kl,[l(i,{trigger:e(x)?"click":"hover",size:"small",options:e(ne)},{default:n(()=>[l(e(p),null,{default:n(()=>[l(e(_n))]),_:1})]),_:1},8,["trigger","options"])])):(u(),B("div",xl,[l(e($),{style:{gap:"4px"}},{default:n(()=>[a===0?(u(),_(e(p),{key:0,size:16},{default:n(()=>[e(pe)?(u(),_(c,{key:0,size:16,style:{"vertical-align":"baseline"}})):(u(),_(M,{key:1,style:{"vertical-align":"0"}}))]),_:1})):xe("",!0),e(x)&&a===2?(u(),_(e(ue),{key:1,style:{height:"100%","max-width":"80px"}},{tooltip:n(()=>[C("span",null,v(k.title),1)]),default:n(()=>[C("span",null,v(k.title),1)]),_:2},1024)):(u(),B("span",wl,v(k.title),1))]),_:2},1024)]))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),extra:n(()=>[l(et,{name:e(te),mode:"out-in",appear:""},{default:n(()=>[l(e($),null,{default:n(()=>[e(x)?(u(),_(ge,{key:1,style:{height:"28px"}},{default:n(()=>[l(Xe,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[2]||(t[2]=k=>ae())},{icon:n(()=>[l(e(Q))]),_:1})]),default:n(()=>[C("span",null,v(e(s)("file.create.button")),1)]),_:1}),l(Xe,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[3]||(t[3]=k=>se())},{icon:n(()=>[l(e(ee))]),_:1})]),default:n(()=>[C("span",null,v(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(ge,{key:0,style:{height:"28px"}},{default:n(()=>[l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[0]||(t[0]=k=>ae())},{icon:n(()=>[l(e(Q))]),default:n(()=>[C("span",null,v(e(s)("file.create.button")),1)]),_:1}),l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[1]||(t[1]=k=>se())},{icon:n(()=>[l(e(ee))]),default:n(()=>[C("span",null,v(e(s)("file.upload.button")),1)]),_:1})]),_:1})),e(x)?(u(),_(P,{key:3,tertiary:"",strong:"",size:"small",style:{padding:"6px"},onClick:t[5]||(t[5]=k=>T.value=!e(T))},{icon:n(()=>[l(e(p),{size:18},{default:n(()=>[e(T)?(u(),_(Ye,{key:0,style:{"vertical-align":"baseline"}})):(u(),_(Ge,{key:1,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})):(u(),_(e(In),{key:2,value:e(T),"onUpdate:value":t[4]||(t[4]=k=>L(T)?T.value=k:null),size:"small","default-value":!0,style:{"background-color":"var(--app-hover-color)",height:"28px"},variant:"default-filled"},{default:n(()=>[l(e(ut),{value:!0,style:{height:"100%"}},{default:n(()=>[l(e(p),{size:18},{default:n(()=>[l(Ye,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1}),l(e(ut),{value:!1,style:{height:"100%"}},{default:n(()=>[l(e(p),{size:18},{default:n(()=>[l(Ge,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1})]),_:1},8,["value"]))]),_:1})]),_:1},8,["name"])]),default:n(()=>{var k;return[l(K,{bordered:!e(x),style:{height:"100%"},"content-style":"padding: 0; height: 100%"},{default:n(()=>[l(et,{name:"fade",mode:"out-in",appear:""},{default:n(()=>[e(H).length?(u(),B("div",Cl,[e(T)?(u(),_(y,{key:0},{default:n(()=>[e(x)?(u(),_(We,{key:1,"x-gap":"4",cols:3},{default:n(()=>[(u(!0),B(ke,null,be(e(H),a=>(u(),_(ie,{key:a.name,style:{padding:"8px"}},{default:n(()=>[l(K,{bordered:!1,style:{height:"140px",width:"100%"},"content-style":"max-height: 60px; padding: 0; margin: 0 auto","footer-style":"height: 100%; padding: 0; text-align: center; width: 100%",onClick:I=>J(a)},{default:n(()=>[l(e(p),{size:50,depth:1,style:{height:"100px",width:"100%"}},{default:n(()=>[(u(),_(we(a.icon)))]),_:2},1024)]),footer:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(ue),{"line-clamp":2,style:{height:"100%","user-drag":"none","-webkit-user-select":"none","user-select":"none"}},{tooltip:n(()=>[C("span",null,v(a.name),1)]),default:n(()=>[C("span",Tl,v(a.name),1)]),_:2},1024),l(P,{round:"",secondary:"",size:"tiny",focusable:!1,onClick:an(I=>Ne(a),["stop"])},{icon:n(()=>[l(e(p),{size:22,depth:5},{default:n(()=>[l(qt,{style:{"vertical-align":"baseline"}})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(u(),_(e($),{key:0,inline:"",style:{gap:"0"}},{default:n(()=>[(u(!0),B(ke,null,be(e(H),a=>(u(),B("div",{key:a.name,bordered:!1,style:{height:"200px",width:"200px",padding:"20px"}},[l(K,{bordered:!1,class:on(a.isSelected?"file-selected":"file"),style:{height:"100%",width:"100%","border-radius":"6px"},"content-style":"padding: 0; margin: 0 auto","footer-style":"text-align: center; width: 100%",onContextmenu:I=>mt(I,a),onClick:I=>a.isSelected=!a.isSelected,onDblclick:I=>J(a)},{cover:n(()=>[l(e(p),{size:60,depth:1,style:{height:"100px",width:"100%","padding-top":"20px"}},{default:n(()=>[(u(),_(we(a.icon)))]),_:2},1024)]),footer:n(()=>[C("span",$l,v(a.name),1)]),_:2},1032,["class","onContextmenu","onClick","onDblclick"])]))),128))]),_:1})),l(Je)]),_:1})):(u(),_(y,{key:1},{default:n(()=>[l(Rt,{columns:_t,data:e(H),"row-props":ht,"paginate-single-page":!1},null,8,["data"]),l(Je)]),_:1})),e(x)?xe("",!0):(u(),_(i,{key:2,placement:"bottom-start",trigger:"manual",x:e(_e),y:e(me),options:e(fe),show:e(q),onSelect:t[6]||(t[6]=a=>W("clickContextMenu")),onClickoutside:t[7]||(t[7]=a=>W("exitContextMenu"))},null,8,["x","y","options","show"]))])):(u(),_(St,{key:1,class:"min-h-200px flex-jc-ac h-full",description:e(s)("page.file.emptyDirectory"),size:"huge"},{extra:n(()=>[l(P,{secondary:"",type:"primary",size:"large",focusable:!1,onClick:t[8]||(t[8]=a=>W("goBack"))},{default:n(()=>[A(v(e(s)("page.file.goBack")),1)]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1},8,["bordered"]),l(Ot,{show:e(V),"onUpdate:show":t[17]||(t[17]=a=>L(V)?V.value=a:null),"auto-focus":!1,height:((k=e(f))==null?void 0:k.type)===0?"370px":"330px",placement:"bottom",onOnEsc:t[18]||(t[18]=a=>W("closeDrawer")),onOnMaskClick:t[19]||(t[19]=a=>W("closeDrawer"))},{default:n(()=>[l(Et,{closable:"","header-style":"padding: 10px 18px; border-bottom: hidden; user-drag: none; -webkit-user-select: none; user-select: none;","body-content-style":"padding: 10px 18px; overscroll-behavior: none; user-drag: none; -webkit-user-select: none; user-select: none;"},{header:n(()=>[l(e($),null,{default:n(()=>[l(e(p),{size:50,depth:1},{default:n(()=>[(u(),_(we(e(f).icon)))]),_:1}),l(K,{bordered:!1,"header-style":"padding: 0","content-style":"padding: 0; font-size: 12px"},{header:n(()=>[l(e(ue),{style:{height:"100%","max-width":"240px"}},{tooltip:n(()=>{var a;return[C("span",null,v((a=e(f))==null?void 0:a.name),1)]}),default:n(()=>{var a;return[C("span",Dl,v((a=e(f))==null?void 0:a.name),1)]}),_:1})]),default:n(()=>{var a;return[A(" "+v(e(s)("page.file.editAt"))+" "+v((a=e(f))==null?void 0:a.mTime),1)]}),_:1})]),_:1})]),default:n(()=>[l(e($),{vertical:"",style:{gap:"16px 0"}},{default:n(()=>[l(We,{"x-gap":"6px ",cols:3,style:{width:"100%"}},{default:n(()=>[l(ie,null,{default:n(()=>{var a;return[((a=e(f))==null?void 0:a.type)===0?(u(),_(P,{key:0,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[9]||(t[9]=I=>se())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(p),{size:20},{default:n(()=>[l(e(ee))]),_:1}),A(" "+v(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(P,{key:1,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[10]||(t[10]=I=>Ee())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(p),{size:20},{default:n(()=>[l(e(ft))]),_:1}),A(" "+v(e(s)("file.edit.button")),1)]),_:1})]),_:1}))]}),_:1}),l(ie,null,{default:n(()=>[l(P,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[11]||(t[11]=a=>Oe())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(p),{size:20},{default:n(()=>[l(e(Ce))]),_:1}),A(" "+v(e(s)("file.move.button")),1)]),_:1})]),_:1})]),_:1}),l(ie,null,{default:n(()=>[l(P,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[12]||(t[12]=a=>Ue())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(p),{size:20},{default:n(()=>[l(e($e))]),_:1}),A(" "+v(e(s)("file.rename.button")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(ge,{vertical:"",size:"large",style:{gap:"1px 0",width:"100%"}},{default:n(()=>{var a;return[l(P,{secondary:"",block:"",strong:"",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[13]||(t[13]=I=>Le())},{icon:n(()=>[l(e(p),null,{default:n(()=>{var I;return[((I=e(f))==null?void 0:I.type)===1?(u(),_(e(lt),{key:0})):(u(),_(e(ot),{key:1}))]}),_:1})]),default:n(()=>[A(" "+v(e(s)("file.download.button")),1)]),_:1}),l(P,{secondary:"",block:"",strong:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[14]||(t[14]=I=>Ve())},{icon:n(()=>[l(e(p),null,{default:n(()=>[l(e(nt))]),_:1})]),default:n(()=>[A(" "+v(e(s)("file.attribute.button")),1)]),_:1}),((a=e(f))==null?void 0:a.type)===0?(u(),_(P,{key:0,secondary:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[15]||(t[15]=I=>ae())},{icon:n(()=>[l(e(p),null,{default:n(()=>[l(e(Q))]),_:1})]),default:n(()=>[A(" "+v(e(s)("file.create.button")),1)]),_:1})):xe("",!0),l(P,{secondary:"",block:"",strong:"",type:"error",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[16]||(t[16]=I=>He())},{icon:n(()=>[l(e(p),null,{default:n(()=>[l(e(Te))]),_:1})]),default:n(()=>[A(" "+v(e(s)("file.delete.button")),1)]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1},8,["show","height"]),l(re,{show:e(j),"onUpdate:show":t[20]||(t[20]=a=>L(j)?j.value=a:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:wt,title:e(s)("file.rename.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Ze,"positive-button-props":$t(),"negative-button-props":he(),onNegativeClick:t[21]||(t[21]=a=>Ze()),onPositiveClick:t[22]||(t[22]=a=>Ct())},{default:n(()=>[l(Ke,{clearable:"",style:{"margin-top":"5px"},"default-value":e(f)?e(f).name:null,"allow-input":Dt,onInput:Tt},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(re,{show:e(X),"onUpdate:show":t[23]||(t[23]=a=>L(X)?X.value=a:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:bt,title:e(s)("file.move.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Fe,"positive-button-props":xt(),"negative-button-props":he(),onNegativeClick:t[24]||(t[24]=a=>Fe()),onPositiveClick:t[25]||(t[25]=a=>kt())},{default:n(()=>[l(Ft,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(de),options:e(Me),"on-update:expanded-keys":vt,"on-update:value":gt},null,8,["loading","options"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(re,{show:e(G),"onUpdate:show":t[26]||(t[26]=a=>L(G)?G.value=a:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Bt,title:!e(U)&&!e(f)?e(s)("file.upload.needSelect"):e(s)("file.upload.title"),"on-close":Nt},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(Ut,{type:"info",closable:""},{default:n(()=>[A(v(e(s)("file.upload.info")),1)]),_:1}),l(Lt,{multiple:"","directory-dnd":"",disabled:!e(U)&&!e(f)&&!e(S),"custom-request":Pt},{default:n(()=>[l(Ht,null,{default:n(()=>[C("div",Ml,[l(e(p),{size:"48",depth:3},{default:n(()=>[l(Zt)]),_:1})]),l(e(ct),{style:{"font-size":"16px"}},{default:n(()=>[A(v(e(s)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["show","title"]),l(re,{show:e(Y),"onUpdate:show":t[30]||(t[30]=a=>L(Y)?Y.value=a:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:It,title:e(s)("file.create.title"),"on-close":je,"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"positive-button-props":At(),"negative-button-props":he(),onNegativeClick:t[31]||(t[31]=a=>je()),onPositiveClick:t[32]||(t[32]=a=>zt())},{default:n(()=>[l(K,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:n(()=>[l(Xt,{model:e(D),rules:Mt,"label-placement":"left",style:{"padding-top":"1em"}},{default:n(()=>[l(Qe,{label:e(s)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-top":"1em"}},{default:n(()=>[l(e($),{style:{width:"100%",height:"140px",gap:"0"},justify:"space-around"},{default:n(()=>[l(F,{strong:"",dashed:"",type:e(D).type===1?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[27]||(t[27]=a=>e(D).type=1)},{default:n(()=>[l(e($),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(p),{size:48},{default:n(()=>[l(Vt,{style:{"vertical-align":"base-line"}})]),_:1}),A(" "+v(e(s)("file.create.form.typeFile")),1)]),_:1})]),_:1},8,["type"]),l(F,{strong:"",dashed:"",type:e(D).type===0?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[28]||(t[28]=a=>e(D).type=0)},{default:n(()=>[l(e($),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(p),{size:48},{default:n(()=>[l(jt,{style:{"vertical-align":"base-line"}})]),_:1}),A(" "+v(e(s)("file.create.form.typeFolder")),1)]),_:1})]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),l(Qe,{label:e(s)("file.create.form.name"),path:"name"},{default:n(()=>[l(Ke,{value:e(D).name,"onUpdate:value":t[29]||(t[29]=a=>e(D).name=a),clearable:"",placeholder:e(s)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(cn,{ref_key:"fileAttributeModal",ref:Z},null,512)]}),_:1},512)}}});export{Ro as default};
