import{a6 as a,aH as d,as as v,G as S,aT as O,a7 as u,a8 as t,aq as E,aU as B,au as M,a9 as o,av as j,at as A,aI as p,aM as x,bW as H,bd as P,bo as U,bg as K,cK as X,cL as q,aR as F,cM as I,br as W,x as C,ah as J,h as N,u as n,aw as Y,aD as Z,aJ as z,bR as Q,cN as tt,bi as et,aP as at,aC as nt,cO as st}from"./vendor-3ca7b8d8.js";import{u as ot}from"./useDesign-7b9ba386.js";import"./index-9b42ecb3.js";const lt={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},it=v("path",{fill:"currentColor",d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"},null,-1),ct=[it];function rt(_,y){return a(),d("svg",lt,ct)}const pt={name:"ant-design-bell-outlined",render:rt},D=[{key:"1",name:"通知",list:[{id:"000000001",avatar:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png",title:"你收到了 14 份新周报",datetime:"2022-08-09",type:"1"},{id:"000000002",avatar:"https://gw.alipayobjects.com/zos/rmsportal/OKJXDXrmkNshAMvwtvhu.png",title:"你推荐的 罗伯茨 已通过第三轮面试",datetime:"2022-08-08",type:"1"},{id:"000000003",avatar:"https://gw.alipayobjects.com/zos/rmsportal/kISTdvpyTAhtGxpovNWd.png",title:"这种模板可以区分多种通知类型",datetime:"2022-08-07",type:"1"},{id:"000000004",avatar:"https://gw.alipayobjects.com/zos/rmsportal/GvqBnKhFgObvnSGkDsje.png",title:"左侧图标用于区分不同的类型",datetime:"2022-08-07",type:"1"},{id:"000000005",avatar:"https://gw.alipayobjects.com/zos/rmsportal/GvqBnKhFgObvnSGkDsje.png",title:"标题可以设置自动显示省略号，本例中标题行数已设为1行，如果内容超过1行将自动截断并支持tooltip显示完整标题。",datetime:"2022-08-07",type:"1"}]},{key:"2",name:"消息",badgeType:"info",list:[{id:"000000006",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"莉蛐蛐 评论了你",description:"描述信息描述信息描述信息",datetime:"2017-08-07",type:"2"},{id:"000000007",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"范德萨 回复了你",description:"这种模板用于提醒谁与你发生了互动",datetime:"2022-08-07",type:"2"},{id:"000000008",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"标题",description:"请将鼠标移动到此处，以便测试超长的消息在此处将如何处理。本例中设置的描述最大行数为2，超过2行的描述内容将被省略并且可以通过tooltip查看完整内容",datetime:"2024-08-07",type:"2"}]},{key:"3",name:"待办",badgeType:"success",list:[{id:"000000009",avatar:"",title:"任务名称",description:"任务需要在 2017-01-12 20:00 前启动",datetime:"",extra:"未开始",color:"default",type:"3"},{id:"000000010",avatar:"",title:"第三方紧急代码变更",description:"范德萨 需在 2023-01-07 前完成代码变更任务",datetime:"",extra:"马上到期",color:"error",type:"3"},{id:"000000011",avatar:"",title:"信息安全考试",description:"指派史蒂芬斯于 2022-01-09 前完成更新并发布",datetime:"",extra:"已耗时 8 天",color:"warning",type:"3"},{id:"000000012",avatar:"",title:"ABCD 版本发布",description:"指派竹尔于 2021-01-09 前完成更新并发布后面还加了好几个文字以此增加长度",datetime:"",extra:"进行中",color:"info",type:"3"}]}],dt={key:1},_t={key:1,class:"text-$app-text-color-3"},ut={class:"text-$app-text-color-3"},mt=S({__name:"NoticeList",props:{list:{default:()=>[]},loading:{type:Boolean,default:!1},titleRows:{default:1},descRows:{default:2}},setup(_){const y=r=>{r.read=!0};return(r,h)=>{const i=H,m=P,f=U,k=K,w=X,$=q,c=F,s=I,g=W,b=O("loading");return a(),u(g,{style:{"max-height":"360px"}},{default:t(()=>[E((a(),u(s,null,{default:t(()=>[_.list.length?(a(!0),d(B,{key:0},M(_.list,e=>(a(),u($,{key:e.id,class:"hover:bg-$app-hover-color cursor-pointer",onClick:T=>y(e)},{default:t(()=>[o(w,{class:j(["px-4",{"opacity-30":e.read}])},A({avatar:t(()=>[e.avatar?(a(),u(i,{key:0,style:{backgroundColor:"transparent"},src:e.avatar},null,8,["src"])):(a(),d("span",dt,p(e.avatar),1))]),header:t(()=>[o(f,{"line-clamp":_.titleRows,tooltip:{placement:"top"}},{tooltip:t(()=>[x(p(e.title),1)]),default:t(()=>[o(m,null,{default:t(()=>[x(p(e.title),1)]),_:2},1024)]),_:2},1032,["line-clamp"])]),description:t(()=>[e.description?(a(),u(f,{key:0,"line-clamp":_.descRows},{default:t(()=>[x(p(e.description),1)]),_:2},1032,["line-clamp"])):(a(),d("span",_t,p(e.datetime),1))]),_:2},[e.extra?{name:"header-extra",fn:t(()=>[o(k,{type:e?.color,size:"small"},{default:t(()=>[x(p(e.extra),1)]),_:2},1032,["type"])]),key:"0"}:void 0,e.description?{name:"footer",fn:t(()=>[v("span",ut,p(e.datetime),1)]),key:"1"}:void 0]),1032,["class"])]),_:2},1032,["onClick"]))),128)):(a(),u(c,{key:1,class:"min-h-200px flex-jc-ac"}))]),_:1})),[[b,_.loading]])]),_:1})}}}),gt={class:"app-layout-header-anction-icon mr-1 relative"},vt={class:"mt-1px"},yt={key:0,class:"flex border-t border-$n-divider-color"},xt=S({__name:"index",setup(_){const{prefixCls:y}=ot("header-notify"),r=C(J(D)),h=C(!1),i=C(0),m=N(()=>r.value.reduce((c,s)=>c+s.list.filter(g=>!g.read).length,0)),f=N(()=>({display:"flex",justifyContent:"center",minWidth:"6rem"})),k=N(()=>({right:`-${m.value>9?6:1}px`})),w=c=>{r.value[c].list=[]},$=async c=>{const s=r.value[c];s.list.length>99||(h.value=!0,await Q(1e3),s.list.push(...D[c].list),h.value=!1)};return(c,s)=>{const g=pt,b=tt,e=nt,T=st,R=et,V=at;return a(),d("div",{class:j([n(y),"h-full"])},[o(V,{trigger:"click",class:"!p-0",placement:"bottom"},{trigger:t(()=>[v("span",gt,[o(g,{class:j(["text-$n-text-color",{"mt-1":n(m)>0}])},null,8,["class"]),o(b,{value:n(m),show:n(m)>0,class:"absolute top-1.5",style:Y(n(k)),max:99},null,8,["value","show","style"])])]),default:t(()=>[o(R,{value:n(i),"onUpdate:value":s[0]||(s[0]=l=>Z(i)?i.value=l:null),"tab-style":n(f),type:"line","justify-content":"space-evenly",class:"w-20rem"},{default:t(()=>[(a(!0),d(B,null,M(n(r),(l,G)=>(a(),u(T,{key:l.key,name:G},{tab:t(()=>[o(e,{size:3},{default:t(()=>[v("div",vt,p(l.name),1),o(b,{value:l.list.filter(L=>!L.read).length,type:l.badgeType,max:99,show:l.list.length!==0},null,8,["value","type","show"])]),_:2},1024)]),default:t(()=>[o(mt,{list:l.list,loading:n(h)},null,8,["list","loading"])]),_:2},1032,["name"]))),128))]),_:1},8,["value","tab-style"]),n(r)[n(i)].list.length>0?(a(),d("div",yt,[v("div",{class:"py-3 text-center cursor-pointer flex-1",onClick:s[1]||(s[1]=l=>w(n(i)))}," 清空 "),n(i)!==2?(a(),d("div",{key:0,class:"py-3 text-center cursor-pointer flex-1 border-l border-$n-divider-color",onClick:s[2]||(s[2]=l=>$(n(i)))}," 查看更多 ")):z("",!0)])):z("",!0)]),_:1})],2)}}});export{xt as default};
