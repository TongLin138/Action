var ke=Math.pow;var I=(R,k,N)=>new Promise((h,s)=>{var de=T=>{try{U(N.next(T))}catch(q){s(q)}},te=T=>{try{U(N.throw(T))}catch(q){s(q)}},U=T=>T.done?h(T.value):Promise.resolve(T.value).then(de,te);U((N=N.apply(R,k)).next())});import{_ as en}from"./PageWrapper.vue_vue_type_style_index_0_lang-iCdyxX7_.js";import{_ as tn,c as Z,u as Q,m as we,r as xe,a as nt,b as nn,d as ln,e as an,f as on,g as sn}from"./create-5G5GKa2Z.js";import{d as De,c as rn,a as un,m as cn,P as dn,_ as pn}from"./index-lXlFquMP.js";import{_ as fn}from"./more-horiz-zOM0TAYL.js";import{a7 as r,a8 as _,aJ as A,at as x,a9 as n,aa as l,aN as d,H as _n,y as v,am as u,bw as ue,aC as $,aL as vn,av as Ce,u as e,aZ as $e,aI as m,aE as ee,ay as lt,aD as ce,aO as P,bx as Te,bi as at,A as mn,bd as hn,by as gn,bz as yn,an as ot,bA as bn,aS as kn,bB as wn,bC as xn,aK as Cn,bs as $n,bt as Tn,bD as zn,be as Dn,aT as Mn,bE as In,bF as An,b3 as Pn,bG as Bn,aP as Nn,bH as qn,bI as Sn,bJ as Rn,bK as Ln,bL as On,aw as En,bM as Fn,az as Un,bN as Vn}from"./vendor-88CfsZ0h.js";import{u as Hn}from"./useTransition-f93yfBB3.js";import{u as jn}from"./useAppInject-htw12zLS.js";import{f as st,a as it,d as ze,b as Gn,c as rt}from"./delete-NJHjfXUX.js";import{b as Xn,f as Yn,c as Wn,d as Jn,e as ut,h as Kn,i as Zn,g as Qn}from"./file-nlIWw8Qn.js";import{b as ct,f as dt,a as el}from"./index-2ITmi_Ad.js";import{f as tl}from"./folderEmpty-kjR0QQdH.js";import"./sharp-arrow-back-ios-T556WsKB.js";import"./useDesign-SmALCiTA.js";import"./clock-edit-outline-FBHcS8eN.js";const nl={};function ll(R,k){const N=tn;return r(),_(N,{style:{"vertical-align":"baseline"}})}const pt=De(nl,[["render",ll]]),al={},ol={xmlns:"http://www.w3.org/2000/svg",style:{"vertical-align":"baseline",margin:"0 auto"},x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 48 48"},sl=x("path",{fill:"#ffa000",d:"M40,12H22l-4-4H8c-2.2,0-4,1.8-4,4v24c0,2.2,1.8,4,4,4h29.7L44,29V16C44,13.8,42.2,12,40,12z"},null,-1),il=x("path",{fill:"#ffca28",d:"M40,12H8c-2.2,0-4,1.8-4,4v20c0,2.2,1.8,4,4,4h32c2.2,0,4-1.8,4-4V16C44,13.8,42.2,12,40,12z"},null,-1),rl=[sl,il];function ul(R,k){return r(),A("svg",ol,rl)}const ft=De(al,[["render",ul]]),cl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},dl=x("path",{fill:"currentColor",d:"M7 5h14v2H7zm0 8v-2h14v2zM4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2zm-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5"},null,-1),pl=[dl];function fl(R,k){return r(),A("svg",cl,[...pl])}const _l={name:"mdi-format-list-bulleted",render:fl},vl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},ml=x("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21zM5 9h4V5H5zm10 0h4V5h-4zm0 10h4v-4h-4zM5 19h4v-4H5zM9 9"},null,-1),hl=[ml];function gl(R,k){return r(),A("svg",vl,[...hl])}const yl={name:"material-symbols-grid-view-outline-rounded",render:gl},bl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},kl=x("path",{fill:"currentColor",d:"M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8z"},null,-1),wl=[kl];function xl(R,k){return r(),A("svg",bl,[...wl])}const Cl={name:"mdi-home",render:xl},$l={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Tl=x("path",{fill:"currentColor",d:"M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7H5V5h7V3zm12.78 1a.69.69 0 0 0-.48.2l-1.22 1.21l2.5 2.5L19.8 6.7c.26-.26.26-.7 0-.95L18.25 4.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L8 13.5V16h2.5l7.37-7.38z"},null,-1),zl=[Tl];function Dl(R,k){return r(),A("svg",$l,[...zl])}const Ml={name:"mdi-square-edit-outline",render:Dl},Il={};function Al(R,k){const N=Ml,h=d;return r(),_(h,null,{default:n(()=>[l(N,{style:{"vertical-align":"baseline"}})]),_:1})}const _t=De(Il,[["render",Al]]),Pl={key:0},Bl={key:1},Nl={key:2},ql={key:0,style:{height:"100%"}},Sl={style:{"user-drag":"none","-webkit-user-select":"none","user-select":"none"}},Rl={style:{"line-height":"0"}},Ll={style:{"vertical-align":"-4px"}},Ol={style:{"margin-bottom":"12px"}},ta=_n({__name:"index",setup(R){const{message:k,confirm:N}=rn(),{getIsMobile:h}=jn(),{t:s}=un(),de=cn(),te=v("fade-slide");Hn(te);const U=v(),T=v(!0),q=v(!1),H=v(!1),j=v(!1),G=v(!1),X=v(!1),Y=v(!1),pe=v(!0),fe=v(!1),_e=v(!0),V=v([]),L=v(""),ve=v([]),Me=v([]),S=h.value?3:7,p=v([]),ne=v([]),f=v(null),F=v(null),le=v(""),z=v({type:1,name:null,dir:null}),Ie=v(!1),Ae=v(!1),me=v(0),he=v(0),Pe=v(0),Be=v(0),Ne=v(0),vt=[{title:s("page.file.table.columnsLabel.name"),key:"name",align:"left",render(a){const t=a.name;return u($,{style:"gap: 4px"},{default:()=>[u(d,{size:16,style:"vertical-align: -0.2em"},{default:()=>u(a.type===0?ft:(ct[t.substring(t.lastIndexOf(".")+1)]||{}).icon||pt)}),u(ue,{lineClamp:1,style:"max-width: 160px; user-select: none;"},{default:()=>t})]})}},{title:s("page.file.table.columnsLabel.editTime"),key:"mTime",align:"center",titleAlign:"center",width:180}],W=a=>I(this,null,function*(){switch(a){case"clickContextMenu":q.value=!1;break;case"exitContextMenu":q.value=!1,C("opreationItem");break;case"goBack":let t=p.value[p.value.length-2];if(Array.isArray(t)){const i=t.length-1;t=t[i],ae(t,i,!0)}else{const i=p.value.length-2;ae(t,i,!1)}break;case"closeDrawer":H.value=!1;break}}),mt=(a,t)=>{f.value=t,ve.value=Se(t),me.value=a.clientX,he.value=a.clientY,a.preventDefault(),q.value=!0},qe=a=>I(this,null,function*(){f.value=a,H.value=!0}),Se=a=>{const t={create:{label:s("file.create.button"),key:"create",icon:()=>u(d,null,{default:()=>u(Z)}),props:{onClick:()=>{oe()}}},edit:{label:s("file.edit.button"),key:"edit",icon:()=>u(d,null,{default:()=>u(_t)}),props:{onClick:()=>{Oe()}}},upload:{label:s("file.upload.button"),key:"upload",icon:()=>u(d,null,{default:()=>u(Q)}),props:{onClick:()=>{se()}}},download:{label:s("file.download.button"),key:"ndownload",icon:()=>u(d,null,{default:()=>u(a.type===0?it:st)}),props:{onClick:()=>{je()}}},attribute:{label:s("file.attribute.button"),key:"attribute",icon:()=>u(d,null,{default:()=>u(nt)}),props:{onClick:()=>{Ge()}}},move:{label:s("file.move.button"),key:"move",icon:()=>u(d,null,{default:()=>u(we)}),props:{onClick:()=>{Ee()}}},rename:{label:s("file.rename.button"),key:"rename",icon:()=>u(d,null,{default:()=>u(xe)}),props:{onClick:()=>{Ue()}}},divider:{type:"divider",key:"d1"},delete:{label:()=>u(at,{style:{color:"var(--app-error-color)"}},{default:()=>s("file.delete.button")}),key:"delete",icon:()=>u(d,{color:"var(--app-error-color)"},{default:()=>u(ze)}),props:{onClick:()=>{He()}}}};let i=[t.download,t.attribute,t.move,t.rename,t.divider,t.delete];return a.type===0?i=[t.create,t.upload,...i]:i=[t.edit,...i],i},Re=a=>{const t=[];for(let i=0;i<a.length;i++){const c=a[i];t.push({label:c.title,key:c.path,props:{onClick:()=>{ae(c,i,!0)}}})}return t},ht=(a,t,i)=>{if(i.node)switch(i.action){case"expand":i.node.prefix=()=>u(d,null,{default:()=>u(el)});break;case"collapse":i.node.prefix=()=>u(d,null,{default:()=>u(dt)});break}};let ge;const gt=(a,t)=>({onContextmenu:i=>{h.value||(f.value=a,ve.value=Se(a),i.preventDefault(),q.value=!1,mn().then(()=>{q.value=!0,me.value=i.clientX,he.value=i.clientY}))},ondblclick:()=>{h.value||J(a)},onclick:()=>{h.value&&J(a)},ontouchstart:i=>{h.value&&(Pe.value=Date.now(),Be.value=i.touches[0].clientX,Ne.value=i.touches[0].clientY,ge=setTimeout(()=>{qe(a)},300))},ontouchmove:()=>{h.value&&clearTimeout(ge)},ontouchend:i=>{if(!h.value)return;clearTimeout(ge);const c=Date.now(),D=i.changedTouches[0].clientX,y=i.changedTouches[0].clientY,g=c-Pe.value,b=Math.sqrt(ke(D-Be.value,2)+ke(y-Ne.value,2));g<300&&b<10&&J(a)}}),yt=(a,t,i)=>{switch(i.action){case"select":i.node&&(F.value=i.node,z.value.dir=i.node.key);break;case"delete":case"clear":case"unselect":C("treeSelect");break}},ae=(a,t,i)=>{if(O(a.path),p.value.length>=3&&Array.isArray(p.value[p.value.length-2])){const c=p.value[p.value.length-2],D=p.value.length-2+(t+1-1)+1,y=[];if(D>S){for(let b=0;b<p.value.length-2;b++)y.push(p.value[b]);const g=[];if(i){for(let b=0;b<=t-1;b++)g.push(c[b]);y.push(g),y.push(c[t])}else{for(let b=0;b<c.length;b++)g.push(c[b]);y.push(g),y.push(p.value[t])}p.value=y,ne.value=Re(p.value[p.value.length-2])}else{for(let g=0;g<p.value.length-2;g++)y.push(p.value[g]);for(let g=0;g<t;g++)y.push(c[g]);y.push(c[t]),p.value=y,ne.value=[]}}else p.value=p.value.splice(0,t+1);Ie.value=!1,Ae.value=!1},J=a=>{if(a.type===0){O(a.path);const t={path:a.path,title:a.name,type:a.type};p.value.length<S?p.value.push(t):(Array.isArray(p.value[S-2])?p.value[S-2].push(p.value[S-1]):p.value[S-2]=[p.value[S-2],p.value[S-1]],p.value[S-1]=t,ne.value=Re(p.value[S-2])),Ie.value=!1,Ae.value=!1}else k.info(s("page.file.isFileTips"))},Le=()=>I(this,null,function*(){fe.value=!0;const a=yield Qn({isDir:"true"}),t=yield bt(a);Me.value=t,fe.value=!1}),O=a=>I(this,null,function*(){pe.value=!0;try{const t=yield Xn({path:a});if(t.children&&t.children.length){const i=[];t.children.forEach(c=>{const D=c.name,y=D.substring(D.lastIndexOf(".")+1),g=ct[y]||{},b=()=>u(c.type===0?ft:g.icon||pt),E={name:c.name,path:c.path,type:c.type,mTime:c.mTime,icon:b,isChecked:!1,isDir:c.type===0};i.push(E)}),V.value=i}else V.value=[];L.value=a}finally{pe.value=!1}}),bt=a=>I(this,null,function*(){const t=i=>{i.length&&i.forEach(c=>{c.type===0&&(Object.assign(c,{key:c.path,label:c.title,isDir:!0,prefix:()=>u(d,null,{default:()=>u(dt)})}),t(c.children),c.children.length||(Object.assign(c,{children:null}),c.prefix=()=>u(d,null,{default:()=>u(tl)})))})};return t(a),a}),kt=a=>{H.value=a},wt=()=>{f.value=null},C=a=>{switch(a){case"opreationItem":h.value?H.value=!1:f.value=null;break;case"renameInput":le.value="";break;case"treeSelect":F.value=null,z.value.dir=void 0;break;case"createData":z.value={type:1,name:void 0,dir:void 0};break}},ye=()=>({ghost:!1,tertiary:!0}),Oe=()=>I(this,null,function*(){de(`${dn.SCRIPT_MANAGE_PAGE}?path=${f.value.path}`)}),xt=()=>u(d,{style:"vertical-align: 0"},{default:()=>u(we)}),Ee=()=>{G.value=!0,Le()},Ct=()=>I(this,null,function*(){const a=f.value.path,t=f.value.name;let i=F.value?F.value.path:"";i=`${i}${a.includes("\\")?"\\":"/"}${t}`;try{yield Yn({path:a,newPath:i}),k.success(s("file.move.success")),O(L.value)}catch(c){}finally{C("treeSelect"),C("opreationItem")}}),$t=()=>({disabled:!F.value}),Fe=()=>{G.value=!1,C("treeSelect")},Tt=()=>u(d,{style:"vertical-align: 0"},{default:()=>u(xe)}),Ue=()=>{j.value=!0},zt=()=>I(this,null,function*(){const a=f.value.path;try{yield Wn({path:a,name:le.value}),k.success(s("file.rename.success")),O(L.value)}catch(t){}finally{C("opreationItem")}}),Dt=()=>({disabled:!le.value}),Ve=()=>{j.value=!1,h.value||C("opreationItem"),C("renameInput")},Mt=a=>{le.value=a},It=a=>!["<",">","?","*","/"].some(t=>a.includes(t)),He=()=>I(this,null,function*(){const a=f.value.path;N.error({title:s("file.delete.title"),content:s("file.delete.confirm"),icon:()=>u(d,{style:"vertical-align: 0"},{default:()=>u(ze)}),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:s("file.delete.button"),onPositiveClick:()=>I(this,null,function*(){try{yield Jn({path:a}),k.success(s("file.delete.success")),O(L.value)}catch(t){}finally{C("opreationItem")}}),onNegativeClick:()=>{h.value||C("opreationItem")},negativeButtonProps:{ghost:!1,tertiary:!0}})}),je=()=>I(this,null,function*(){const a=f.value.path,t=f.value.name,i=f.value.isDir,c=k.info(s("file.download.wait"),{duration:0,icon:()=>u(d,null,{default:()=>u(Gn)})});try{if(i){const{code:D,message:y,blob:g}=yield ut({path:a});c.destroy(),D?(k.success(s("file.download.success")),g&&rt(g,`${t}.zip`)):y&&k.error(y)}else{const{code:D,message:y,blob:g}=yield ut({path:a});c.destroy(),D?(k.success(s("file.download.success")),g&&rt(g,t)):y&&k.error(y)}}catch(D){c.destroy(),k.error(s("file.download.fail"),{keepAliveOnHover:!0})}finally{h.value||C("opreationItem")}}),Ge=()=>{var i;const a=f.value.path,t=f.value.isDir;try{(i=U.value)==null||i.open({path:a,isDir:t})}catch(c){}finally{h.value||C("opreationItem")}},At={name:{required:!0},dir:{required:!0}},Pt=()=>u(d,{style:"vertical-align: 0"},{default:()=>u(Z)}),oe=()=>{X.value=!0},Bt=()=>I(this,null,function*(){z.value.dir=f.value?f.value.path:L.value;const a=z.value.type,t=z.value.name,i=z.value.dir;try{yield Kn({type:a,name:t,dir:i}),k.success(s("file.create.success")),O(L.value)}catch(c){}finally{C("createData"),h.value||C("opreationItem")}}),Xe=()=>{X.value=!1,C("createData"),h.value||C("opreationItem")},Nt=()=>({disabled:!z.value.name}),qt=()=>u(d,{style:"vertical-align: 0"},{default:()=>u(Q)}),se=()=>{Y.value=!0,Le()},St=({file:a,onFinish:t,onError:i,onProgress:c})=>{const D=a.name,y=new FormData,g=f.value?f.value.path:L.value;y.append("file",a.file),Zn({params:y,path:g,onUploadProgress:({progress:b})=>{c({percent:Math.ceil((b||0)*100)})}}).then(()=>{k.success(`${D} ${s("file.upload.success")}`),O(L.value),t()}).catch(b=>{k.error(b.message,{keepAliveOnHover:!0}),i()})},Rt=()=>{Y.value=!1,h.value||C("opreationItem")};return vn(()=>I(this,null,function*(){p.value=[{title:s("page.file.rootPathLabel"),path:"/arcadia",type:0}],yield O("/arcadia"),_e.value=!1})),(a,t)=>{const i=hn,c=Un,D=Cl,y=Vn,g=gn,b=yn,E=ot,be=bn,Ye=kn,We=yl,Je=wn,Ke=_l,Lt=xn,B=ot,K=Cn,Ot=fn,ie=$n,Ze=Tn,Qe=zn,Et=Dn,Ft=Mn,Ut=pn,Vt=In,Ht=An,et=Pn,re=Bn,jt=Nn,Gt=qn,Xt=ln,Yt=Sn,Wt=Rn,Jt=an,Kt=on,tt=Ln,Zt=On,Qt=en;return r(),_(Qt,{ref:"pageWrapper","content-full":""},{title:n(()=>[l(e($),null,{default:n(()=>[l(b,{"x-scrollable":"",size:0},{default:n(()=>[l(g,null,{default:n(()=>[(r(!0),A($e,null,Ce(e(p),(w,o)=>(r(),_(y,{key:(w==null?void 0:w.title)||"...",onClick:M=>Array.isArray(w)&&w.length>0?()=>{}:ae(w,o,!1)},{default:n(()=>[Array.isArray(w)&&w.length>0?(r(),A("div",Pl,[l(i,{trigger:e(h)?"click":"hover",size:"small",options:e(ne)},{default:n(()=>[l(e(d),null,{default:n(()=>[l(e(sn))]),_:1})]),_:1},8,["trigger","options"])])):(r(),A("div",Bl,[l(e($),{style:{gap:"4px"}},{default:n(()=>[o===0?(r(),_(e(d),{key:0,size:16},{default:n(()=>[e(pe)?(r(),_(c,{key:0,size:16,style:{"vertical-align":"baseline"}})):(r(),_(D,{key:1,style:{"vertical-align":"0"}}))]),_:1})):ce("",!0),e(h)&&o===2?(r(),_(e(ue),{key:1,style:{height:"100%","max-width":"80px"}},{tooltip:n(()=>[x("span",null,m(w.title),1)]),default:n(()=>[x("span",null,m(w.title),1)]),_:2},1024)):(r(),A("span",Nl,m(w.title),1))]),_:2},1024)]))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),extra:n(()=>[l(lt,{name:e(te),mode:"out-in",appear:""},{default:n(()=>[l(e($),null,{default:n(()=>[e(h)?(r(),_(be,{key:1,style:{height:"28px"}},{default:n(()=>[l(Ye,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(E,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[2]||(t[2]=w=>oe())},{icon:n(()=>[l(e(Z))]),_:1})]),default:n(()=>[x("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(Ye,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(E,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[3]||(t[3]=w=>se())},{icon:n(()=>[l(e(Q))]),_:1})]),default:n(()=>[x("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(r(),_(be,{key:0,style:{height:"28px"}},{default:n(()=>[l(E,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[0]||(t[0]=w=>oe())},{icon:n(()=>[l(e(Z))]),default:n(()=>[x("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(E,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[1]||(t[1]=w=>se())},{icon:n(()=>[l(e(Q))]),default:n(()=>[x("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})),e(h)?(r(),_(B,{key:3,tertiary:"",strong:"",size:"small",style:{padding:"6px"},onClick:t[5]||(t[5]=w=>T.value=!e(T))},{icon:n(()=>[l(e(d),{size:18},{default:n(()=>[e(T)?(r(),_(We,{key:0,style:{"vertical-align":"baseline"}})):(r(),_(Ke,{key:1,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})):(r(),_(Lt,{key:2,value:e(T),"onUpdate:value":t[4]||(t[4]=w=>ee(T)?T.value=w:null),size:"small","default-value":!0,class:"TRadioGroup",style:{height:"28px"},variant:"default-filled"},{default:n(()=>[l(Je,{value:!0,style:{height:"100%"}},{default:n(()=>[l(e(d),{size:18},{default:n(()=>[l(We,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1}),l(Je,{value:!1,style:{height:"100%"}},{default:n(()=>[l(e(d),{size:18},{default:n(()=>[l(Ke,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1})]),_:1},8,["value"]))]),_:1})]),_:1},8,["name"])]),default:n(()=>{var w;return[l(K,{bordered:!e(h),style:{height:"100%"},"content-style":"padding: 0; height: 100%"},{default:n(()=>[e(_e)?ce("",!0):(r(),_(lt,{key:0,name:"fade",mode:"out-in",appear:""},{default:n(()=>[e(V).length?(r(),A("div",ql,[e(T)?(r(),_(b,{key:0},{default:n(()=>[e(h)?(r(),_(Ze,{key:1,"x-gap":"4",cols:3},{default:n(()=>[(r(!0),A($e,null,Ce(e(V),o=>(r(),_(ie,{key:o.name,style:{padding:"8px"}},{default:n(()=>[l(K,{bordered:!1,style:{height:"140px",width:"100%"},"content-style":"max-height: 60px; padding: 0; margin: 0 auto","footer-style":"height: 100%; padding: 0; text-align: center; width: 100%",onClick:M=>J(o)},{default:n(()=>[l(e(d),{size:50,depth:1,style:{height:"100px",width:"100%"}},{default:n(()=>[(r(),_(Te(o.icon)))]),_:2},1024)]),footer:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(ue),{"line-clamp":2,style:{height:"100%","user-drag":"none","-webkit-user-select":"none","user-select":"none"}},{tooltip:n(()=>[x("span",null,m(o.name),1)]),default:n(()=>[x("span",Rl,m(o.name),1)]),_:2},1024),l(B,{round:"",secondary:"",size:"tiny",focusable:!1,onClick:Fn(M=>qe(o),["stop"])},{icon:n(()=>[l(e(d),{size:22,depth:5},{default:n(()=>[l(Ot,{style:{"vertical-align":"baseline"}})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(r(),_(e($),{key:0,inline:"",style:{gap:"0"}},{default:n(()=>[(r(!0),A($e,null,Ce(e(V),o=>(r(),A("div",{key:o.name,bordered:!1,style:{height:"200px",width:"200px",padding:"20px"}},[l(K,{bordered:!1,class:En(o.isSelected?"file-selected":"file"),style:{height:"100%",width:"100%","border-radius":"6px"},"content-style":"padding: 0; margin: 0 auto","footer-style":"text-align: center; width: 100%",onContextmenu:M=>mt(M,o),onClick:M=>o.isSelected=!o.isSelected,onDblclick:M=>J(o)},{cover:n(()=>[l(e(d),{size:60,depth:1,style:{height:"100px",width:"100%","padding-top":"20px"}},{default:n(()=>[(r(),_(Te(o.icon)))]),_:2},1024)]),footer:n(()=>[x("span",Sl,m(o.name),1)]),_:2},1032,["class","onContextmenu","onClick","onDblclick"])]))),128))]),_:1})),l(Qe)]),_:1})):(r(),_(b,{key:1},{default:n(()=>[l(Et,{columns:vt,data:e(V),"row-props":gt,"paginate-single-page":!1},null,8,["data"]),l(Qe)]),_:1})),e(h)?ce("",!0):(r(),_(i,{key:2,placement:"bottom-start",trigger:"manual",x:e(me),y:e(he),options:e(ve),show:e(q),onSelect:t[6]||(t[6]=o=>W("clickContextMenu")),onClickoutside:t[7]||(t[7]=o=>W("exitContextMenu"))},null,8,["x","y","options","show"]))])):(r(),_(Ft,{key:1,class:"min-h-200px flex-jc-ac h-full",description:e(s)("page.file.emptyDirectory"),size:"huge"},{extra:n(()=>[l(B,{secondary:"",type:"primary",size:"large",focusable:!1,onClick:t[8]||(t[8]=o=>W("goBack"))},{default:n(()=>[P(m(e(s)("page.file.goBack")),1)]),_:1})]),_:1},8,["description"]))]),_:1})),l(Ut,{show:e(_e)},null,8,["show"])]),_:1},8,["bordered"]),l(Ht,{show:e(H),"auto-focus":!1,height:((w=e(f))==null?void 0:w.type)===0?"370px":"330px",style:{width:"96%",margin:"0 auto","border-radius":"1em 1em 0 0"},placement:"bottom","on-update:show":kt,"on-after-leave":wt,onOnEsc:t[17]||(t[17]=o=>W("closeDrawer")),onOnMaskClick:t[18]||(t[18]=o=>W("closeDrawer"))},{default:n(()=>[l(Vt,{closable:"","header-style":"padding: 10px 18px; border-bottom: hidden; user-drag: none; -webkit-user-select: none; user-select: none;","body-content-style":"padding: 10px 18px; overscroll-behavior: none; user-drag: none; -webkit-user-select: none; user-select: none;"},{header:n(()=>[l(e($),null,{default:n(()=>[l(e(d),{size:50,depth:1},{default:n(()=>{var o;return[(r(),_(Te((o=e(f))==null?void 0:o.icon)))]}),_:1}),l(K,{bordered:!1,"header-style":"padding: 0","content-style":"padding: 0; font-size: 12px"},{header:n(()=>[l(e(ue),{style:{height:"100%","max-width":"240px"}},{tooltip:n(()=>{var o;return[x("span",null,m((o=e(f))==null?void 0:o.name),1)]}),default:n(()=>{var o;return[x("span",Ll,m((o=e(f))==null?void 0:o.name),1)]}),_:1})]),default:n(()=>{var o;return[P(" "+m(e(s)("page.file.editAt"))+" "+m((o=e(f))==null?void 0:o.mTime),1)]}),_:1})]),_:1})]),default:n(()=>[l(e($),{vertical:"",style:{gap:"16px 0"}},{default:n(()=>[l(Ze,{"x-gap":"6px ",cols:3,style:{width:"100%"}},{default:n(()=>[l(ie,null,{default:n(()=>{var o;return[((o=e(f))==null?void 0:o.type)===0?(r(),_(B,{key:0,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[9]||(t[9]=M=>se())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e(Q))]),_:1}),P(" "+m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(r(),_(B,{key:1,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[10]||(t[10]=M=>Oe())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e(_t))]),_:1}),P(" "+m(e(s)("file.edit.button")),1)]),_:1})]),_:1}))]}),_:1}),l(ie,null,{default:n(()=>[l(B,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[11]||(t[11]=o=>Ee())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e(we))]),_:1}),P(" "+m(e(s)("file.move.button")),1)]),_:1})]),_:1})]),_:1}),l(ie,null,{default:n(()=>[l(B,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[12]||(t[12]=o=>Ue())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e(xe))]),_:1}),P(" "+m(e(s)("file.rename.button")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(be,{vertical:"",size:"large",style:{gap:"1px 0",width:"100%"}},{default:n(()=>{var o;return[l(B,{secondary:"",block:"",strong:"",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[13]||(t[13]=M=>je())},{icon:n(()=>[l(e(d),null,{default:n(()=>{var M;return[((M=e(f))==null?void 0:M.type)===1?(r(),_(e(st),{key:0})):(r(),_(e(it),{key:1}))]}),_:1})]),default:n(()=>[P(" "+m(e(s)("file.download.button")),1)]),_:1}),l(B,{secondary:"",block:"",strong:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[14]||(t[14]=M=>Ge())},{icon:n(()=>[l(e(d),null,{default:n(()=>[l(e(nt))]),_:1})]),default:n(()=>[P(" "+m(e(s)("file.attribute.button")),1)]),_:1}),((o=e(f))==null?void 0:o.type)===0?(r(),_(B,{key:0,secondary:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[15]||(t[15]=M=>oe())},{icon:n(()=>[l(e(d),null,{default:n(()=>[l(e(Z))]),_:1})]),default:n(()=>[P(" "+m(e(s)("file.create.button")),1)]),_:1})):ce("",!0),l(B,{secondary:"",block:"",strong:"",type:"error",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[16]||(t[16]=M=>He())},{icon:n(()=>[l(e(d),null,{default:n(()=>[l(e(ze))]),_:1})]),default:n(()=>[P(" "+m(e(s)("file.delete.button")),1)]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1},8,["show","height"]),l(re,{show:e(j),"onUpdate:show":t[19]||(t[19]=o=>ee(j)?j.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Tt,title:e(s)("file.rename.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Ve,"positive-button-props":Dt(),"negative-button-props":ye(),onNegativeClick:t[20]||(t[20]=o=>Ve()),onPositiveClick:t[21]||(t[21]=o=>zt())},{default:n(()=>[l(et,{clearable:"",style:{"margin-top":"5px"},"default-value":e(f)?e(f).name:null,"allow-input":It,onInput:Mt},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(re,{show:e(G),"onUpdate:show":t[22]||(t[22]=o=>ee(G)?G.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:xt,title:e(s)("file.move.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Fe,"positive-button-props":$t(),"negative-button-props":ye(),onNegativeClick:t[23]||(t[23]=o=>Fe()),onPositiveClick:t[24]||(t[24]=o=>Ct())},{default:n(()=>[l(jt,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(fe),options:e(Me),"on-update:expanded-keys":ht,"on-update:value":yt},null,8,["loading","options"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(re,{show:e(Y),"onUpdate:show":t[25]||(t[25]=o=>ee(Y)?Y.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:qt,title:!e(F)&&!e(f)?e(s)("file.upload.needSelect"):e(s)("file.upload.title"),"on-close":Rt},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(Gt,{type:"info",closable:""},{default:n(()=>[P(m(e(s)("file.upload.info")),1)]),_:1}),l(Wt,{multiple:"","directory-dnd":"",disabled:!e(F)&&!e(f)&&!e(L),"custom-request":St},{default:n(()=>[l(Yt,null,{default:n(()=>[x("div",Ol,[l(e(d),{size:"48",depth:3},{default:n(()=>[l(Xt)]),_:1})]),l(e(at),{style:{"font-size":"16px"}},{default:n(()=>[P(m(e(s)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["show","title"]),l(re,{show:e(X),"onUpdate:show":t[29]||(t[29]=o=>ee(X)?X.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Pt,title:e(s)("file.create.title"),"on-close":Xe,"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"positive-button-props":Nt(),"negative-button-props":ye(),onNegativeClick:t[30]||(t[30]=o=>Xe()),onPositiveClick:t[31]||(t[31]=o=>Bt())},{default:n(()=>[l(K,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:n(()=>[l(Zt,{model:e(z),rules:At,"label-placement":"left",style:{"padding-top":"1em"}},{default:n(()=>[l(tt,{label:e(s)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-top":"1em"}},{default:n(()=>[l(e($),{style:{width:"100%",height:"140px",gap:"0"},justify:"space-around"},{default:n(()=>[l(E,{strong:"",dashed:"",type:e(z).type===1?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[26]||(t[26]=o=>e(z).type=1)},{default:n(()=>[l(e($),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(d),{size:48},{default:n(()=>[l(Jt,{style:{"vertical-align":"baseline"}})]),_:1}),x("strong",null,m(e(s)("file.create.form.typeFile")),1)]),_:1})]),_:1},8,["type"]),l(E,{strong:"",dashed:"",type:e(z).type===0?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[27]||(t[27]=o=>e(z).type=0)},{default:n(()=>[l(e($),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(d),{size:48},{default:n(()=>[l(Kt,{style:{"vertical-align":"baseline"}})]),_:1}),x("strong",null,m(e(s)("file.create.form.typeFolder")),1)]),_:1})]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),l(tt,{label:e(s)("file.create.form.name"),path:"name"},{default:n(()=>[l(et,{value:e(z).name,"onUpdate:value":t[28]||(t[28]=o=>e(z).name=o),clearable:"",placeholder:e(s)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(nn,{ref_key:"fileAttributeModal",ref:U},null,512)]}),_:1},512)}}});export{ta as default};
