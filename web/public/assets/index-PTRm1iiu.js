var ye=Math.pow;var z=(O,b,N)=>new Promise((x,s)=>{var ce=T=>{try{H(N.next(T))}catch(q){s(q)}},te=T=>{try{H(N.throw(T))}catch(q){s(q)}},H=T=>T.done?x(T.value):Promise.resolve(T.value).then(ce,te);H((N=N.apply(O,b)).next())});import{a6 as u,a7 as _,aI as B,as as C,a8 as n,a9 as l,aB as d,G as Xt,x as v,al as r,bs as ue,aC as $,aL as Wt,au as be,u as e,aY as ke,aH as m,bt as Jt,aD as Z,bu as et,ax as tt,aJ as xe,aN as A,bv as we,bh as nt,y as Kt,bc as Qt,bw as en,bx as tn,am as lt,by as nn,aR as ln,aK as an,bq as on,br as sn,bz as rn,bd as un,aS as cn,bA as dn,bB as pn,b2 as fn,bC as _n,aO as vn,bD as mn,bE as hn,bF as gn,bG as yn,bH as bn,av as kn,bI as xn,ay as wn,bJ as Cn}from"./vendor-tP7MJkVm.js";import{_ as $n}from"./PageWrapper.vue_vue_type_style_index_0_lang-_BQo_egP.js";import{_ as Tn,c as Q,u as ee,m as Ce,r as $e,a as at,b as Dn,d as In,e as Mn,f as zn,g as An,h as Bn}from"./create-6PTWGlCI.js";import{_ as Pn}from"./more-horiz-2P5zgSKI.js";import{u as Nn}from"./useTransition-qMbJRxJj.js";import{_ as De,c as qn,a as Rn,k as Sn,P as On}from"./index-YWZYq8iG.js";import{u as En}from"./useAppInject-BuU8lio7.js";import{f as ot,a as st,d as Te,b as Fn,c as it}from"./delete-03v50Q-m.js";import{b as Un,f as Hn,c as Ln,d as Zn,e as rt,h as Vn,i as jn,g as Yn}from"./file-myfSNQEg.js";import{b as ut,f as ct,a as Gn}from"./index-Fh6gHIZ9.js";import{_ as Xn}from"./square-edit-outline-Ed-S12Qj.js";import"./sharp-arrow-back-ios-o7qdCfpO.js";import"./useDesign-7GyM2Hwu.js";import"./clock-edit-outline-6Z39ocn4.js";import"./trash-O6SV7yvL.js";const Wn={};function Jn(O,b){const N=Tn;return u(),_(N,{style:{"vertical-align":"baseline"}})}const dt=De(Wn,[["render",Jn]]),Kn={},Qn={xmlns:"http://www.w3.org/2000/svg",style:{"vertical-align":"baseline",margin:"0 auto"},x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 48 48"},el=C("path",{fill:"#ffa000",d:"M40,12H22l-4-4H8c-2.2,0-4,1.8-4,4v24c0,2.2,1.8,4,4,4h29.7L44,29V16C44,13.8,42.2,12,40,12z"},null,-1),tl=C("path",{fill:"#ffca28",d:"M40,12H8c-2.2,0-4,1.8-4,4v20c0,2.2,1.8,4,4,4h32c2.2,0,4-1.8,4-4V16C44,13.8,42.2,12,40,12z"},null,-1),nl=[el,tl];function ll(O,b){return u(),B("svg",Qn,nl)}const pt=De(Kn,[["render",ll]]),al={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},ol=C("path",{fill:"currentColor",d:"M7 5h14v2H7V5m0 8v-2h14v2H7M4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2H7m-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5Z"},null,-1),sl=[ol];function il(O,b){return u(),B("svg",al,[...sl])}const rl={name:"mdi-format-list-bulleted",render:il},ul={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},cl=C("path",{fill:"currentColor",d:"M5 11q-.825 0-1.413-.588T3 9V5q0-.825.588-1.413T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.588 1.413T9 11H5Zm0 10q-.825 0-1.413-.588T3 19v-4q0-.825.588-1.413T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.588 1.413T9 21H5Zm10-10q-.825 0-1.413-.588T13 9V5q0-.825.588-1.413T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.588 1.413T19 11h-4Zm0 10q-.825 0-1.413-.588T13 19v-4q0-.825.588-1.413T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.588 1.413T19 21h-4ZM5 9h4V5H5v4Zm10 0h4V5h-4v4Zm0 10h4v-4h-4v4ZM5 19h4v-4H5v4ZM15 9Zm0 6Zm-6 0Zm0-6Z"},null,-1),dl=[cl];function pl(O,b){return u(),B("svg",ul,[...dl])}const fl={name:"material-symbols-grid-view-outline-rounded",render:pl},_l={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},vl=C("path",{fill:"currentColor",d:"M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8h5Z"},null,-1),ml=[vl];function hl(O,b){return u(),B("svg",_l,[...ml])}const gl={name:"mdi-home",render:hl},yl={};function bl(O,b){const N=Xn,x=d;return u(),_(x,null,{default:n(()=>[l(N,{style:{"vertical-align":"baseline"}})]),_:1})}const ft=De(yl,[["render",bl]]),kl={key:0},xl={key:1},wl={key:2},Cl={key:0,style:{height:"100%"}},$l={style:{"user-drag":"none","-webkit-user-select":"none","user-select":"none"}},Tl={style:{"line-height":"0"}},Dl={style:{"vertical-align":"-4px"}},Il={style:{"margin-bottom":"12px"}},Vl=Xt({__name:"index",setup(O){const{message:b,confirm:N}=qn(),{getIsMobile:x}=En(),{t:s}=Rn(),ce=Sn(),te=v("fade-slide");Nn(te);const H=v(),T=v(!0),q=v(!1),V=v(!1),j=v(!1),Y=v(!1),G=v(!1),X=v(!1),de=v(!0),pe=v(!1),L=v([]),S=v(""),fe=v([]),Ie=v([]),R=x.value?3:7,p=v([]),ne=v([]),f=v(null),U=v(null),le=v(""),D=v({type:1,name:null,dir:null}),Me=v(!1),ze=v(!1),_e=v(0),ve=v(0),Ae=v(0),Be=v(0),Pe=v(0),_t=[{title:s("page.file.table.columnsLabel.name"),key:"name",align:"left",render(a){const t=a.name;return r($,{style:"gap: 4px"},{default:()=>[r(d,{size:16,style:"vertical-align: -0.2em"},{default:()=>r(a.type===0?pt:(ut[t.substring(t.lastIndexOf(".")+1)]||{}).icon||dt)}),r(ue,{lineClamp:1,style:"max-width: 160px; user-select: none;"},{default:()=>t})]})}},{title:s("page.file.table.columnsLabel.editTime"),key:"mTime",align:"center",titleAlign:"center",width:180}],W=a=>z(this,null,function*(){switch(a){case"clickContextMenu":q.value=!1;break;case"exitContextMenu":q.value=!1,w("opreationItem");break;case"goBack":let t=p.value[p.value.length-2];if(Array.isArray(t)){const i=t.length-1;t=t[i],ae(t,i,!0)}else{const i=p.value.length-2;ae(t,i,!1)}break;case"closeDrawer":V.value=!1;break}}),vt=(a,t)=>{f.value=t,fe.value=qe(t),_e.value=a.clientX,ve.value=a.clientY,a.preventDefault(),q.value=!0},Ne=a=>z(this,null,function*(){f.value=a,V.value=!0}),qe=a=>{const t={create:{label:s("file.create.button"),key:"create",icon:()=>r(d,null,{default:()=>r(Q)}),props:{onClick:()=>{oe()}}},edit:{label:s("file.edit.button"),key:"edit",icon:()=>r(d,null,{default:()=>r(ft)}),props:{onClick:()=>{Oe()}}},upload:{label:s("file.upload.button"),key:"upload",icon:()=>r(d,null,{default:()=>r(ee)}),props:{onClick:()=>{se()}}},download:{label:s("file.download.button"),key:"ndownload",icon:()=>r(d,null,{default:()=>r(a.type===0?st:ot)}),props:{onClick:()=>{Ze()}}},attribute:{label:s("file.attribute.button"),key:"attribute",icon:()=>r(d,null,{default:()=>r(at)}),props:{onClick:()=>{Ve()}}},move:{label:s("file.move.button"),key:"move",icon:()=>r(d,null,{default:()=>r(Ce)}),props:{onClick:()=>{Ee()}}},rename:{label:s("file.rename.button"),key:"rename",icon:()=>r(d,null,{default:()=>r($e)}),props:{onClick:()=>{Ue()}}},divider:{type:"divider",key:"d1"},delete:{label:()=>r(nt,{style:{color:"var(--app-error-color)"}},{default:()=>s("file.delete.button")}),key:"delete",icon:()=>r(d,{color:"var(--app-error-color)"},{default:()=>r(Te)}),props:{onClick:()=>{Le()}}}};let i=[t.download,t.attribute,t.move,t.rename,t.divider,t.delete];return a.type===0?i=[t.create,t.upload,...i]:i=[t.edit,...i],i},Re=a=>{const t=[];for(let i=0;i<a.length;i++){const c=a[i];t.push({label:c.title,key:c.path,props:{onClick:()=>{ae(c,i,!0)}}})}return t},mt=(a,t,i)=>{if(i.node)switch(i.action){case"expand":i.node.prefix=()=>r(d,null,{default:()=>r(Gn)});break;case"collapse":i.node.prefix=()=>r(d,null,{default:()=>r(ct)});break}};let me;const ht=(a,t)=>({onContextmenu:i=>{x.value||(f.value=a,fe.value=qe(a),i.preventDefault(),q.value=!1,Kt().then(()=>{q.value=!0,_e.value=i.clientX,ve.value=i.clientY}))},ondblclick:()=>{x.value||J(a)},onclick:()=>{x.value&&J(a)},ontouchstart:i=>{x.value&&(Ae.value=Date.now(),Be.value=i.touches[0].clientX,Pe.value=i.touches[0].clientY,me=setTimeout(()=>{Ne(a)},300))},ontouchmove:()=>{x.value&&clearTimeout(me)},ontouchend:i=>{if(!x.value)return;clearTimeout(me);const c=Date.now(),I=i.changedTouches[0].clientX,g=i.changedTouches[0].clientY,h=c-Ae.value,y=Math.sqrt(ye(I-Be.value,2)+ye(g-Pe.value,2));h<300&&y<10&&J(a)}}),gt=(a,t,i)=>{switch(i.action){case"select":i.node&&(U.value=i.node,D.value.dir=i.node.key);break;case"delete":case"clear":case"unselect":w("treeSelect");break}},ae=(a,t,i)=>{if(E(a.path),p.value.length>=3&&Array.isArray(p.value[p.value.length-2])){const c=p.value[p.value.length-2],I=p.value.length-2+(t+1-1)+1,g=[];if(I>R){for(let y=0;y<p.value.length-2;y++)g.push(p.value[y]);const h=[];if(i){for(let y=0;y<=t-1;y++)h.push(c[y]);g.push(h),g.push(c[t])}else{for(let y=0;y<c.length;y++)h.push(c[y]);g.push(h),g.push(p.value[t])}p.value=g,ne.value=Re(p.value[p.value.length-2])}else{for(let h=0;h<p.value.length-2;h++)g.push(p.value[h]);for(let h=0;h<t;h++)g.push(c[h]);g.push(c[t]),p.value=g,ne.value=[]}}else p.value=p.value.splice(0,t+1);Me.value=!1,ze.value=!1},J=a=>{if(a.type===0){E(a.path);const t={path:a.path,title:a.name,type:a.type};p.value.length<R?p.value.push(t):(Array.isArray(p.value[R-2])?p.value[R-2].push(p.value[R-1]):p.value[R-2]=[p.value[R-2],p.value[R-1]],p.value[R-1]=t,ne.value=Re(p.value[R-2])),Me.value=!1,ze.value=!1}else b.info(s("page.file.isFileTips"))},Se=()=>z(this,null,function*(){pe.value=!0;const a=yield Yn({isDir:"true"}),t=yield yt(a);Ie.value=t,pe.value=!1}),E=a=>z(this,null,function*(){de.value=!0;try{const t=yield Un({path:a});if(t.children&&t.children.length){const i=[];t.children.forEach(c=>{const I=c.name,g=I.substring(I.lastIndexOf(".")+1),h=ut[g]||{},y=()=>r(c.type===0?pt:h.icon||dt),F={name:c.name,path:c.path,type:c.type,mTime:c.mTime,icon:y,isChecked:!1,isDir:c.type===0};i.push(F)}),L.value=i}else L.value=[];S.value=a}finally{de.value=!1}}),yt=a=>z(this,null,function*(){const t=i=>{i.length&&i.forEach(c=>{c.type===0&&(Object.assign(c,{key:c.path,label:c.title,isDir:!0,prefix:()=>r(d,null,{default:()=>r(ct)})}),t(c.children),c.children.length||(Object.assign(c,{children:null}),c.prefix=()=>r(d,null,{default:()=>r(Bn)})))})};return t(a),a}),w=a=>{switch(a){case"opreationItem":f.value=null;break;case"renameInput":le.value="";break;case"treeSelect":U.value=null,D.value.dir=void 0;break;case"createData":D.value={type:1,name:void 0,dir:void 0};break}},he=()=>({ghost:!1,tertiary:!0}),Oe=()=>z(this,null,function*(){ce(`${On.SCRIPT_MANAGE_PAGE}?path=${f.value.path}`)}),bt=()=>r(d,{style:"vertical-align: 0"},{default:()=>r(Ce)}),Ee=()=>{Y.value=!0,Se()},kt=()=>z(this,null,function*(){const a=f.value.path,t=f.value.name;let i=U.value?U.value.path:"";i=`${i}${a.includes("\\")?"\\":"/"}${t}`;try{yield Hn({path:a,newPath:i}),b.success(s("file.move.success")),E(S.value)}catch(c){}finally{w("treeSelect"),w("opreationItem")}}),xt=()=>({disabled:!U.value}),Fe=()=>{Y.value=!1,w("treeSelect")},wt=()=>r(d,{style:"vertical-align: 0"},{default:()=>r($e)}),Ue=()=>{j.value=!0},Ct=()=>z(this,null,function*(){const a=f.value.path;try{yield Ln({path:a,name:le.value}),b.success(s("file.rename.success")),E(S.value)}catch(t){}finally{w("opreationItem")}}),$t=()=>({disabled:!le.value}),He=()=>{j.value=!1,w("opreationItem"),w("renameInput")},Tt=a=>{le.value=a},Dt=a=>!["<",">","?","*","/"].some(t=>a.includes(t)),Le=()=>z(this,null,function*(){const a=f.value.path;N.error({title:s("file.delete.title"),content:s("file.delete.confirm"),icon:()=>r(d,{style:"vertical-align: 0"},{default:()=>r(Te)}),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:s("file.delete.button"),onPositiveClick:()=>z(this,null,function*(){try{yield Zn({path:a}),b.success(s("file.delete.success")),E(S.value)}catch(t){}finally{w("opreationItem")}}),onNegativeClick:()=>{w("opreationItem")},negativeButtonProps:{ghost:!1,tertiary:!0}})}),Ze=()=>z(this,null,function*(){const a=f.value.path,t=f.value.name,i=f.value.isDir,c=b.info(s("file.download.wait"),{duration:0,icon:()=>r(d,null,{default:()=>r(Fn)})});try{if(i){const{code:I,message:g,blob:h}=yield rt({path:a});c.destroy(),I?(b.success(s("file.download.success")),h&&it(h,`${t}.zip`)):g&&b.error(g)}else{const{code:I,message:g,blob:h}=yield rt({path:a});c.destroy(),I?(b.success(s("file.download.success")),h&&it(h,t)):g&&b.error(g)}}catch(I){c.destroy(),b.error(s("file.download.fail"),{keepAliveOnHover:!0})}finally{w("opreationItem")}}),Ve=()=>z(this,null,function*(){var i;const a=f.value.path,t=f.value.isDir;try{(i=H.value)==null||i.open({path:a,isDir:t})}catch(c){}finally{w("opreationItem")}}),It={name:{required:!0},dir:{required:!0}},Mt=()=>r(d,{style:"vertical-align: 0"},{default:()=>r(Q)}),oe=()=>{G.value=!0},zt=()=>z(this,null,function*(){D.value.dir=f.value?f.value.path:S.value;const a=D.value.type,t=D.value.name,i=D.value.dir;try{yield Vn({type:a,name:t,dir:i}),b.success(s("file.create.success")),E(S.value)}catch(c){}finally{w("createData"),w("opreationItem")}}),je=()=>{G.value=!1,w("createData"),w("opreationItem")},At=()=>({disabled:!D.value.name}),Bt=()=>r(d,{style:"vertical-align: 0"},{default:()=>r(ee)}),se=()=>{X.value=!0,Se()},Pt=({file:a,onFinish:t,onError:i,onProgress:c})=>{const I=a.name,g=new FormData,h=f.value?f.value.path:S.value;g.append("file",a.file),jn({params:g,path:h,onUploadProgress:({progress:y})=>{c({percent:Math.ceil((y||0)*100)})}}).then(()=>{b.success(`${I} ${s("file.upload.success")}`),E(S.value),t()}).catch(y=>{b.error(y.message,{keepAliveOnHover:!0}),i()})},Nt=()=>{X.value=!1,w("createData"),w("opreationItem")};return Wt(()=>z(this,null,function*(){p.value=[{title:s("page.file.rootPathLabel"),path:"/arcadia",type:0}],yield E("/arcadia")})),(a,t)=>{const i=Qt,c=wn,I=gl,g=Cn,h=en,y=tn,F=lt,ge=nn,Ye=ln,Ge=fl,Xe=rl,P=lt,K=an,qt=Pn,ie=on,We=sn,Je=rn,Rt=un,St=cn,Ot=dn,Et=pn,Ke=fn,re=_n,Ft=vn,Ut=mn,Ht=In,Lt=hn,Zt=gn,Vt=Mn,jt=zn,Qe=yn,Yt=bn,Gt=$n;return u(),_(Gt,{ref:"pageWrapper","content-full":!0},{title:n(()=>[l(e($),null,{default:n(()=>[l(y,{"x-scrollable":"",size:0},{default:n(()=>[l(h,null,{default:n(()=>[(u(!0),B(ke,null,be(e(p),(k,o)=>(u(),_(g,{key:(k==null?void 0:k.title)||"...",onClick:M=>Array.isArray(k)&&k.length>0?()=>{}:ae(k,o,!1)},{default:n(()=>[Array.isArray(k)&&k.length>0?(u(),B("div",kl,[l(i,{trigger:e(x)?"click":"hover",size:"small",options:e(ne)},{default:n(()=>[l(e(d),null,{default:n(()=>[l(e(An))]),_:1})]),_:1},8,["trigger","options"])])):(u(),B("div",xl,[l(e($),{style:{gap:"4px"}},{default:n(()=>[o===0?(u(),_(e(d),{key:0,size:16},{default:n(()=>[e(de)?(u(),_(c,{key:0,size:16,style:{"vertical-align":"baseline"}})):(u(),_(I,{key:1,style:{"vertical-align":"0"}}))]),_:1})):xe("",!0),e(x)&&o===2?(u(),_(e(ue),{key:1,style:{height:"100%","max-width":"80px"}},{tooltip:n(()=>[C("span",null,m(k.title),1)]),default:n(()=>[C("span",null,m(k.title),1)]),_:2},1024)):(u(),B("span",wl,m(k.title),1))]),_:2},1024)]))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),extra:n(()=>[l(tt,{name:e(te),mode:"out-in",appear:""},{default:n(()=>[l(e($),null,{default:n(()=>[e(x)?(u(),_(ge,{key:1,style:{height:"28px"}},{default:n(()=>[l(Ye,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[2]||(t[2]=k=>oe())},{icon:n(()=>[l(e(Q))]),_:1})]),default:n(()=>[C("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(Ye,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[3]||(t[3]=k=>se())},{icon:n(()=>[l(e(ee))]),_:1})]),default:n(()=>[C("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(ge,{key:0,style:{height:"28px"}},{default:n(()=>[l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[0]||(t[0]=k=>oe())},{icon:n(()=>[l(e(Q))]),default:n(()=>[C("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(F,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[1]||(t[1]=k=>se())},{icon:n(()=>[l(e(ee))]),default:n(()=>[C("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})),e(x)?(u(),_(P,{key:3,tertiary:"",strong:"",size:"small",style:{padding:"6px"},onClick:t[5]||(t[5]=k=>T.value=!e(T))},{icon:n(()=>[l(e(d),{size:18},{default:n(()=>[e(T)?(u(),_(Ge,{key:0,style:{"vertical-align":"baseline"}})):(u(),_(Xe,{key:1,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})):(u(),_(e(Jt),{key:2,value:e(T),"onUpdate:value":t[4]||(t[4]=k=>Z(T)?T.value=k:null),size:"small","default-value":!0,style:{"background-color":"var(--app-hover-color)",height:"28px"},variant:"default-filled"},{default:n(()=>[l(e(et),{value:!0,style:{height:"100%"}},{default:n(()=>[l(e(d),{size:18},{default:n(()=>[l(Ge,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1}),l(e(et),{value:!1,style:{height:"100%"}},{default:n(()=>[l(e(d),{size:18},{default:n(()=>[l(Xe,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1})]),_:1},8,["value"]))]),_:1})]),_:1},8,["name"])]),default:n(()=>{var k;return[l(K,{bordered:!e(x),style:{height:"100%"},"content-style":"padding: 0; height: 100%"},{default:n(()=>[l(tt,{name:"fade",mode:"out-in",appear:""},{default:n(()=>[e(L).length?(u(),B("div",Cl,[e(T)?(u(),_(y,{key:0},{default:n(()=>[e(x)?(u(),_(We,{key:1,"x-gap":"4",cols:3},{default:n(()=>[(u(!0),B(ke,null,be(e(L),o=>(u(),_(ie,{key:o.name,style:{padding:"8px"}},{default:n(()=>[l(K,{bordered:!1,style:{height:"140px",width:"100%"},"content-style":"max-height: 60px; padding: 0; margin: 0 auto","footer-style":"height: 100%; padding: 0; text-align: center; width: 100%",onClick:M=>J(o)},{default:n(()=>[l(e(d),{size:50,depth:1,style:{height:"100px",width:"100%"}},{default:n(()=>[(u(),_(we(o.icon)))]),_:2},1024)]),footer:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(ue),{"line-clamp":2,style:{height:"100%","user-drag":"none","-webkit-user-select":"none","user-select":"none"}},{tooltip:n(()=>[C("span",null,m(o.name),1)]),default:n(()=>[C("span",Tl,m(o.name),1)]),_:2},1024),l(P,{round:"",secondary:"",size:"tiny",focusable:!1,onClick:xn(M=>Ne(o),["stop"])},{icon:n(()=>[l(e(d),{size:22,depth:5},{default:n(()=>[l(qt,{style:{"vertical-align":"baseline"}})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(u(),_(e($),{key:0,inline:"",style:{gap:"0"}},{default:n(()=>[(u(!0),B(ke,null,be(e(L),o=>(u(),B("div",{key:o.name,bordered:!1,style:{height:"200px",width:"200px",padding:"20px"}},[l(K,{bordered:!1,class:kn(o.isSelected?"file-selected":"file"),style:{height:"100%",width:"100%","border-radius":"6px"},"content-style":"padding: 0; margin: 0 auto","footer-style":"text-align: center; width: 100%",onContextmenu:M=>vt(M,o),onClick:M=>o.isSelected=!o.isSelected,onDblclick:M=>J(o)},{cover:n(()=>[l(e(d),{size:60,depth:1,style:{height:"100px",width:"100%","padding-top":"20px"}},{default:n(()=>[(u(),_(we(o.icon)))]),_:2},1024)]),footer:n(()=>[C("span",$l,m(o.name),1)]),_:2},1032,["class","onContextmenu","onClick","onDblclick"])]))),128))]),_:1})),l(Je)]),_:1})):(u(),_(y,{key:1},{default:n(()=>[l(Rt,{columns:_t,data:e(L),"row-props":ht,"paginate-single-page":!1},null,8,["data"]),l(Je)]),_:1})),e(x)?xe("",!0):(u(),_(i,{key:2,placement:"bottom-start",trigger:"manual",x:e(_e),y:e(ve),options:e(fe),show:e(q),onSelect:t[6]||(t[6]=o=>W("clickContextMenu")),onClickoutside:t[7]||(t[7]=o=>W("exitContextMenu"))},null,8,["x","y","options","show"]))])):(u(),_(St,{key:1,class:"min-h-200px flex-jc-ac h-full",description:e(s)("page.file.emptyDirectory"),size:"huge"},{extra:n(()=>[l(P,{secondary:"",type:"primary",size:"large",focusable:!1,onClick:t[8]||(t[8]=o=>W("goBack"))},{default:n(()=>[A(m(e(s)("page.file.goBack")),1)]),_:1})]),_:1},8,["description"]))]),_:1})]),_:1},8,["bordered"]),l(Et,{show:e(V),"onUpdate:show":t[17]||(t[17]=o=>Z(V)?V.value=o:null),"auto-focus":!1,height:((k=e(f))==null?void 0:k.type)===0?"370px":"330px",placement:"bottom",onOnEsc:t[18]||(t[18]=o=>W("closeDrawer")),onOnMaskClick:t[19]||(t[19]=o=>W("closeDrawer"))},{default:n(()=>[l(Ot,{closable:"","header-style":"padding: 10px 18px; border-bottom: hidden; user-drag: none; -webkit-user-select: none; user-select: none;","body-content-style":"padding: 10px 18px; overscroll-behavior: none; user-drag: none; -webkit-user-select: none; user-select: none;"},{header:n(()=>[l(e($),null,{default:n(()=>[l(e(d),{size:50,depth:1},{default:n(()=>[(u(),_(we(e(f).icon)))]),_:1}),l(K,{bordered:!1,"header-style":"padding: 0","content-style":"padding: 0; font-size: 12px"},{header:n(()=>[l(e(ue),{style:{height:"100%","max-width":"240px"}},{tooltip:n(()=>{var o;return[C("span",null,m((o=e(f))==null?void 0:o.name),1)]}),default:n(()=>{var o;return[C("span",Dl,m((o=e(f))==null?void 0:o.name),1)]}),_:1})]),default:n(()=>{var o;return[A(" "+m(e(s)("page.file.editAt"))+" "+m((o=e(f))==null?void 0:o.mTime),1)]}),_:1})]),_:1})]),default:n(()=>[l(e($),{vertical:"",style:{gap:"16px 0"}},{default:n(()=>[l(We,{"x-gap":"6px ",cols:3,style:{width:"100%"}},{default:n(()=>[l(ie,null,{default:n(()=>{var o;return[((o=e(f))==null?void 0:o.type)===0?(u(),_(P,{key:0,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[9]||(t[9]=M=>se())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e(ee))]),_:1}),A(" "+m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(P,{key:1,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[10]||(t[10]=M=>Oe())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e(ft))]),_:1}),A(" "+m(e(s)("file.edit.button")),1)]),_:1})]),_:1}))]}),_:1}),l(ie,null,{default:n(()=>[l(P,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[11]||(t[11]=o=>Ee())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e(Ce))]),_:1}),A(" "+m(e(s)("file.move.button")),1)]),_:1})]),_:1})]),_:1}),l(ie,null,{default:n(()=>[l(P,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[12]||(t[12]=o=>Ue())},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(e(d),{size:20},{default:n(()=>[l(e($e))]),_:1}),A(" "+m(e(s)("file.rename.button")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(ge,{vertical:"",size:"large",style:{gap:"1px 0",width:"100%"}},{default:n(()=>{var o;return[l(P,{secondary:"",block:"",strong:"",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[13]||(t[13]=M=>Ze())},{icon:n(()=>[l(e(d),null,{default:n(()=>{var M;return[((M=e(f))==null?void 0:M.type)===1?(u(),_(e(ot),{key:0})):(u(),_(e(st),{key:1}))]}),_:1})]),default:n(()=>[A(" "+m(e(s)("file.download.button")),1)]),_:1}),l(P,{secondary:"",block:"",strong:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[14]||(t[14]=M=>Ve())},{icon:n(()=>[l(e(d),null,{default:n(()=>[l(e(at))]),_:1})]),default:n(()=>[A(" "+m(e(s)("file.attribute.button")),1)]),_:1}),((o=e(f))==null?void 0:o.type)===0?(u(),_(P,{key:0,secondary:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[15]||(t[15]=M=>oe())},{icon:n(()=>[l(e(d),null,{default:n(()=>[l(e(Q))]),_:1})]),default:n(()=>[A(" "+m(e(s)("file.create.button")),1)]),_:1})):xe("",!0),l(P,{secondary:"",block:"",strong:"",type:"error",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[16]||(t[16]=M=>Le())},{icon:n(()=>[l(e(d),null,{default:n(()=>[l(e(Te))]),_:1})]),default:n(()=>[A(" "+m(e(s)("file.delete.button")),1)]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1},8,["show","height"]),l(re,{show:e(j),"onUpdate:show":t[20]||(t[20]=o=>Z(j)?j.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:wt,title:e(s)("file.rename.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":He,"positive-button-props":$t(),"negative-button-props":he(),onNegativeClick:t[21]||(t[21]=o=>He()),onPositiveClick:t[22]||(t[22]=o=>Ct())},{default:n(()=>[l(Ke,{clearable:"",style:{"margin-top":"5px"},"default-value":e(f)?e(f).name:null,"allow-input":Dt,onInput:Tt},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(re,{show:e(Y),"onUpdate:show":t[23]||(t[23]=o=>Z(Y)?Y.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:bt,title:e(s)("file.move.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Fe,"positive-button-props":xt(),"negative-button-props":he(),onNegativeClick:t[24]||(t[24]=o=>Fe()),onPositiveClick:t[25]||(t[25]=o=>kt())},{default:n(()=>[l(Ft,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(pe),options:e(Ie),"on-update:expanded-keys":mt,"on-update:value":gt},null,8,["loading","options"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(re,{show:e(X),"onUpdate:show":t[26]||(t[26]=o=>Z(X)?X.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Bt,title:!e(U)&&!e(f)?e(s)("file.upload.needSelect"):e(s)("file.upload.title"),"on-close":Nt},{default:n(()=>[l(e($),{vertical:""},{default:n(()=>[l(Ut,{type:"info",closable:""},{default:n(()=>[A(m(e(s)("file.upload.info")),1)]),_:1}),l(Zt,{multiple:"","directory-dnd":"",disabled:!e(U)&&!e(f)&&!e(S),"custom-request":Pt},{default:n(()=>[l(Lt,null,{default:n(()=>[C("div",Il,[l(e(d),{size:"48",depth:3},{default:n(()=>[l(Ht)]),_:1})]),l(e(nt),{style:{"font-size":"16px"}},{default:n(()=>[A(m(e(s)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["show","title"]),l(re,{show:e(G),"onUpdate:show":t[30]||(t[30]=o=>Z(G)?G.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Mt,title:e(s)("file.create.title"),"on-close":je,"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"positive-button-props":At(),"negative-button-props":he(),onNegativeClick:t[31]||(t[31]=o=>je()),onPositiveClick:t[32]||(t[32]=o=>zt())},{default:n(()=>[l(K,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:n(()=>[l(Yt,{model:e(D),rules:It,"label-placement":"left",style:{"padding-top":"1em"}},{default:n(()=>[l(Qe,{label:e(s)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-top":"1em"}},{default:n(()=>[l(e($),{style:{width:"100%",height:"140px",gap:"0"},justify:"space-around"},{default:n(()=>[l(F,{strong:"",dashed:"",type:e(D).type===1?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[27]||(t[27]=o=>e(D).type=1)},{default:n(()=>[l(e($),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(d),{size:48},{default:n(()=>[l(Vt,{style:{"vertical-align":"base-line"}})]),_:1}),A(" "+m(e(s)("file.create.form.typeFile")),1)]),_:1})]),_:1},8,["type"]),l(F,{strong:"",dashed:"",type:e(D).type===0?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[28]||(t[28]=o=>e(D).type=0)},{default:n(()=>[l(e($),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(d),{size:48},{default:n(()=>[l(jt,{style:{"vertical-align":"base-line"}})]),_:1}),A(" "+m(e(s)("file.create.form.typeFolder")),1)]),_:1})]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),l(Qe,{label:e(s)("file.create.form.name"),path:"name"},{default:n(()=>[l(Ke,{value:e(D).name,"onUpdate:value":t[29]||(t[29]=o=>e(D).name=o),clearable:"",placeholder:e(s)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(Dn,{ref_key:"fileAttributeModal",ref:H},null,512)]}),_:1},512)}}});export{Vl as default};
