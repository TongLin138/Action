var C=(w,h,m)=>new Promise((r,z)=>{var q=c=>{try{a(m.next(c))}catch(x){z(x)}},s=c=>{try{a(m.throw(c))}catch(x){z(x)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(q,s);a((m=m.apply(w,h)).next())});import{_ as ne}from"./swap-outlined-e52ae3c2.js";import{c as oe,_ as se}from"./index-f66bd7de.js";import{o,p as N,v as _,d as le,z as ie,b as ae,aF as re,a4 as _e,a6 as ce,e,c as l,w as t,a as n,E as F,t as u,q as G,i as R,aH as pe,f as de,y as ue,aI as me}from"./index-797c0a85.js";import{b as ge,_ as fe,d as he,e as ye}from"./index-9f937feb.js";import{u as ve}from"./useAppInject-e4ee4e96.js";import{a as we}from"./file-6dbc6db3.js";import D from"./loading-bc2dff0c.js";import{_ as xe}from"./Code-81e48d26.js";import{N as be}from"./Icon-abc31adc.js";import{a as ke}from"./Tooltip-271e10cc.js";import{_ as ze}from"./ButtonGroup-4b5594ea.js";import{N as $e}from"./Space-3cb079f3.js";import{_ as Te}from"./Skeleton-e990348c.js";import{_ as We}from"./Scrollbar-cdc51570.js";import{_ as Ce}from"./Ellipsis-348a6bfd.js";import{_ as qe,a as Ve}from"./DrawerContent-784d0172.js";const He={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ne=_("path",{fill:"currentColor",d:"M8 12h8v2H8v-2m2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4v-2m-2-2h4.1l.9-.9V16H8v2m12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1l-2.1-2.1l1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1l2.1 2.1Z"},null,-1),Be=[Ne];function Ee(w,h){return o(),N("svg",He,[...Be])}const Se={name:"mdi-file-document-edit-outline",render:Ee},Me={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ie=_("path",{fill:"currentColor",d:"M9 18h6q.425 0 .713-.288T16 17q0-.425-.288-.713T15 16H9q-.425 0-.713.288T8 17q0 .425.288.713T9 18Zm0-4h6q.425 0 .713-.288T16 13q0-.425-.288-.713T15 12H9q-.425 0-.713.288T8 13q0 .425.288.713T9 14Zm-3 8q-.825 0-1.413-.588T4 20V4q0-.825.588-1.413T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V20q0 .825-.588 1.413T18 22H6Zm7-14V4H6v16h12V9h-4q-.425 0-.713-.288T13 8ZM6 4v5v-5v16V4Z"},null,-1),Ze=[Ie];function Pe(w,h){return o(),N("svg",Me,[...Ze])}const je={name:"material-symbols-description-outline-rounded",render:Pe},Ae={style:{display:"inline-block"},viewBox:"0 0 32 32",width:"1em",height:"1em"},Le=_("path",{fill:"#d9b400",d:"M29.4 27.6H2.5V4.5h26.9Zm-25.9-1h24.9V5.5H3.5Z"},null,-1),Fe=_("path",{fill:"#d9b400",d:"m6.077 19.316l-.555-.832l4.844-3.229l-4.887-4.071l.641-.768l5.915 4.928l-5.958 3.972zM12.7 18.2h7.8v1h-7.8zM2.5 5.5h26.9v1.9H2.5z"},null,-1),Ge=[Le,Fe];function Re(w,h){return o(),N("svg",Ae,[...Ge])}const De={name:"vscode-icons-file-type-shell",render:Re},Oe={style:{"vertical-align":"-4px",padding:"0 2px"}},pt=le({__name:"viewScript",setup(w,{expose:h}){const{message:m}=ie(),{t:r}=ae(),{getIsMobile:z}=ve(),q=re(),s=_e({title:r("page.cron.table.script"),formatTitle:"",path:"",show:!1,loading:!0,code:"",language:"",wordWrap:!0,showLineNumbers:!1}),{title:a,formatTitle:c,path:x,show:g,loading:y,code:$,language:B,wordWrap:E,showLineNumbers:V}=ce(s),O=p=>C(this,null,function*(){s.title=p.scriptPath.split("/").pop(),s.formatTitle=s.title.replace(/\.(js|py|ts|sh)$/,""),s.path=p.scriptPath,s.code="",s.language="",s.loading=!0,s.show=!0;try{yield U(p.scriptPath)}finally{s.code?s.loading=!1:m.warning(r("page.cron.viewScript.noScriptMsg"))}}),U=p=>C(this,null,function*(){const i=yield we({path:p}),T=p.substring(p.lastIndexOf(".")+1),W=ge[T]||{};s.code=i,s.language=W.language||"plaintext"}),b=p=>C(this,null,function*(){switch(p){case"goEdit":s.show=!1,q(`${pe.SCRIPT_MANAGE_PAGE}?path=${x.value}`);break;case"copyContent":oe(s.code)?m.success(r("common.copyOk")):m.error(r("common.copyFail"));break;case"changeWrap":s.showLineNumbers=!s.showLineNumbers,s.wordWrap=!s.wordWrap;break}});return h({open:O}),(p,i)=>{const T=fe,W=he,S=ye,M=De,I=je,f=be,Z=Se,v=de,k=ke,J=se,P=ne,j=ze,H=$e,A=Te,L=xe,K=We,Q=ue,X=me,Y=Ce,ee=qe,te=Ve;return e(z)?(o(),l(te,{key:1,show:e(g),"onUpdate:show":i[7]||(i[7]=d=>R(g)?g.value=d:null),height:"100vh",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:t(()=>[n(ee,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":`padding: ${e(V)?"4px 4px":"4px 8px"}; overscroll-behavior: none`,"footer-style":"padding: 16px 24px"},{header:t(()=>[n(H,null,{default:t(()=>[n(f,{color:"var(--app-primary-color)"},{default:t(()=>[e(y)?(o(),l(D,{key:0,style:{"font-size":"24"}})):e(a).endsWith(".js")?(o(),l(T,{key:1,style:{"font-size":"24px","vertical-align":"0"}})):e(a).endsWith(".py")?(o(),l(W,{key:2,style:{"font-size":"24px","vertical-align":"0"}})):e(a).endsWith(".ts")?(o(),l(S,{key:3,style:{"font-size":"24px","vertical-align":"0"}})):e(a).endsWith(".sh")?(o(),l(M,{key:4,style:{"font-size":"24px","vertical-align":"0"}})):(o(),l(I,{key:5,style:{"font-size":"24px","vertical-align":"0"}}))]),_:1}),n(Y,{style:{height:"100%","max-width":"200px"}},{tooltip:t(()=>[_("span",null,u(e(a)),1)]),default:t(()=>[_("span",Oe,u(e(c)||e(a)),1)]),_:1}),!e(y)&&e($)?(o(),l(j,{key:0},{default:t(()=>[n(k,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[n(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:i[4]||(i[4]=d=>b("goEdit"))},{icon:t(()=>[n(f,{size:16},{default:t(()=>[n(Z,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:t(()=>[_("span",null,u(e(r)("page.cron.viewScript.goEditBtn")),1)]),_:1}),n(k,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[n(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:i[5]||(i[5]=d=>b("changeWrap"))},{icon:t(()=>[n(f,{size:16},{default:t(()=>[n(P,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:t(()=>[_("span",null,u(e(r)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):G("",!0)]),_:1})]),footer:t(()=>[n(H,null,{default:t(()=>[n(v,{type:"primary",focusable:!1,onClick:i[6]||(i[6]=d=>g.value=!1)},{default:t(()=>[F(u(e(r)("component.modal.close")),1)]),_:1})]),_:1})]),default:t(()=>[e(y)?(o(),l(A,{key:0,text:"",repeat:30,height:"16px"})):(o(),l(L,{key:1,code:e($),language:e(B),"show-line-numbers":e(V),"word-wrap":e(E),style:{"font-size":"13px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"]))]),_:1},8,["body-content-style"])]),_:1},8,["show"])):(o(),l(X,{key:0,show:e(g),"onUpdate:show":i[3]||(i[3]=d=>R(g)?g.value=d:null),preset:"dialog","auto-focus":!1,style:{width:"800px"}},{icon:t(()=>[n(f,null,{default:t(()=>[e(y)?(o(),l(D,{key:0,style:{"font-size":"24px"}})):e(a).endsWith(".js")?(o(),l(T,{key:1,style:{"font-size":"24px","vertical-align":"0"}})):e(a).endsWith(".py")?(o(),l(W,{key:2,style:{"font-size":"24px","vertical-align":"0"}})):e(a).endsWith(".ts")?(o(),l(S,{key:3,style:{"font-size":"24px","vertical-align":"0"}})):e(a).endsWith(".sh")?(o(),l(M,{key:4,style:{"font-size":"24px","vertical-align":"0"}})):(o(),l(I,{key:5,style:{"font-size":"24px","vertical-align":"0"}}))]),_:1})]),header:t(()=>[n(H,null,{default:t(()=>[F(u(e(c)||e(a))+" ",1),!e(y)&&e($)?(o(),l(j,{key:0},{default:t(()=>[n(k,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[n(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:i[0]||(i[0]=d=>b("goEdit"))},{icon:t(()=>[n(f,{size:16},{default:t(()=>[n(Z,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:t(()=>[_("span",null,u(e(r)("page.cron.viewScript.goEditBtn")),1)]),_:1}),n(k,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[n(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:i[1]||(i[1]=d=>b("copyContent"))},{icon:t(()=>[n(f,{size:14},{default:t(()=>[n(J,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:t(()=>[_("span",null,u(e(r)("common.copyBtn")),1)]),_:1}),n(k,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[n(v,{strong:"",secondary:"",size:"small",focusable:!1,onClick:i[2]||(i[2]=d=>b("changeWrap"))},{icon:t(()=>[n(f,{size:16},{default:t(()=>[n(P,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:t(()=>[_("span",null,u(e(r)("page.cron.viewScript.wordWrapBtn")),1)]),_:1})]),_:1})):G("",!0)]),_:1})]),default:t(()=>[e(y)?(o(),l(A,{key:0,text:"",repeat:27,height:"16px"})):(o(),l(Q,{key:1,bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"height: 100%; padding: 1em 0 0 0; "},{default:t(()=>[n(K,{"x-scrollable":"",style:{"max-height":"680px",height:"100%"}},{default:t(()=>[n(L,{code:e($),language:e(B),"show-line-numbers":e(V),"word-wrap":e(E),style:{"font-size":"14px",height:"100%"}},null,8,["code","language","show-line-numbers","word-wrap"])]),_:1})]),_:1}))]),_:1},8,["show"]))}}});export{pt as _};
