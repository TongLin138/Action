import{_ as N}from"./history-de6307db.js";import{c as C,b as D}from"./index-46f58af9.js";import{u as R}from"./useAppInject-bb3d2acd.js";import{j as B,a as E}from"./file-f0c38022.js";import{G as L,x as M,r as j,I as A,a6 as n,a7 as a,a8 as l,ac as f,u as e,aJ as F,as as J,aL as S,aC as V,aw as y,aE as z,bE as G,bi as P,bJ as T,bv as U}from"./vendor-4af6c1c4.js";const $={key:1},X=L({__name:"historyModal",setup(q,{expose:w}){const{message:k}=C(),{t:i}=D(),{getIsMobile:u}=R(),x=M(null),o=j({show:!1,loading:!0,log:""}),{show:c,loading:b,log:m}=A(o),v=async s=>{o.log="",o.loading=!0,o.show=!0;try{o.log=await I(s.logPath)}finally{o.loading=!1}},I=async s=>{const t=await B(s);if(t.children&&t.children.length){t.children.sort((_,p)=>{const g=_.name.replace(".log","").replace(/-/g,"");return p.name.replace(".log","").replace(/-/g,"")-g});const r=t.children[0];return await E({path:r.path})}return k.warning(i("cron.task.message.no_latest_log")),""};return w({open:v}),(s,t)=>{const r=N,h=G,_=P,p=T,g=U;return n(),a(g,{show:e(c),"onUpdate:show":t[0]||(t[0]=d=>z(c)?c.value=d:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,title:e(i)("cron.task.history"),style:y({width:e(u)?"100vw":"600px"})},{icon:l(()=>[f(e(F),null,{default:l(()=>[f(r,{style:{"vertical-align":"0"}})]),_:1})]),default:l(()=>[e(b)?(n(),a(h,{key:0,text:"",repeat:27,height:"16px"})):(n(),J("div",$,[e(m)?(n(),a(p,{key:1,ref_key:"logInstRef",ref:x,log:e(m),"line-height":1.5,language:"naive-log",style:y(`padding-top: 1em; width: 100%; height: ${e(u)?"400px":"600px"}`)},null,8,["log","line-height","style"])):(n(),a(_,{key:0},{default:l(()=>[S(V(e(i)("common.noData")),1)]),_:1}))]))]),_:1},8,["show","title","style"])}}});export{X as _};
