var Le=Object.defineProperty,Ue=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var be=(e,s,o)=>s in e?Le(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,S=(e,s)=>{for(var o in s||(s={}))_e.call(s,o)&&be(e,o,s[o]);if(ne)for(var o of ne(s))ye.call(s,o)&&be(e,o,s[o]);return e},Ne=(e,s)=>Ue(e,Ge(s));var ke=(e,s)=>{var o={};for(var d in e)_e.call(e,d)&&s.indexOf(d)<0&&(o[d]=e[d]);if(e!=null&&ne)for(var d of ne(e))s.indexOf(d)<0&&ye.call(e,d)&&(o[d]=e[d]);return o};var I=(e,s,o)=>new Promise((d,P)=>{var V=i=>{try{g(o.next(i))}catch(k){P(k)}},a=i=>{try{g(o.throw(i))}catch(k){P(k)}},g=i=>i.done?d(i.value):Promise.resolve(i.value).then(V,a);g((o=o.apply(e,s)).next())});import{a7 as p,aJ as E,at as Ce,u as c,cs as Ee,ct as ze,cu as qe,cv as Je,cw as Fe,s as Y,b3 as He,b_ as We,bp as Be,cx as Ke,aQ as Xe,cy as Qe,b4 as Ye,b5 as Ze,cz as xe,cA as et,cB as tt,cC as nt,aP as ot,b6 as st,b7 as at,cD as rt,bJ as lt,bq as it,H as ut,y as z,r as ct,c8 as dt,h as L,ai as pt,D as ie,aL as ft,a8 as y,a9 as f,ac as ve,ab as le,aZ as W,aH as q,N as Pe,av as Q,aa as U,aI as O,aO as T,bx as we,cE as gt,aD as G,ax as he,au as mt,bi as bt,aS as _t,a_ as yt,aC as Nt,a$ as kt,cq as vt,cr as Pt,cF as wt,bK as ht,bs as It,an as Ct,aN as Ft,bt as Bt,bL as Rt,aX as Vt,A as Dt}from"./vendor-kg4oYVSQ.js";import{_ as St}from"./question-circle-outlined-iMpmjEHS.js";import{j as Z,S as Mt,h as Re,U as Ie,f as Ve,a as jt,e as Ot,V as Tt,W as $t,d as At,X as Lt,Y as Ut}from"./index-mGrCK8oI.js";import{p as v}from"./propTypes-e0b5J7qR.js";import{u as Gt}from"./useBreakpoint-MHcNKsoR.js";const Et={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},zt=Ce("path",{fill:"currentColor",d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 0 0 140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7"},null,-1),qt=[zt];function Jt(e,s){return p(),E("svg",Et,[...qt])}const Ht={name:"ant-design-up-outlined",render:Jt},Wt={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Kt=Ce("path",{fill:"currentColor",d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2L227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7"},null,-1),Xt=[Kt];function Qt(e,s){return p(),E("svg",Wt,[...Xt])}const Yt={name:"ant-design-down-outlined",render:Qt};function Zt(e){return e?["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"请选择":"请输入":""}function xt(e,s,o=!0){switch(s){case"NDatePicker":case"NTimePicker":e.type=o?"string":"object";break;case"NUpload":case"NCheckboxGroup":case"NDateRangePicker":e.type="array";break;case"NInputNumber":e.type="number";break}}function en({emit:e,getProps:s,formModel:o,getSchema:d,formElRef:P,defaultFormModel:V,handleFormValues:a}){function g(){return I(this,null,function*(){var m;return(m=c(P))==null?void 0:m.validate()})}function i(m){return I(this,null,function*(){m&&m.preventDefault();const{submitFunc:b}=c(s);if(b&&Z(b)){yield b(o);return}if(c(P))try{return yield g(),e("submit",o),o}catch(j){return!1}})}function k(){return I(this,null,function*(){var m;yield(m=c(P))==null?void 0:m.restoreValidation()})}function D(){return I(this,null,function*(){const{resetFunc:m,submitOnReset:b}=c(s);if(m&&Z(m)&&(yield m()),!c(P))return;c(d).forEach($=>{Ee(o,$.field,()=>Fe(V.value,$.field)||null)}),yield k();const j=a(o);e("reset",j),b&&(yield i())})}function F(){return c(P)?a(o):{}}function J(m){return I(this,null,function*(){const b=c(d).map(w=>ze(w.field)?w.field[0]:w.field).filter(Boolean);Object.keys(m).forEach(w=>{const j=m[w];b.includes(w)&&(o[w]=qe(j)?Je(o[w],j):j)})})}return{handleSubmit:i,validate:g,resetFields:D,getFieldsValue:F,clearValidate:k,setFieldsValue:J}}function tn({defaultFormModel:e,getSchema:s,formModel:o}){function d(V){if(!Mt(V))return{};const a={};for(const g of Object.entries(V)){let[,i]=g;const[k]=g;!k||Re(i)&&i.length===0||Z(i)||Ie(i)||(Ve(i)&&(i=i.trim()),Y(a,k,i))}return a}function P(){const V=c(s),a={},g=i=>{i.forEach(k=>{const{defaultValue:D,childrens:F}=k;Ie(D)||(Y(a,k.field,D),Y(o,k.field,D)),F&&(F==null?void 0:F.length)>0&&g(F)})};g(V),e.value=a}return{handleFormValues:d,initDefault:P}}const nn={model:{type:Object,default:{}},disabled:v.bool.def(!1),require:v.bool.def(!1),rulesMessageJoinLabel:v.bool.def(!0),labelWidth:v.stringNumber.def(80),schemas:{type:[Array],default:()=>[]},inline:v.bool.def(!1),size:v.string.def("medium"),labelPlacement:v.string,isFull:v.bool.def(!0),showActionButtonGroup:v.bool.def(!0),showResetButton:v.bool.def(!0),resetButtonOptions:Object,showSubmitButton:v.bool.def(!0),submitButtonOptions:Object,showAdvancedButton:v.bool.def(!0),submitButtonText:v.string,resetButtonText:v.string,gridProps:Object,giProps:Object,formItemProps:Object,baseGridStyle:Object,collapsed:v.bool.def(!1),collapsedRows:v.number.def(1)},_=new Map;_.set("NInput",He);_.set("NDynamicInput",We);_.set("NInputGroup",Be);_.set("NInputGroupLabel",Ke);_.set("NInputNumber",Xe);_.set("NAutoComplete",Qe);_.set("NSelect",Ye);_.set("NSwitch",Ze);_.set("NCascader",xe);_.set("NSlider",et);_.set("NRate",tt);_.set("NTransfer",nt);_.set("NTreeSelect",ot);_.set("NDatePicker",st);_.set("NTimePicker",at);_.set("NColorPicker",rt);_.set("NUpload",lt);_.set("NDivider",it);const on=ut({name:"BasicForm",props:S({},nn),emits:["reset","submit","register"],setup(e,{emit:s,attrs:o}){const{t:d}=jt(),{smaller:P,sizeEnum:V}=Gt(),a=z({}),g=ct({}),i=z({}),k=z(null),D=z(null),F=z(!1),J=z(!1),m=dt(()=>P(V.MD).value?"top":"left"),b=L(()=>{const n=Object.assign({},e,c(i)),l={rules:{}};return(n.schemas||[]).forEach(N=>{const M=Te(N);Y(l.rules,N.field,M)}),S(S({},n),c(l))}),w=L(()=>{const{schemas:n}=c(b);return{schemas:n,model:c(g)}});function j(n){if(Re(n))return n.join(".");if(Ve(n))return n}function $(n){const{rulesMessageJoinLabel:l,label:u,component:N}=n,{rulesMessageJoinLabel:M}=e,B=Reflect.has(n,"rulesMessageJoinLabel")?l:M;return`${Zt(N)}${B&&u!=null?u:""}`}function K(n){const{component:l}=n;let u;switch(l){case"NInputTextarea":u="NInput";break;case"NInputPassword":u="NInput";break;case"NDateRangePicker":u="NDatePicker";break;case"NDatetimeRangePicker":u="NDatePicker";break;default:u=l}return _.get(u)}function oe(n){const{component:l,componentProps:u}=n;let N={};switch(l){case null:case void 0:break;case"NInputTextarea":N={type:"textarea"};break;case"NInputPassword":N={type:"password"};break;case"NDateRangePicker":N={type:"daterange"};break;case"NDatetimeRangePicker":N={type:"datetimerange"};break}const M=u!=null?u:{};return S(S({clearable:!0,placeholder:$(n),disabled:x(n)},N),M)}function x(n){var N;const{disabled:l}=n,{disabled:u}=c(b);return Z(l)?l(w.value):(N=l!=null?l:u)!=null?N:!1}function se(n){const{show:l=!0}=n;return Z(l)?l(w.value):l}const ae=L(()=>Object.assign({size:e.size,type:"default"},i.value.resetButtonOptions)),re=L(()=>Object.assign({size:e.size,type:"primary"},i.value.submitButtonOptions)),t=L(()=>c(b).inline),r=L(()=>{const{gridProps:n}=c(b);return S({responsive:"screen",collapsed:t.value?F.value:!1,cols:1},n)});function h(n){const{giProps:l}=n,{giProps:u}=c(b);return S(S({span:1},u),l)}const A=L(()=>{const u=c(b),{labelPlacement:n}=u,l=ke(u,["labelPlacement"]);return Ne(S(S(S({},o),e),l),{labelPlacement:n!=null?n:m.value})}),H=L(()=>{const n=c(k)||c(b).schemas;for(const l of n){const{defaultValue:u,bindVal:N="value",bindUpdateVal:M="update:value"}=l;l.bindVal=N,l.bindUpdateVal=M,u&&(l.defaultValue=u)}return n}),{handleFormValues:ee,initDefault:ue}=tn({defaultFormModel:a,getSchema:H,formModel:g}),{handleSubmit:ce,validate:De,resetFields:de,getFieldsValue:Se,clearValidate:Me,setFieldsValue:pe}=en({emit:s,getProps:b,formModel:g,getSchema:H,formElRef:D,defaultFormModel:a,handleFormValues:ee});function je(){F.value=!F.value}function Oe(n){return I(this,null,function*(){i.value=$t(c(i)||{},n)})}function Te(n){const{rules:l=[],show:u,required:N,component:M}=n;let B=pt(l);const fe=["blur","input"],ge=$(n);function Ae(C,R){const te=C.message||ge;return R===void 0||Tt(R)||Array.isArray(R)&&R.length===0||typeof R=="string"&&R.trim()===""||typeof R=="object"&&Reflect.has(R,"checked")&&Reflect.has(R,"halfChecked")&&Array.isArray(R.checked)&&Array.isArray(R.halfChecked)&&R.checked.length===0&&R.halfChecked.length===0?Promise.reject(te):Promise.resolve()}(!B||B.length===0)&&N&&(B=[{required:N,validator:Ae,trigger:fe}]);const me=B.findIndex(C=>Reflect.has(C,"required")&&!Reflect.has(C,"validator"));if(me!==-1){const C=B[me];Ot(u)&&!u&&(C.required=!1),M&&(Reflect.has(C,"type")||xt(C,M),C.message=C.message||ge,C.trigger=fe,M.includes("NInput")&&(C.whitespace=!0))}const X=B.findIndex(C=>C.max);return X!==-1&&!B[X].validator&&(B[X].message=B[X].message||d("component.form.maxTip",[B[X].max])),B}const $e={getFieldsValue:Se,setFieldsValue:pe,resetFields:de,validate:De,clearValidate:Me,setProps:Oe,submit:ce};return ie(()=>H.value,n=>{c(J)||n!=null&&n.length&&(ue(),J.value=!0)}),ie(()=>c(b).model,n=>{n&&pe(n)},{immediate:!0}),ft(()=>{ue(),s("register",$e)}),{t:d,get:Fe,set:Y,formElRef:D,formModel:g,getGrid:r,getGridItem:h,getProps:b,getShow:se,getFormItemPath:j,getBindValue:A,getSchema:H,getSubmitBtnOptions:re,getResetBtnOptions:ae,handleSubmit:ce,resetFields:de,isInline:t,getComponentProps:oe,getComp:K,unfoldToggle:je,componentMap:_}}});function sn(e,s,o,d,P,V){const a=bt,g=St,i=_t,k=yt,D=Nt,F=kt,J=vt,m=Pt,b=wt,w=Be,j=ht,$=It,K=Ct,oe=Yt,x=Ft,se=Ht,ae=Bt,re=Rt;return p(),y(re,q(e.getBindValue,{ref:"formElRef",model:e.formModel,class:"mt-2"}),{default:f(()=>[U(ae,le(ve(e.getGrid)),{default:f(()=>[(p(!0),E(W,null,Q(e.getSchema,t=>(p(),E(W,{key:t.field},[e.getShow(t)?(p(),y($,le(q({key:0},e.getGridItem(t))),{default:f(()=>[U(j,q({label:t.label,path:e.getFormItemPath(t.field)},t.formItemProps),mt({default:f(()=>[t.slot?Pe(e.$slots,t.slot,{key:0,model:e.formModel,field:t.field,value:e.get(e.formModel,t.field)},void 0,!0):t.component==="NCheckbox"?(p(),y(F,{key:1,value:e.formModel[t.field],"onUpdate:value":r=>e.formModel[t.field]=r},{default:f(()=>[U(D,null,{default:f(()=>{var r;return[(p(!0),E(W,null,Q((r=t==null?void 0:t.componentProps)==null?void 0:r.options,h=>(p(),y(k,{key:h.value,value:h.value,label:h.label},null,8,["value","label"]))),128))]}),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):t.component==="NRadioGroup"?(p(),y(m,{key:2,value:e.formModel[t.field],"onUpdate:value":r=>e.formModel[t.field]=r},{default:f(()=>{var r;return[U(D,le(ve((r=t==null?void 0:t.componentProps)==null?void 0:r.spaceProps)),{default:f(()=>{var h;return[(p(!0),E(W,null,Q((h=t==null?void 0:t.componentProps)==null?void 0:h.options,A=>(p(),y(J,{key:A.value,value:A.value},{default:f(()=>[T(O(A.label),1)]),_:2},1032,["value"]))),128))]}),_:2},1040)]}),_:2},1032,["value","onUpdate:value"])):t.component==="NRadioButtonGroup"?(p(),y(m,{key:3,value:e.formModel[t.field],"onUpdate:value":r=>e.formModel[t.field]=r},{default:f(()=>{var r;return[(p(!0),E(W,null,Q((r=t==null?void 0:t.componentProps)==null?void 0:r.options,h=>(p(),y(b,{key:h.value,value:h.value},{default:f(()=>[T(O(h.label),1)]),_:2},1032,["value"]))),128))]}),_:2},1032,["value","onUpdate:value"])):t.component==="NInputGroup"?(p(),y(w,{key:4},{default:f(()=>[(p(!0),E(W,null,Q(t.childrens,r=>{var h,A;return p(),y(we(e.getComp(r)),q({key:r.filed},e.getComponentProps(r),{value:e.get(e.formModel,(h=r.field)!=null?h:t.field),class:{isFull:((A=r.isFull)!=null?A:t.isFull)!=!1&&e.getProps.isFull},"onUpdate:value":H=>{var ee;return e.set(e.formModel,(ee=r.field)!=null?ee:t.field,H)}}),{default:f(()=>[T(O(r==null?void 0:r.defaultSlot),1)]),_:2},1040,["value","class","onUpdate:value"])}),128))]),_:2},1024)):(p(),y(we(e.getComp(t)),q({key:5},e.getComponentProps(t),{[t.bindVal||""]:e.get(e.formModel,t.field),class:{isFull:t.isFull!=!1&&e.getProps.isFull}},{[gt(t.bindUpdateVal)]:r=>e.set(e.formModel,t.field,r)}),null,16,["class"])),t.suffix?Pe(e.$slots,t.suffix,{key:6,model:e.formModel,field:t.field,value:e.get(e.formModel,t.field)},void 0,!0):G("",!0)]),_:2},[t.subLabel||t.labelMessage?{name:"label",fn:f(()=>[T(O(t.label)+" ",1),t.subLabel?(p(),y(a,{key:0,depth:3,class:"mr-2"},{default:f(()=>[T(O(t.subLabel),1)]),_:2},1024)):G("",!0),t.labelMessage?(p(),y(i,{key:1,trigger:"hover",style:he(t.labelMessageStyle)},{trigger:f(()=>[U(g,{class:"text-18px cursor-pointer text-$app-text-color-3"})]),default:f(()=>[T(" "+O(t.labelMessage),1)]),_:2},1032,["style"])):G("",!0)]),key:"0"}:void 0]),1040,["label","path"])]),_:2},1040)):G("",!0)],64))),128)),e.getProps.showActionButtonGroup?(p(),y($,{key:0,span:e.isInline?"":24,suffix:!!e.isInline},{default:f(({overflow:t})=>[U(D,{align:"center",justify:e.isInline?"end":"start",style:he({"margin-left":`${e.isInline?12:e.getProps.labelWidth}px`,"margin-bottom":"24px"})},{default:f(()=>[e.getProps.showSubmitButton?(p(),y(K,q({key:0},e.getSubmitBtnOptions,{onClick:e.handleSubmit}),{default:f(()=>{var r;return[T(O((r=e.getProps.submitButtonText)!=null?r:e.t("common.queryText")),1)]}),_:1},16,["onClick"])):G("",!0),e.getProps.showResetButton?(p(),y(K,q({key:1},e.getResetBtnOptions,{onClick:e.resetFields}),{default:f(()=>{var r;return[T(O((r=e.getProps.resetButtonText)!=null?r:e.t("common.resetText")),1)]}),_:1},16,["onClick"])):G("",!0),e.isInline&&e.getProps.showAdvancedButton?(p(),y(K,{key:2,type:"primary",text:"","icon-placement":"right",onClick:e.unfoldToggle},{icon:f(()=>[t?(p(),y(x,{key:0,size:"14",class:"unfold-icon"},{default:f(()=>[U(oe)]),_:1})):(p(),y(x,{key:1,size:"14",class:"unfold-icon"},{default:f(()=>[U(se)]),_:1}))]),default:f(()=>[T(" "+O(t?"展开":"收起"),1)]),_:2},1032,["onClick"])):G("",!0)]),_:2},1032,["justify","style"])]),_:1},8,["span","suffix"])):G("",!0)]),_:3},16)]),_:3},16,["model"])}const pn=At(on,[["render",sn],["__scopeId","data-v-99776a72"]]);function fn(e){const s=z(null),o=z(!1);function d(){return I(this,null,function*(){const a=c(s);return a||console.error("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield Dt(),a})}function P(a){Vt(()=>{s.value=null,o.value=null}),!(c(o)&&Lt()&&a===c(s))&&(s.value=a,o.value=!0,ie(()=>e,()=>{e&&a.setProps(Ut(e))},{immediate:!0,deep:!0}))}return[P,{setProps:a=>I(this,null,function*(){yield(yield d()).setProps(a)}),resetFields:()=>I(this,null,function*(){d().then(a=>I(this,null,function*(){yield a.resetFields()}))}),clearValidate:a=>I(this,null,function*(){yield(yield d()).clearValidate(a)}),getFieldsValue:()=>{var a;return(a=c(s))==null?void 0:a.getFieldsValue()},setFieldsValue:a=>I(this,null,function*(){yield(yield d()).setFieldsValue(a)}),submit:()=>I(this,null,function*(){return(yield d()).submit()}),validate:a=>I(this,null,function*(){return(yield d()).validate(a)})}]}export{pn as _,fn as u};
