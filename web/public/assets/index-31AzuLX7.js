var ft=Object.getOwnPropertySymbols;var vl=Object.prototype.hasOwnProperty,yl=Object.prototype.propertyIsEnumerable;var Be=(M,y)=>{var P={};for(var p in M)vl.call(M,p)&&y.indexOf(p)<0&&(P[p]=M[p]);if(M!=null&&ft)for(var p of ft(M))y.indexOf(p)<0&&yl.call(M,p)&&(P[p]=M[p]);return P};var z=(M,y,P)=>new Promise((p,s)=>{var he=F=>{try{Q(P.next(F))}catch(U){s(U)}},K=F=>{try{Q(P.throw(F))}catch(U){s(U)}},Q=F=>F.done?p(F.value):Promise.resolve(F.value).then(he,K);Q((P=P.apply(M,y)).next())});import{_ as gl}from"./PageWrapper.vue_vue_type_style_index_0_lang-iCdyxX7_.js";import{a as _t,r as Re,m as Se,g as mt,b as bl,c as vt,u as yt,d as hl,e as kl,f as xl}from"./create-5G5GKa2Z.js";import{_ as wl,a as Cl,b as $l}from"./sliders-horizontal-bold-1dPJ5zDp.js";import{d as Ee,c as zl,a as Dl,_ as Ml}from"./index-lXlFquMP.js";import{_ as Il}from"./search2-line-EAu5Rnuh.js";import{_ as Pl}from"./shortcut-N3-a_HkT.js";import{_ as Tl,a as Bl}from"./find-replace-2UcMKkk2.js";import{_ as Rl}from"./swap-outlined-YCG3qHHs.js";import{a7 as v,aJ as J,at as C,a8 as k,a9 as a,aa as l,aN as c,H as Sl,x as Nl,y as d,aL as Fl,aM as El,au as Ul,u as e,ay as ye,aC as x,an as h,aE as L,aO as N,aI as g,aS as E,aD as j,ax as Ol,av as Hl,aZ as Ll,bi as Ne,am as u,bO as ql,bw as Al,bd as Wl,aQ as Vl,aR as jl,bA as Kl,b3 as Ql,bP as Yl,bz as Jl,bQ as Xl,bD as Gl,bY as Zl,bS as ea,aT as ta,bT as la,aK as aa,bG as na,aP as oa,bH as sa,bI as ia,bJ as ra,bK as ua,bL as ca,bx as gt,c3 as da}from"./vendor-88CfsZ0h.js";import{d as pa,c as fa,_ as _a,a as ma,b as va,e as ya}from"./close-to-menu-alt-transition-4z1D0tjg.js";import{_ as ga}from"./index.vue_vue_type_style_index_0_lang-HZK011BJ.js";import{_ as ba}from"./runParamModal.vue_vue_type_script_setup_true_lang-BUmyb4Al.js";import{u as ha}from"./useAppInject-htw12zLS.js";import{u as ka}from"./useTransition-f93yfBB3.js";import{d as Fe,a as xa,f as wa,b as Ca,c as bt}from"./delete-NJHjfXUX.js";import{s as $a,f as ht,g as kt,a as za,c as Da,d as Ma,e as xt,h as Ia,i as Pa}from"./file-nlIWw8Qn.js";import{c as ge,f as re,a as Ta,b as wt}from"./index-2ITmi_Ad.js";import{f as be}from"./filePrefix-kRqy0MsR.js";import{f as Ct}from"./folderEmpty-kjR0QQdH.js";import"./sharp-arrow-back-ios-T556WsKB.js";import"./useDesign-SmALCiTA.js";import"./clock-edit-outline-FBHcS8eN.js";import"./more-horiz-zOM0TAYL.js";import"./content-copy-JmFHhe3T.js";import"./propTypes-XBNzJcxe.js";import"./useRunLog-SN6js9ok.js";const Ba={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ra=C("path",{fill:"currentColor",d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7zm2 16H5V5h11.17L19 7.83zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3M6 6h9v4H6z"},null,-1),Sa=[Ra];function Na(M,y){return v(),J("svg",Ba,[...Sa])}const Fa={name:"mdi-content-save-outline",render:Na},Ea={};function Ua(M,y){const P=Fa,p=c;return v(),k(p,null,{default:a(()=>[l(P,{style:{"vertical-align":"baseline"}})]),_:1})}const $t=Ee(Ea,[["render",Ua]]),Oa={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ha=C("path",{fill:"currentColor",d:"M19 7h-2.81c-.45-.8-1.07-1.5-1.82-2L16 3.41L14.59 2l-2.17 2.17a6.002 6.002 0 0 0-2.83 0L7.41 2L6 3.41L7.62 5c-.75.5-1.36 1.21-1.81 2H3v2h2.09c-.06.33-.09.66-.09 1v1H3v2h2v1c0 .34.03.67.09 1H3v2h2.81A6.002 6.002 0 0 0 13 19.65V19c0-.57.09-1.14.25-1.69c-.66.45-1.45.69-2.25.69c-2.21 0-4-1.79-4-4v-4c0-2.21 1.79-4 4-4s4 1.79 4 4v4c0 .19 0 .39-.05.58c.59-.54 1.29-.96 2.05-1.23V13h2v-2h-2v-1c0-.34-.03-.67-.09-1H19zm-6 2v2H9V9zm0 4v2H9v-2zm4 3v6l5-3z"},null,-1),La=[Ha];function qa(M,y){return v(),J("svg",Oa,[...La])}const Aa={name:"mdi-bug-play-outline",render:qa},Wa={};function Va(M,y){const P=Aa,p=c;return v(),k(p,null,{default:a(()=>[l(P,{style:{"vertical-align":"baseline"}})]),_:1})}const zt=Ee(Wa,[["render",Va]]),ja={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ka=C("path",{fill:"currentColor",d:"M13 19c0 .34.04.67.09 1H6.5c-1.5 0-2.81-.5-3.89-1.57C1.54 17.38 1 16.09 1 14.58c0-1.3.39-2.46 1.17-3.48S4 9.43 5.25 9.15c.42-1.53 1.25-2.77 2.5-3.72S10.42 4 12 4c1.95 0 3.6.68 4.96 2.04C18.32 7.4 19 9.05 19 11c1.15.13 2.1.63 2.86 1.5c.51.57.84 1.21 1 1.92A5.908 5.908 0 0 0 19 13h-2v-2c0-1.38-.5-2.56-1.46-3.54C14.56 6.5 13.38 6 12 6s-2.56.5-3.54 1.46C7.5 8.44 7 9.62 7 11h-.5c-.97 0-1.79.34-2.47 1.03c-.69.68-1.03 1.5-1.03 2.47s.34 1.79 1.03 2.5c.68.66 1.5 1 2.47 1h6.59c-.05.33-.09.66-.09 1m7-1v-3h-2v3h-3v2h3v3h2v-3h3v-2z"},null,-1),Qa=[Ka];function Ya(M,y){return v(),J("svg",ja,[...Qa])}const Ja={name:"mdi-cloud-plus-outline",render:Ya},Xa={key:1,class:"font-bold text-xl"},Ga={key:2},Za={class:"font-bold text-xl"},en={class:"pb-1 mr-3"},tn={class:"pb-1 mr-3"},ln={style:{"margin-bottom":"12px"}},an=Sl({__name:"index",setup(M){const{message:y,confirm:P}=zl(),{getIsMobile:p}=ha(),{t:s}=Dl(),he=Nl(),K=d("fade-slide");ka(K);const Q=d(),F=d(),U=d(s("routes.main.page.script.manage")),ke=d([]),xe=d([]),ue=d([]),q=d(""),Ue=d([]),Oe=d(0),He=d(0),O=d([]),Dt=d(""),X=d(!p.value),G=d(p.value?"on":"off"),we=d(!1),W=d(p.value?13:15),T=d([]),H=d({}),Y=d(""),ce=d(!1),Z=d(!1),ee=d(!1),te=d(!1),le=d(!1),S=d(!1),R=d(void 0),Ce=d(!1),de=d(!0),ae=d(!1),ne=d(!1),m=d(null),f=d(null),D=d({}),pe=d(""),I=d({type:1,name:"",dir:""}),B=n=>z(this,null,function*(){switch(n){case"findBox":we.value=!we.value,S.value=!1;break;case"wordWrap":G.value=G.value==="on"?"off":"on",S.value=!1;break;case"minimap":X.value=!X.value,S.value=!1;break;case"showEditorShortcutsInfo":e(O.value)[`editor-${m.value.key}`].showShortCuts();break;case"siderCollapse":R.value=!R.value;break;case"save":Ce.value=!0;const t=e(O.value)[`editor-${m.value.key}`].getValue();try{yield $a({content:t,path:m.value.key}),y.success(s("editor.main.savedSuccess")),H.value[m.value.key].content=t}finally{Ce.value=!1}break;case"clickContextMenu":ce.value=!1;break;case"exitContextMenu":ce.value=!1,b("contextMenu");break}}),Mt=n=>{if(!m.value)return;const t=m.value.key;n!==t&&(H.value[t].content=e(O.value)[`editor-${t}`].getValue())},fe=n=>{T.value.forEach(t=>{if(t.key===n){U.value=t.label,Y.value=n;const i=t,{children:o}=i,_=Be(i,["children"]);m.value=_}})},oe=n=>{T.value.forEach((t,i)=>{t.key===n&&(T.value.splice(i,1),delete H.value[t.key],delete O.value[`editor-${t.key}`],T.value.length>0?Y.value===n&&fe(T.value[T.value.length-1].key):(b("content"),b("tmpData"),Ae(t.key)))})},It=n=>{Mt(n),fe(n)},Pt=n=>{oe(n.value)},se=(n,t,i)=>{if(!i.node)return;const o=i.node,_=o.title;switch(i.action){case"expand":o.prefix=()=>u(c,null,{default:()=>u(ge.open[_]||Ta)});break;case"collapse":o.prefix=()=>u(c,null,{default:()=>u(ge.close[_]||re)});break}},Tt=n=>u(E,{placement:"left",delay:1500,duration:500,showArrow:!1,overlap:!0,style:{width:"max-content",fontSize:"12px",right:"26px"}},{trigger:()=>n.option.label,default:()=>u(x,{style:"gap: 4px"},{default:()=>[n.option.key,u(h,{text:!0,type:"primary",focusable:!1,onClick:()=>Et(n.option.key)},{default:()=>u(fa)})]})}),Le=(n,t,i)=>z(this,null,function*(){if(i.action!=="select")return;const o=i.node;if(o.isDir||o.disabled)return;p.value&&(R.value=!0),T.value.find($=>$.key===o.key)||(yield qe(o.key,o.language),T.value.push(o)),fe(o.key)}),Bt=i=>z(this,[i],function*({node:n,dragNode:t}){if(!n.isDir)return;const o=t.key,_=`${n.key}${o.includes("\\")?"\\":"/"}${t.label}`;if(o!==_)try{yield ht({path:o,newPath:_}),y.success(s("file.move.success")),oe(o),V()}catch($){}}),$e=(n,t,i)=>{switch(i.action){case"select":i.node&&(D.value=i.node,I.value.dir=i.node.key);break;case"delete":case"clear":case"unselect":b("treeSelect");break}},Rt=n=>z(this,null,function*(){const t=i=>{i.length&&i.forEach(o=>{if(o.type===0)Object.assign(o,{key:o.path,label:o.title,isDir:!0,canRun:!1,disabled:!1,icon:()=>u(re),prefix:()=>u(c,null,{default:()=>u(ge.close[o.title]||re)})}),t(o.children),o.children.length||(Object.assign(o,{children:null}),o.prefix=()=>u(c,null,{default:()=>u(Ct)}));else{const _=o.name;if(_){const $=_.substring(_.lastIndexOf(".")+1),w=wt[$]||{};Object.assign(o,{key:o.path,label:_,isDir:!1,language:w.language||"plaintext",canRun:w.canRun||!1,disabled:w.disabled||!w.language,icon:()=>u(w.icon||be),prefix:()=>u(c,null,{default:()=>u(w.icon||be)})})}}})};return t(n),n}),St=n=>z(this,null,function*(){const t=i=>{i.length&&i.forEach(o=>{o.type===0&&(Object.assign(o,{key:o.path,label:o.title,isDir:!0,canRun:!1,disabled:!1,icon:()=>u(re),prefix:()=>u(c,null,{default:()=>u(ge.close[o.title]||re)})}),t(o.children),o.children.length||(Object.assign(o,{children:null}),o.prefix=()=>u(c,null,{default:()=>u(Ct)})))})};return t(n),n}),Nt=({option:n})=>({onContextmenu(t){Ue.value=ze("ContextMenu",{option:n}),ce.value=!0,Oe.value=t.clientX,He.value=t.clientY,t.preventDefault();const _=n,{children:i}=_,o=Be(_,["children"]);f.value=o}}),ze=(n,{option:t})=>{const i={save:{label:s("file.save.button"),key:"save",icon:()=>u(c,null,{default:()=>u($t)}),props:{onClick:()=>{B("save")}}},run:{label:s("file.run.button"),key:"run",icon:()=>u(c,null,{default:()=>u(zt)}),props:{onClick:()=>{We()}}},attribute:{label:s("file.attribute.button"),key:"attribute",icon:()=>u(c,null,{default:()=>u(_t)}),props:{onClick:()=>{Xe()}}},create:{label:s("file.create.button"),key:"create",icon:()=>u(c,null,{default:()=>u(vt)}),props:{onClick:()=>{Qt()}}},upload:{label:s("file.upload.button"),key:"upload",icon:()=>u(c,null,{default:()=>u(yt)}),props:{onClick:()=>{Gt()}}},more:{label:()=>u(Ne,{style:{color:"var(--app-primary-color)"}},{default:()=>s("file.more.button")}),key:"more",icon:()=>u(c,{color:"var(--app-primary-color)"},{default:()=>u(mt)}),children:[{label:s("file.download.button"),key:"download",icon:()=>u(c,null,{default:()=>u(t.isDir?xa:wa)}),props:{onClick:()=>{Je()}}},{label:s("file.move.button"),key:"move",icon:()=>u(c,null,{default:()=>u(Se)}),props:{onClick:()=>{Ve()}}},{label:s("file.rename.button"),key:"rename",icon:()=>u(c,null,{default:()=>u(Re)}),props:{onClick:()=>{Ke()}}},{type:"divider",key:"d1"},{label:()=>u(Ne,{style:{color:"var(--app-error-color)"}},{default:()=>s("file.delete.button")}),key:"delete",icon:()=>u(c,{color:"var(--app-error-color)"},{default:()=>u(Fe)}),props:{onClick:()=>{Ye()}}}]}};let o=[];return n==="ContextMenu"?(o=[i.attribute],t.isDir?o=[i.create,i.upload,...o,...i.more.children]:t.disabled?o=[...o,...i.more.children]:(o=[...o,i.more],t.canRun&&o.unshift(i.run))):n==="MobileHeader"?(o=[i.save,i.more.children[0],i.more.children[1],i.more.children[2],i.attribute,i.more.children[3],i.more.children[4]],t.canRun&&o.splice(1,0,i.run)):n==="HeaderSubTitle"&&(o=[i.create,i.upload]),o},V=()=>z(this,null,function*(){de.value=!0;const n=yield kt({}),t=yield Rt(n);ke.value=t,de.value=!1}),De=()=>z(this,null,function*(){ne.value=!0;const n=yield kt({isDir:"true"}),t=yield St(n);ue.value=t,ne.value=!1}),Ft=()=>z(this,null,function*(){const n=he.currentRoute.value.query.path;if(!n)return;const t=n.split("/").pop()||"",i=t.substring(t.lastIndexOf(".")+1),o=wt[i]||{},_=o.language||"plaintext";if(_)if(yield qe(n,_),H.value[n].content){xe.value=n.split("/").slice(0,-1).map((w,Ie,ie)=>ie.slice(0,Ie+1).join("/"));const $={key:n,label:t,isDir:!1,language:_,canRun:o.canRun||!1,disabled:o.disabled||!_,icon:()=>u(o.icon||be),prefix:()=>u(c,null,{default:()=>u(o.icon||be)})};T.value.push($),fe($.key),p.value&&(R.value=!0)}else H.value={}}),qe=(n,t)=>z(this,null,function*(){Dt.value=t||"plaintext",ae.value=!0;try{const i=yield za({path:encodeURI(n)});ae.value=!1,i?H.value[n]={content:i,language:t}:(H.value[n]={content:"",language:t},y.info(s("page.script.fileContentIsEmptyMsg")))}catch(i){b("content"),b("tmpData")}finally{ae.value=!1}}),Ae=n=>{O.value.length>0&&O.value[`editor-${n}`]&&(O.value[`editor-${n}`].dispose(),delete e(O.value)[`editor-${n}`])},Et=n=>{ql(n)?y.success(s("common.copyOk")):y.error(s("common.copyFail"))},Me=()=>({ghost:!1,tertiary:!0}),b=n=>{switch(n){case"title":U.value=s("routes.main.page.script.manage");break;case"content":b("title"),m.value=null,Y.value="",p.value&&(R.value=!1);break;case"contextMenu":f.value=null;break;case"renameInput":pe.value="";break;case"treeSelect":D.value={},I.value.dir=void 0;break;case"createData":I.value={type:1,name:void 0,dir:void 0};break;case"tmpData":b("contextMenu"),b("renameInput"),b("treeSelect"),b("createData");break}},We=()=>{var n;try{let t,i;f.value?(t=f.value.label,i=f.value.key):(t=m.value.label,i=m.value.key),t&&i&&((n=Q.value)==null||n.open({title:t,runPath:i}))}catch(t){}finally{b("tmpData")}},Ut=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(Se)}),Ve=()=>{ee.value=!0,De()},Ot=()=>z(this,null,function*(){const n=f.value?f.value.key:m.value.key,t=f.value?f.value.label:m.value.label;let i=D.value?D.value.key:"";i=`${i}${n.includes("\\")?"\\":"/"}${t}`;try{yield ht({path:n,newPath:i}),y.success(s("file.move.success")),oe(n),V()}catch(o){}finally{b("tmpData")}}),Ht=()=>({disabled:!D.value}),je=()=>{ee.value=!1,b("treeSelect")},Lt=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(Re)}),Ke=()=>{Z.value=!0},qt=()=>z(this,null,function*(){const n=f.value?f.value.key:m.value.key;try{yield Da({path:n,name:pe.value}),y.success(s("file.rename.success")),oe(n),V()}catch(t){}finally{b("tmpData")}}),At=()=>({disabled:!pe.value}),Qe=()=>{Z.value=!1,b("tmpData")},Wt=n=>{pe.value=n},Vt=n=>!["<",">","?","*","/"].some(t=>n.includes(t)),Ye=()=>z(this,null,function*(){const n=f.value?f.value.key:m.value.key;P.error({title:s("file.delete.title"),content:s("file.delete.confirm"),icon:()=>u(c,{style:"vertical-align: 0"},{default:()=>u(Fe)}),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:s("file.delete.button"),onPositiveClick:()=>z(this,null,function*(){try{yield Ma({path:n}),y.success(s("file.delete.success")),oe(n),V()}catch(t){}finally{b("tmpData")}}),onNegativeClick:()=>{b("tmpData")},negativeButtonProps:{ghost:!1,tertiary:!0}})}),Je=()=>z(this,null,function*(){const n=f.value?f.value.key:m.value.key,t=f.value?f.value.label:m.value.label,i=f.value?f.value.isDir:m.value.isDir,o=y.info(s("file.download.wait"),{duration:0,icon:()=>u(c,null,{default:()=>u(Ca)})});try{if(i){const{code:_,message:$,blob:w}=yield xt({path:n});o.destroy(),_?(y.success(s("file.download.success")),w&&bt(w,`${t}.zip`)):$&&y.error($)}else{const{code:_,message:$,blob:w}=yield xt({path:n});o.destroy(),_?(y.success(s("file.download.success")),w&&bt(w,t)):$&&y.error($)}}catch(_){o.destroy(),y.error(s("file.download.fail"),{keepAliveOnHover:!0})}finally{b("tmpData")}}),Xe=()=>z(this,null,function*(){var i;const n=f.value?f.value.key:m.value.key,t=f.value?f.value.isDir:m.value.isDir;try{(i=F.value)==null||i.open({path:n,isDir:t})}catch(o){}finally{b("tmpData")}}),jt={name:{required:!0},dir:{required:!0}},Kt=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(vt)}),Qt=()=>{te.value=!0,f.value&&({label:D.value.label,key:D.value.key}=f.value,I.value.dir=D.value.key),De()},Yt=()=>z(this,null,function*(){const n=I.value.type,t=I.value.name,i=I.value.dir;try{yield Ia({type:n,name:t,dir:i}),y.success(s("file.create.success")),V()}catch(o){}finally{b("tmpData")}}),Ge=()=>{te.value=!1,b("tmpData")},Jt=()=>({disabled:!D.value||!I.value.name}),Xt=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(yt)}),Gt=()=>{le.value=!0,f.value&&({label:D.value.label,key:D.value.key}=f.value),De()},Zt=({file:n,onFinish:t,onError:i,onProgress:o})=>{const _=n.name,$=new FormData;$.append("file",n.file),Pa({params:$,path:D.value.key,onUploadProgress:({progress:w})=>{o({percent:Math.ceil((w||0)*100)})}}).then(()=>{y.success(`${_} ${s("file.upload.success")}`),V(),t()}).catch(w=>{y.error(w.message,{keepAliveOnHover:!0}),i()})},el=()=>{le.value=!1,b("tmpData")};return Fl(()=>z(this,null,function*(){yield V(),Ft()})),El(()=>{T.value.length>0&&Ae(T.value[0].key)}),(n,t)=>{const i=_a,o=ma,_=Al,$=va,w=ya,Ie=Ja,ie=Wl,Ze=wl,et=Cl,tt=Vl,lt=Tl,at=Rl,nt=Bl,ot=jl,tl=Pl,st=Kl,it=Il,_e=Ql,rt=Yl,ut=Jl,me=Ml,ct=Xl,ll=Gl,al=da,nl=Zl,dt=ea,ol=$l,sl=ta,il=la,pt=aa,ve=na,Pe=oa,rl=sa,ul=hl,cl=ia,dl=ra,pl=kl,fl=xl,Te=ua,_l=ca,ml=gl;return v(),k(ml,{ref:"pageWrapper","content-full":""},Ul({title:a(()=>[l(e(x),null,{default:a(()=>[e(m)&&e(p)?(v(),k(ye,{key:0,name:e(K),mode:"in-out",appear:""},{default:a(()=>[l(e(h),{strong:"",tertiary:"",size:"tiny",style:{height:"29px",padding:"0 8px"},focusable:!1,onClick:t[0]||(t[0]=r=>B("siderCollapse"))},{icon:a(()=>[l(e(c),{size:20},{default:a(()=>[e(R)?(v(),k(o,{key:1,style:{"vertical-align":"baseline"}})):(v(),k(i,{key:0,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})]),_:1},8,["name"])):j("",!0),e(p)?(v(),J("div",Ga,[l(_,{style:{height:"100%","max-width":"170px"}},{tooltip:a(()=>[C("span",null,g(e(U)),1)]),default:a(()=>[C("span",Za,g(e(U)),1)]),_:1})])):(v(),J("span",Xa,g(e(U)),1))]),_:1})]),subtitle:a(()=>[l(e(x),{style:Ol(e(p)?"gap: 4px":"gap: 0")},{default:a(()=>[e(p)?j("",!0):(v(),k(e(h),{key:0,strong:"",quaternary:!e(p),secondary:e(p),size:"small",focusable:!1,style:{"vertical-align":"-0.15em",padding:"6px 6px",height:"28px",width:"28px"},onClick:t[1]||(t[1]=r=>B("siderCollapse"))},{icon:a(()=>[l(e(c),{size:14},{default:a(()=>[e(R)?(v(),k(w,{key:1,style:{"vertical-align":"baseline"}})):(v(),k($,{key:0,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1},8,["quaternary","secondary"])),e(p)&&e(m)?j("",!0):(v(),k(ie,{key:1,trigger:"click",options:ze("HeaderSubTitle",{option:e(m)})},{default:a(()=>[l(e(h),{strong:"",quaternary:!e(p),secondary:e(p),size:"small",focusable:!1,style:{"vertical-align":"-0.15em",padding:"6px 6px",height:"28px",width:"28px"}},{default:a(()=>[l(e(c),{size:16},{default:a(()=>[l(Ie,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1},8,["quaternary","secondary"])]),_:1},8,["options"]))]),_:1},8,["style"])]),default:a(()=>[l(pt,{bordered:!e(p),style:{height:"100%","word-break":"unset"},"content-style":"padding: 0; height: 100%"},{default:a(()=>[l(il,{"has-sider":"",style:{height:"100%"},"content-style":"height: 100%"},{default:a(()=>[e(p)?(v(),k(ct,{key:1,class:"scripts-container",width:"100%","content-style":"display: flex; flex-direction: column; height: 100%; padding: .8em 0 0 .8em",bordered:!1,"collapsed-width":0,"show-collapsed-content":!1,"native-scrollbar":!1,collapsed:e(R),"on-update:collapsed":r=>R.value=r},{default:a(()=>[C("div",tn,[l(_e,{value:e(q),"onUpdate:value":t[23]||(t[23]=r=>L(q)?q.value=r:null),clearable:"",size:"small",style:{"margin-bottom":".5em"},placeholder:e(s)("page.script.searchInputPlaceholder")},{prefix:a(()=>[l(it)]),_:1},8,["value","placeholder"])]),l(ut,{"x-scrollable":"",class:"flex-1 pr-3"},{default:a(()=>[l(rt,{"expand-on-click":"","block-line":"",style:{"font-size":"15px"},"show-irrelevant-nodes":!1,pattern:e(q),data:e(ke),"default-expanded-keys":e(xe),"on-update:expanded-keys":se,"on-update:selected-keys":Le},null,8,["pattern","data","default-expanded-keys"]),l(ll,{right:20,bottom:20})]),_:1}),l(me,{show:e(de)},null,8,["show"])]),_:1},8,["collapsed","on-update:collapsed"])):(v(),k(ct,{key:0,class:"scripts-container",width:"320","content-style":"display: flex; flex-direction: column; height: 100%; padding: .8em 0 0 .8em",bordered:!e(R),"collapsed-width":0,"show-collapsed-content":!1,"native-scrollbar":!1,collapsed:e(R),"on-update:collapsed":r=>R.value=r},{default:a(()=>[C("div",en,[l(_e,{value:e(q),"onUpdate:value":t[20]||(t[20]=r=>L(q)?q.value=r:null),clearable:"",style:{"margin-bottom":".5em"},placeholder:e(s)("page.script.searchInputPlaceholder")},{prefix:a(()=>[l(it)]),_:1},8,["value","placeholder"])]),l(ut,{"x-scrollable":"",class:"flex-1 pr-3"},{default:a(()=>[l(rt,{"expand-on-click":"",draggable:"","show-line":"","show-irrelevant-nodes":!1,"node-props":Nt,pattern:e(q),data:e(ke),"default-expanded-keys":e(xe),"render-label":Tt,"on-update:expanded-keys":se,"on-update:selected-keys":Le,onDrop:Bt},null,8,["pattern","data","default-expanded-keys"]),l(ie,{trigger:"manual",placement:"bottom-start",show:e(ce),options:e(Ue),x:e(Oe),y:e(He),onSelect:t[21]||(t[21]=r=>B("clickContextMenu")),onClickoutside:t[22]||(t[22]=r=>B("exitContextMenu"))},null,8,["show","options","x","y"])]),_:1}),l(me,{show:e(de)},null,8,["show"])]),_:1},8,["bordered","collapsed","on-update:collapsed"])),e(T).length>0?(v(),k(dt,{key:2,class:"tab-panel"},{default:a(()=>[l(nl,{value:e(Y),"onUpdate:value":t[24]||(t[24]=r=>L(Y)?Y.value=r:null),"drag-sort":"",style:{height:"100%",width:"100%",display:"flex","flex-direction":"column"},theme:"card",onChange:It,onRemove:Pt},{default:a(()=>[(v(!0),J(Ll,null,Hl(e(T),r=>(v(),k(al,{key:r.key,value:r.key,removable:"",style:{height:"100%",width:"100%",padding:"0"},"destroy-on-hide":!1},{label:a(()=>[e(p)?(v(),k(e(x),{key:1,style:{gap:"4px"}},{default:a(()=>[l(e(c),{size:16},{default:a(()=>[(v(),k(gt(r.icon),{style:{"vertical-align":"-0.3em"}}))]),_:2},1024),N(" "+g(r.label),1)]),_:2},1024)):(v(),k(e(E),{key:0,placement:"top",trigger:"hover","show-arrow":!1,delay:1e3},{trigger:a(()=>[l(e(x),{style:{gap:"4px"}},{default:a(()=>[l(e(c),{size:16},{default:a(()=>[(v(),k(gt(r.icon),{style:{"vertical-align":"-0.3em"}}))]),_:2},1024),N(" "+g(r.label),1)]),_:2},1024)]),default:a(()=>[C("span",null,g(r.key),1)]),_:2},1024))]),default:a(()=>[l(ye,{name:"fade",mode:"out-in",appear:""},{default:a(()=>[l(ga,{ref_for:!0,ref:A=>e(O)[`editor-${r.key}`]=A,style:{height:"100%",padding:"0","z-index":"999999"},value:{content:e(H)[r.key].content,language:e(H)[r.key].language},"word-wrap":e(G),minimap:e(X),"font-size":e(W),"find-box":e(we)},null,8,["value","word-wrap","minimap","font-size","find-box"])]),_:2},1024)]),_:2},1032,["value"]))),128)),l(me,{show:e(ae)},null,8,["show"])]),_:1},8,["value"])]),_:1})):(v(),k(dt,{key:3},{default:a(()=>[e(m)?j("",!0):(v(),k(sl,{key:0,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-description":!0,description:e(s)("common.selectFileEmptyDesc")},{icon:a(()=>[l(e(c),null,{default:a(()=>[l(ol)]),_:1})]),_:1},8,["description"])),l(me,{show:e(ae)},null,8,["show"])]),_:1}))]),_:1})]),_:1},8,["bordered"]),l(ve,{show:e(Z),"onUpdate:show":t[25]||(t[25]=r=>L(Z)?Z.value=r:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Lt,title:e(s)("file.rename.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Qe,"positive-button-props":At(),"negative-button-props":Me(),onNegativeClick:t[26]||(t[26]=r=>Qe()),onPositiveClick:t[27]||(t[27]=r=>qt())},{default:a(()=>[l(_e,{clearable:"",style:{"margin-top":"5px"},"default-value":e(f)?e(f).label:e(m)?e(m).label:null,"allow-input":Vt,onInput:Wt},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ve,{show:e(ee),"onUpdate:show":t[28]||(t[28]=r=>L(ee)?ee.value=r:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Ut,title:e(s)("file.move.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":je,"positive-button-props":Ht(),"negative-button-props":Me(),onNegativeClick:t[29]||(t[29]=r=>je()),onPositiveClick:t[30]||(t[30]=r=>Ot())},{default:a(()=>[l(Pe,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(ne),options:e(ue),"on-update:expanded-keys":se,"on-update:value":$e},null,8,["loading","options"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ve,{show:e(le),"onUpdate:show":t[31]||(t[31]=r=>L(le)?le.value=r:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Xt,title:!e(D)&&!e(f)?e(s)("file.upload.needSelect"):e(s)("file.upload.title"),"on-close":el},{default:a(()=>[l(e(x),{vertical:""},{default:a(()=>{var r;return[l(Pe,{"default-value":(r=e(D))==null?void 0:r.key,clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},placeholder:e(s)("file.upload.selectPlaceholder"),"consistent-menu-width":!1,loading:e(ne),options:e(ue),"on-update:expanded-keys":se,"on-update:value":$e},null,8,["default-value","placeholder","loading","options"]),l(rl,{type:"info",closable:""},{default:a(()=>[N(g(e(s)("file.upload.info")),1)]),_:1}),l(dl,{multiple:"","directory-dnd":"",disabled:!e(D)&&!e(f),"custom-request":Zt},{default:a(()=>[l(cl,null,{default:a(()=>[C("div",ln,[l(e(c),{size:"48",depth:3},{default:a(()=>[l(ul)]),_:1})]),l(e(Ne),{style:{"font-size":"16px"}},{default:a(()=>[N(g(e(s)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]}),_:1})]),_:1},8,["show","title"]),l(ve,{show:e(te),"onUpdate:show":t[35]||(t[35]=r=>L(te)?te.value=r:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Kt,title:e(s)("file.create.title"),"on-close":Ge,"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"positive-button-props":Jt(),"negative-button-props":Me(),onNegativeClick:t[36]||(t[36]=r=>Ge()),onPositiveClick:t[37]||(t[37]=r=>Yt())},{default:a(()=>[l(pt,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:a(()=>[l(_l,{model:e(I),rules:jt,"label-placement":"left",style:{"padding-top":"1em"}},{default:a(()=>[l(Te,{label:e(s)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-top":"1em"}},{default:a(()=>[l(e(x),{style:{width:"100%",height:"140px",gap:"0"},justify:"space-around"},{default:a(()=>[l(e(h),{strong:"",dashed:"",type:e(I).type===1?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[32]||(t[32]=r=>e(I).type=1)},{default:a(()=>[l(e(x),{vertical:"",style:{gap:"20px"}},{default:a(()=>[l(e(c),{size:48},{default:a(()=>[l(pl,{style:{"vertical-align":"baseline"}})]),_:1}),C("strong",null,g(e(s)("file.create.form.typeFile")),1)]),_:1})]),_:1},8,["type"]),l(e(h),{strong:"",dashed:"",type:e(I).type===0?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[33]||(t[33]=r=>e(I).type=0)},{default:a(()=>[l(e(x),{vertical:"",style:{gap:"20px"}},{default:a(()=>[l(e(c),{size:48},{default:a(()=>[l(fl,{style:{"vertical-align":"baseline"}})]),_:1}),C("strong",null,g(e(s)("file.create.form.typeFolder")),1)]),_:1})]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),l(Te,{label:e(s)("file.create.form.name"),path:"name"},{default:a(()=>[l(_e,{value:e(I).name,"onUpdate:value":t[34]||(t[34]=r=>e(I).name=r),clearable:"",placeholder:e(s)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(Te,{label:e(s)("file.create.form.path"),path:"dir"},{default:a(()=>{var r;return[l(Pe,{"default-value":(r=e(D))==null?void 0:r.key,clearable:"","show-path":!0,separator:" / ",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(ne),options:e(ue),"on-update:expanded-keys":se,"on-update:value":$e},null,8,["default-value","loading","options"])]}),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ba,{ref_key:"runParamModal",ref:Q},null,512),l(bl,{ref_key:"fileAttributeModal",ref:F},null,512)]),_:2},[e(p)?{name:"extra",fn:a(()=>[e(m)?(v(),k(ye,{key:0,name:e(K),mode:"out-in",appear:""},{default:a(()=>[l(e(x),null,{default:a(()=>[l(ot,{trigger:"manual",style:{padding:"8px"},show:e(S),"show-arrow":!1,placement:"bottom"},{trigger:a(()=>[l(e(h),{strong:"",quaternary:"",size:"small",type:e(S)?"primary":"tertiary",style:{padding:"6px"},focusable:!1,onClick:t[15]||(t[15]=r=>S.value=!e(S))},{default:a(()=>[l(e(c),{size:"18"},{default:a(()=>[l(Ze,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1},8,["type"])]),default:a(()=>[l(e(x),{vertical:""},{default:a(()=>[l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(et,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(tt,{value:e(W),"onUpdate:value":t[16]||(t[16]=r=>L(W)?W.value=r:null),min:12,max:40,"button-placement":"both",size:"small",class:"max-w-94px",style:{"text-align":"center"}},null,8,["value"])]),_:1}),l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(lt,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(e(h),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[17]||(t[17]=r=>B("findBox"))},{default:a(()=>[N(g(e(s)("editor.switch.findBtn")),1)]),_:1})]),_:1}),l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(G)==="on"?"var(--app-primary-color)":void 0},{default:a(()=>[l(at,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(h),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[18]||(t[18]=r=>B("wordWrap"))},{default:a(()=>[N(g(e(s)("editor.switch.wordWrapBtn")),1)]),_:1})]),_:1}),l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(X)?"var(--app-primary-color)":void 0},{default:a(()=>[l(nt,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(h),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[19]||(t[19]=r=>B("minimap"))},{default:a(()=>[N(g(e(s)("editor.switch.minimapBtn")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),l(st,null,{default:a(()=>[l(ie,{trigger:"click",placement:"bottom-start",options:ze("MobileHeader",{option:e(m)})},{default:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",focusable:!1},{icon:a(()=>[l(e(mt))]),default:a(()=>[N(" "+g(e(s)("file.more.button")),1)]),_:1})]),_:1},8,["options"])]),_:1})]),_:1})]),_:1},8,["name"])):j("",!0)]),key:"1"}:{name:"extra",fn:a(()=>[e(m)?(v(),k(ye,{key:0,name:e(K),mode:"out-in",appear:""},{default:a(()=>[l(e(x),null,{default:a(()=>[l(e(x),{style:{gap:"0"}},{default:a(()=>[l(ot,{trigger:"manual",style:{padding:"8px"},show:e(S),"show-arrow":!1,placement:"bottom"},{trigger:a(()=>[l(e(h),{strong:"",quaternary:"",size:"small",type:e(S)?"primary":"tertiary",style:{padding:"6px"},focusable:!1,onClick:t[2]||(t[2]=r=>S.value=!e(S))},{default:a(()=>[l(e(c),{size:"18"},{default:a(()=>[l(Ze,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1},8,["type"])]),default:a(()=>[l(e(x),{vertical:""},{default:a(()=>[l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(et,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(tt,{value:e(W),"onUpdate:value":t[3]||(t[3]=r=>L(W)?W.value=r:null),min:12,max:40,"button-placement":"both",size:"small",class:"max-w-94px",style:{"text-align":"center"}},null,8,["value"])]),_:1}),l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(lt,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(e(h),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[4]||(t[4]=r=>B("findBox"))},{default:a(()=>[N(g(e(s)("editor.switch.findBtn")),1)]),_:1})]),_:1}),l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(G)==="on"?"var(--app-primary-color)":void 0},{default:a(()=>[l(at,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(h),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[5]||(t[5]=r=>B("wordWrap"))},{default:a(()=>[N(g(e(s)("editor.switch.wordWrapBtn")),1)]),_:1})]),_:1}),l(e(x),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(X)?"var(--app-primary-color)":void 0},{default:a(()=>[l(nt,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(h),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[6]||(t[6]=r=>B("minimap"))},{default:a(()=>[N(g(e(s)("editor.switch.minimapBtn")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),l(e(E),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",quaternary:"",size:"small",type:"tertiary",style:{padding:"6px"},focusable:!1,onClick:t[7]||(t[7]=r=>B("showEditorShortcutsInfo"))},{default:a(()=>[l(e(c),{size:"18"},{default:a(()=>[l(tl,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:a(()=>[C("span",null,g(e(s)("editor.switch.shortcutsTips")),1)]),_:1})]),_:1}),l(st,null,{default:a(()=>{var r;return[l(e(E),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[8]||(t[8]=A=>Xe())},{icon:a(()=>[l(e(_t))]),_:1})]),default:a(()=>[C("span",null,g(e(s)("file.attribute.button")),1)]),_:1}),l(e(E),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[9]||(t[9]=A=>Je())},{icon:a(()=>[l(e(pa))]),_:1})]),default:a(()=>[C("span",null,g(e(s)("file.download.button")),1)]),_:1}),l(e(E),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[10]||(t[10]=A=>Ye())},{icon:a(()=>[l(e(Fe))]),_:1})]),default:a(()=>[C("span",null,g(e(s)("file.delete.button")),1)]),_:1}),l(e(E),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[11]||(t[11]=A=>Ke())},{icon:a(()=>[l(e(Re))]),_:1})]),default:a(()=>[C("span",null,g(e(s)("file.rename.button")),1)]),_:1}),l(e(E),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[12]||(t[12]=A=>Ve())},{icon:a(()=>[l(e(Se))]),_:1})]),default:a(()=>[C("span",null,g(e(s)("file.move.button")),1)]),_:1}),(r=e(m))!=null&&r.canRun?(v(),k(e(E),{key:0,placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[13]||(t[13]=A=>We())},{icon:a(()=>[l(e(zt))]),_:1})]),default:a(()=>[C("span",null,g(e(s)("file.run.button")),1)]),_:1})):j("",!0),l(e(E),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(h),{strong:"",tertiary:"",size:"small",loading:e(Ce),focusable:!1,onClick:t[14]||(t[14]=A=>B("save"))},{icon:a(()=>[l(e($t))]),_:1},8,["loading"])]),default:a(()=>[C("span",null,g(e(s)("editor.main.saveButton")),1)]),_:1})]}),_:1})]),_:1})]),_:1},8,["name"])):j("",!0)]),key:"0"}]),1536)}}}),Bn=Ee(an,[["__scopeId","data-v-12eb5674"]]);export{Bn as default};
