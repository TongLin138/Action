var $=(q,y,S)=>new Promise((b,o)=>{var ke=N=>{try{K(S.next(N))}catch(U){o(U)}},W=N=>{try{K(S.throw(N))}catch(U){o(U)}},K=N=>N.done?b(N.value):Promise.resolve(N.value).then(ke,W);K((S=S.apply(q,y)).next())});import{a6 as _,aI as G,as as D,a7 as w,a8 as a,a9 as l,aB as c,G as pl,w as fl,x as d,aL as _l,aM as ml,at as vl,u as e,ax as ye,aC as h,am as k,aD as O,aN as I,aH as v,aR as F,aJ as Z,aw as yl,bT as gl,au as bl,aY as hl,bh as Be,al as u,bK as kl,bs as xl,bc as wl,aP as Cl,aQ as $l,by as Dl,b2 as zl,bL as Ml,bx as Pl,bM as Il,bz as Tl,bO as Bl,aS as Rl,bP as Sl,aK as Nl,bC as Fl,aO as Ul,bD as El,bE as Ll,bF as Ol,bG as Hl,bH as Vl,bU as ql,bv as pt}from"./vendor-tP7MJkVm.js";import{_ as Al}from"./PageWrapper.vue_vue_type_style_index_0_lang-_BQo_egP.js";import{a as ft,r as Re,m as Se,g as _t,b as jl,c as mt,u as vt,d as Wl,e as Kl,f as Yl,h as yt}from"./create-6PTWGlCI.js";import{a as Zl,b as Gl,c as Ql,_ as Xl}from"./index.vue_vue_type_style_index_0_lang-DnSf_MPB.js";import{_ as Jl}from"./search2-line-b2mUmR4V.js";import{f as ge,_ as ea}from"./filePrefix-MOkS9-Rv.js";import{_ as ta,a as la}from"./find-replace-HTUYavB3.js";import{_ as aa}from"./swap-outlined-tp0eCcWN.js";import{d as na,c as oa,_ as sa,a as ia}from"./close-to-menu-alt-transition-itaC-Agp.js";import{_ as Fe,c as ra,a as ua,L as be}from"./index-YWZYq8iG.js";import{_ as ca}from"./runParamModal.vue_vue_type_script_setup_true_lang-BvXMVTYV.js";import{u as da}from"./useAppInject-BuU8lio7.js";import{u as pa}from"./useTransition-qMbJRxJj.js";import{d as Ne,a as fa,f as _a,b as ma,c as gt}from"./delete-03v50Q-m.js";import{s as va,f as bt,g as ht,a as ya,c as ga,d as ba,e as kt,h as ha,i as ka}from"./file-myfSNQEg.js";import{c as he,f as ie,a as xa,b as xt}from"./index-Fh6gHIZ9.js";import"./sharp-arrow-back-ios-o7qdCfpO.js";import"./useDesign-7GyM2Hwu.js";import"./clock-edit-outline-6Z39ocn4.js";import"./more-horiz-2P5zgSKI.js";import"./propTypes-LGH0h7_d.js";import"./content-copy-zEcwTW-4.js";import"./useRunLog-IJiSGNPm.js";import"./trash-O6SV7yvL.js";const wa={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ca=D("path",{fill:"currentColor",d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4m2 16H5V5h11.17L19 7.83V19m-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3M6 6h9v4H6V6Z"},null,-1),$a=[Ca];function Da(q,y){return _(),G("svg",wa,[...$a])}const za={name:"mdi-content-save-outline",render:Da},Ma={};function Pa(q,y){const S=za,b=c;return _(),w(b,null,{default:a(()=>[l(S,{style:{"vertical-align":"baseline"}})]),_:1})}const wt=Fe(Ma,[["render",Pa]]),Ia={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ta=D("path",{fill:"currentColor",d:"M19 7h-2.81c-.45-.8-1.07-1.5-1.82-2L16 3.41L14.59 2l-2.17 2.17a6.002 6.002 0 0 0-2.83 0L7.41 2L6 3.41L7.62 5c-.75.5-1.36 1.21-1.81 2H3v2h2.09c-.06.33-.09.66-.09 1v1H3v2h2v1c0 .34.03.67.09 1H3v2h2.81A6.002 6.002 0 0 0 13 19.65V19c0-.57.09-1.14.25-1.69c-.66.45-1.45.69-2.25.69c-2.21 0-4-1.79-4-4v-4c0-2.21 1.79-4 4-4s4 1.79 4 4v4c0 .19 0 .39-.05.58c.59-.54 1.29-.96 2.05-1.23V13h2v-2h-2v-1c0-.34-.03-.67-.09-1H19V7m-6 2v2H9V9h4m0 4v2H9v-2h4m4 3v6l5-3l-5-3Z"},null,-1),Ba=[Ta];function Ra(q,y){return _(),G("svg",Ia,[...Ba])}const Sa={name:"mdi-bug-play-outline",render:Ra},Na={};function Fa(q,y){const S=Sa,b=c;return _(),w(b,null,{default:a(()=>[l(S,{style:{"vertical-align":"baseline"}})]),_:1})}const Ct=Fe(Na,[["render",Fa]]),Ua={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ea=D("path",{fill:"currentColor",d:"M13 19c0 .34.04.67.09 1H6.5c-1.5 0-2.81-.5-3.89-1.57C1.54 17.38 1 16.09 1 14.58c0-1.3.39-2.46 1.17-3.48S4 9.43 5.25 9.15c.42-1.53 1.25-2.77 2.5-3.72S10.42 4 12 4c1.95 0 3.6.68 4.96 2.04C18.32 7.4 19 9.05 19 11c1.15.13 2.1.63 2.86 1.5c.51.57.84 1.21 1 1.92A5.908 5.908 0 0 0 19 13h-2v-2c0-1.38-.5-2.56-1.46-3.54C14.56 6.5 13.38 6 12 6s-2.56.5-3.54 1.46C7.5 8.44 7 9.62 7 11h-.5c-.97 0-1.79.34-2.47 1.03c-.69.68-1.03 1.5-1.03 2.47s.34 1.79 1.03 2.5c.68.66 1.5 1 2.47 1h6.59c-.05.33-.09.66-.09 1m7-1v-3h-2v3h-3v2h3v3h2v-3h3v-2h-3Z"},null,-1),La=[Ea];function Oa(q,y){return _(),G("svg",Ua,[...La])}const Ha={name:"mdi-cloud-plus-outline",render:Oa},Va={key:1,class:"font-bold text-xl"},qa={key:2},Aa={class:"font-bold text-xl"},ja={class:"pb-1 mr-3"},Wa={class:"pb-1 mr-3"},Ka={style:{"margin-bottom":"12px"}},Ya=pl({__name:"index",setup(q){const{message:y,confirm:S}=ra(),{getIsMobile:b}=da(),{t:o}=ua(),ke=fl(),W=d("fade-slide");pa(W);const K=d(),N=d(),U=d(o("routes.main.page.script.manage")),xe=d([]),we=d([]),re=d([]),H=d(""),Ue=d([]),Ee=d(0),Le=d(0),E=d([]),$t=d(""),Oe=d(""),He=d(""),Q=d(!b.value),X=d(b.value?"on":"off"),Ce=d(!1),A=d(b.value?13:15),P=d([]),L=d({}),Y=d(""),ue=d(!1),J=d(!1),ee=d(!1),te=d(!1),le=d(!1),B=d(!1),R=d(void 0),$e=d(!1),ce=d(!0),ae=d(!1),ne=d(!1),f=d(null),p=d(null),z=d({}),de=d(""),M=d({type:1,name:"",dir:""}),T=n=>$(this,null,function*(){switch(n){case"findBox":Ce.value=!Ce.value,B.value=!1;break;case"wordWrap":X.value=X.value==="on"?"off":"on",B.value=!1;break;case"minimap":Q.value=!Q.value,B.value=!1;break;case"showEditorShortcutsInfo":e(E.value)[`editor-${f.value.key}`].showShortCuts();break;case"siderCollapse":R.value=!R.value;break;case"save":$e.value=!0;const t=e(E.value)[`editor-${f.value.key}`].getValue();try{yield va({content:t,path:f.value.key}),y.success(o("editor.main.savedSuccess")),L.value[f.value.key].content=t}finally{$e.value=!1}break;case"clickContextMenu":ue.value=!1;break;case"exitContextMenu":ue.value=!1,g("contextMenu");break}}),Dt=n=>{if(!f.value)return;const t=f.value.key;n!==t&&(L.value[t].content=e(E.value)[`editor-${t}`].getValue())},pe=n=>{P.value.forEach(t=>{t.key===n&&(U.value=t.label,Y.value=n,f.value=t)})},oe=n=>{P.value.forEach((t,r)=>{t.key===n&&(P.value.splice(r,1),delete L.value[t.key],delete E.value[`editor-${t.key}`],P.value.length>0?Y.value===n&&pe(P.value[P.value.length-1].key):(g("content"),g("tmpData"),Ae(t.key)))})},zt=n=>{Dt(n),pe(n)},Mt=n=>{oe(n.value)},se=(n,t,r)=>{if(!r.node)return;const s=r.node,m=s.title;switch(r.action){case"expand":s.prefix=()=>u(c,null,{default:()=>u(he.open[m]||xa)});break;case"collapse":s.prefix=()=>u(c,null,{default:()=>u(he.close[m]||ie)});break}},Pt=n=>u(F,{placement:"left",delay:1500,duration:500,showArrow:!1,overlap:!0,style:{width:"max-content",fontSize:"12px",right:"26px"}},{trigger:()=>n.option.label,default:()=>u(h,{style:"gap: 4px"},{default:()=>[n.option.key,u(k,{text:!0,type:"primary",focusable:!1,onClick:()=>Nt(n.option.key)},{default:()=>u(oa)})]})}),Ve=(n,t,r)=>$(this,null,function*(){if(r.action!=="select")return;const s=r.node;if(s.isDir||s.disabled)return;b.value&&(R.value=!0),P.value.find(C=>C.key===s.key)||(yield qe(s.key,s.language),P.value.push(s)),pe(s.key)}),It=r=>$(this,[r],function*({node:n,dragNode:t}){if(!n.isDir)return;const s=t.key,m=`${n.key}${s.includes("\\")?"\\":"/"}${t.label}`;if(s!==m)try{yield bt({path:s,newPath:m}),y.success(o("file.move.success")),oe(s),j()}catch(C){}}),De=(n,t,r)=>{switch(r.action){case"select":r.node&&(z.value=r.node,M.value.dir=r.node.key);break;case"delete":case"clear":case"unselect":g("treeSelect");break}},Tt=n=>$(this,null,function*(){const t=r=>{r.length&&r.forEach(s=>{if(s.type===0)Object.assign(s,{key:s.path,label:s.title,isDir:!0,canRun:!1,disabled:!1,icon:()=>u(ie),prefix:()=>u(c,null,{default:()=>u(he.close[s.title]||ie)})}),t(s.children),s.children.length||(Object.assign(s,{children:null}),s.prefix=()=>u(c,null,{default:()=>u(yt)}));else{const m=s.name;if(m){const C=m.substring(m.lastIndexOf(".")+1),x=xt[C]||{};Object.assign(s,{key:s.path,label:m,isDir:!1,language:x.language||"plaintext",canRun:x.canRun||!1,disabled:x.disabled||!x.language,icon:()=>u(x.icon||ge),prefix:()=>u(c,null,{default:()=>u(x.icon||ge)})})}}})};return t(n),n}),Bt=n=>$(this,null,function*(){const t=r=>{r.length&&r.forEach(s=>{s.type===0&&(Object.assign(s,{key:s.path,label:s.title,isDir:!0,canRun:!1,disabled:!1,icon:()=>u(ie),prefix:()=>u(c,null,{default:()=>u(he.close[s.title]||ie)})}),t(s.children),s.children.length||(Object.assign(s,{children:null}),s.prefix=()=>u(c,null,{default:()=>u(yt)})))})};return t(n),n}),Rt=({option:n})=>({onContextmenu(t){Ue.value=ze("ContextMenu",{option:n}),ue.value=!0,Ee.value=t.clientX,Le.value=t.clientY,t.preventDefault(),p.value=n}}),ze=(n,{option:t})=>{const r={save:{label:o("file.save.button"),key:"save",icon:()=>u(c,null,{default:()=>u(wt)}),props:{onClick:()=>{T("save")}}},run:{label:o("file.run.button"),key:"run",icon:()=>u(c,null,{default:()=>u(Ct)}),props:{onClick:()=>{je()}}},attribute:{label:o("file.attribute.button"),key:"attribute",icon:()=>u(c,null,{default:()=>u(ft)}),props:{onClick:()=>{Xe()}}},create:{label:o("file.create.button"),key:"create",icon:()=>u(c,null,{default:()=>u(mt)}),props:{onClick:()=>{Wt()}}},upload:{label:o("file.upload.button"),key:"upload",icon:()=>u(c,null,{default:()=>u(vt)}),props:{onClick:()=>{Gt()}}},more:{label:()=>u(Be,{style:{color:"var(--app-primary-color)"}},{default:()=>o("file.more.button")}),key:"more",icon:()=>u(c,{color:"var(--app-primary-color)"},{default:()=>u(_t)}),children:[{label:o("file.download.button"),key:"download",icon:()=>u(c,null,{default:()=>u(t.isDir?fa:_a)}),props:{onClick:()=>{Qe()}}},{label:o("file.move.button"),key:"move",icon:()=>u(c,null,{default:()=>u(Se)}),props:{onClick:()=>{We()}}},{label:o("file.rename.button"),key:"rename",icon:()=>u(c,null,{default:()=>u(Re)}),props:{onClick:()=>{Ye()}}},{type:"divider",key:"d1"},{label:()=>u(Be,{style:{color:"var(--app-error-color)"}},{default:()=>o("file.delete.button")}),key:"delete",icon:()=>u(c,{color:"var(--app-error-color)"},{default:()=>u(Ne)}),props:{onClick:()=>{Ge()}}}]}};let s=[];return n==="ContextMenu"?(s=[r.attribute],t.isDir?s=[r.create,r.upload,...s,...r.more.children]:t.disabled?s=[...s,...r.more.children]:(s=[...s,r.more],t.canRun&&s.unshift(r.run))):n==="MobileHeader"?(s=[r.save,r.more.children[0],r.more.children[1],r.more.children[2],r.attribute,r.more.children[3],r.more.children[4]],t.canRun&&s.splice(1,0,r.run)):n==="HeaderSubTitle"&&(s=[r.create,r.upload]),s},j=()=>$(this,null,function*(){ce.value=!0;const n=yield ht({}),t=yield Tt(n);xe.value=t,ce.value=!1}),Me=()=>$(this,null,function*(){ne.value=!0;const n=yield ht({isDir:"true"}),t=yield Bt(n);re.value=t,ne.value=!1}),St=()=>$(this,null,function*(){const n=ke.currentRoute.value.query.path;if(!n)return;const t=n.split("/").pop()||"",r=t.substring(t.lastIndexOf(".")+1),s=xt[r]||{},m=s.language||"plaintext";if(m)if(yield qe(n,m),L.value[n].content){we.value=n.split("/").slice(0,-1).map((x,fe,_e)=>_e.slice(0,fe+1).join("/"));const C={key:n,label:t,isDir:!1,language:m,canRun:s.canRun||!1,disabled:s.disabled||!m,icon:()=>u(s.icon||ge),prefix:()=>u(c,null,{default:()=>u(s.icon||ge)})};P.value.push(C),pe(C.key),b.value&&(R.value=!0)}else L.value={}}),qe=(n,t)=>$(this,null,function*(){$t.value=t||"plaintext",ae.value=!0;try{const r=yield ya({path:encodeURI(n)});ae.value=!1,r?L.value[n]={content:r,language:t}:(L.value[n]={content:"",language:t},y.info(o("page.script.fileContentIsEmptyMsg")))}catch(r){g("content"),g("tmpData")}finally{ae.value=!1}}),Ae=n=>{E.value.length>0&&E.value[`editor-${n}`]&&(E.value[`editor-${n}`].dispose(),delete e(E.value)[n])},Nt=n=>{kl(n)?y.success(o("common.copyOk")):y.error(o("common.copyFail"))},Pe=()=>({ghost:!1,tertiary:!0}),g=n=>{switch(n){case"title":U.value=o("routes.main.page.script.manage");break;case"content":g("title"),f.value=null,Y.value="",b.value&&(R.value=!1);break;case"contextMenu":p.value=null;break;case"renameInput":de.value="";break;case"treeSelect":z.value={},M.value.dir=void 0;break;case"createData":M.value={type:1,name:void 0,dir:void 0};break;case"tmpData":g("contextMenu"),g("renameInput"),g("treeSelect"),g("createData");break}},je=()=>{var n;Oe.value=p.value?p.value.key:f.value.key,He.value=p.value?p.value.label:f.value.label;try{(n=K.value)==null||n.open({title:He.value,runPath:Oe.value})}catch(t){}finally{g("tmpData")}},Ft=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(Se)}),We=()=>{ee.value=!0,Me()},Ut=()=>$(this,null,function*(){const n=p.value?p.value.key:f.value.key,t=p.value?p.value.label:f.value.label;let r=z.value?z.value.key:"";r=`${r}${n.includes("\\")?"\\":"/"}${t}`;try{yield bt({path:n,newPath:r}),y.success(o("file.move.success")),oe(n),j()}catch(s){}finally{g("tmpData")}}),Et=()=>({disabled:!z.value}),Ke=()=>{ee.value=!1,g("treeSelect")},Lt=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(Re)}),Ye=()=>{J.value=!0},Ot=()=>$(this,null,function*(){const n=p.value?p.value.key:f.value.key;try{yield ga({path:n,name:de.value}),y.success(o("file.rename.success")),oe(n),j()}catch(t){}finally{g("tmpData")}}),Ht=()=>({disabled:!de.value}),Ze=()=>{J.value=!1,g("tmpData")},Vt=n=>{de.value=n},qt=n=>!["<",">","?","*","/"].some(t=>n.includes(t)),Ge=()=>$(this,null,function*(){const n=p.value?p.value.key:f.value.key;S.error({title:o("file.delete.title"),content:o("file.delete.confirm"),icon:()=>u(c,{style:"vertical-align: 0"},{default:()=>u(Ne)}),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:o("file.delete.button"),onPositiveClick:()=>$(this,null,function*(){try{yield ba({path:n}),y.success(o("file.delete.success")),oe(n),j()}catch(t){}finally{g("tmpData")}}),onNegativeClick:()=>{g("tmpData")},negativeButtonProps:{ghost:!1,tertiary:!0}})}),Qe=()=>$(this,null,function*(){const n=p.value?p.value.key:f.value.key,t=p.value?p.value.label:f.value.label,r=p.value?p.value.isDir:f.value.isDir,s=y.info(o("file.download.wait"),{duration:0,icon:()=>u(c,null,{default:()=>u(ma)})});try{if(r){const{code:m,message:C,blob:x}=yield kt({path:n});s.destroy(),m?(y.success(o("file.download.success")),x&&gt(x,`${t}.zip`)):C&&y.error(C)}else{const{code:m,message:C,blob:x}=yield kt({path:n});s.destroy(),m?(y.success(o("file.download.success")),x&&gt(x,t)):C&&y.error(C)}}catch(m){s.destroy(),y.error(o("file.download.fail"),{keepAliveOnHover:!0})}finally{g("tmpData")}}),Xe=()=>$(this,null,function*(){var r;const n=p.value?p.value.key:f.value.key,t=p.value?p.value.isDir:f.value.isDir;try{(r=N.value)==null||r.open({path:n,isDir:t})}catch(s){}finally{g("tmpData")}}),At={name:{required:!0},dir:{required:!0}},jt=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(mt)}),Wt=()=>{te.value=!0,p.value&&({label:z.value.label,key:z.value.key}=p.value,M.value.dir=z.value.key),Me()},Kt=()=>$(this,null,function*(){const n=M.value.type,t=M.value.name,r=M.value.dir;try{yield ha({type:n,name:t,dir:r}),y.success(o("file.create.success")),j()}catch(s){}finally{g("tmpData")}}),Je=()=>{te.value=!1,g("tmpData")},Yt=()=>({disabled:!z.value||!M.value.name}),Zt=()=>u(c,{style:"vertical-align: 0"},{default:()=>u(vt)}),Gt=()=>{le.value=!0,p.value&&({label:z.value.label,key:z.value.key}=p.value),Me()},Qt=({file:n,onFinish:t,onError:r,onProgress:s})=>{const m=n.name,C=new FormData;C.append("file",n.file),ka({params:C,path:z.value.key,onUploadProgress:({progress:x})=>{s({percent:Math.ceil((x||0)*100)})}}).then(()=>{y.success(`${m} ${o("file.upload.success")}`),j(),t()}).catch(x=>{y.error(x.message,{keepAliveOnHover:!0}),r()})},Xt=()=>{le.value=!1,g("tmpData")};return _l(()=>$(this,null,function*(){yield j(),St()})),ml(()=>{P.value.length>0&&Ae(P.value[0].key)}),(n,t)=>{const r=sa,s=ia,m=xl,C=Ha,x=wl,fe=Zl,_e=Gl,et=Cl,tt=ta,lt=aa,at=la,nt=$l,Jt=ea,ot=Dl,st=Jl,me=zl,it=Ml,rt=Pl,ut=Il,el=Tl,ct=Bl,tl=Ql,ll=Rl,al=Sl,dt=Nl,ve=Fl,Ie=Ul,nl=El,ol=Wl,sl=Ll,il=Ol,rl=Kl,ul=Yl,Te=Hl,cl=Vl,dl=Al;return _(),w(dl,{ref:"pageWrapper","content-full":!0},vl({title:a(()=>[l(e(h),null,{default:a(()=>[e(b)&&e(f)?(_(),w(ye,{key:0,name:e(W),mode:"in-out",appear:""},{default:a(()=>[l(e(k),{strong:"",tertiary:"",size:"tiny",style:{height:"29px",padding:"0 8px"},focusable:!1,onClick:t[0]||(t[0]=i=>T("siderCollapse"))},{icon:a(()=>[l(e(c),{size:20},{default:a(()=>[e(R)?(_(),w(s,{key:1,style:{"vertical-align":"baseline"}})):(_(),w(r,{key:0,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})]),_:1},8,["name"])):Z("",!0),e(b)?(_(),G("div",qa,[l(m,{style:{height:"100%","max-width":"170px"}},{tooltip:a(()=>[D("span",null,v(e(U)),1)]),default:a(()=>[D("span",Aa,v(e(U)),1)]),_:1})])):(_(),G("span",Va,v(e(U)),1))]),_:1})]),subtitle:a(()=>[l(e(h),{style:yl(e(b)?"gap: 4px":"gap: 0")},{default:a(()=>[e(b)&&e(f)?Z("",!0):(_(),w(x,{key:0,trigger:"click",options:ze("HeaderSubTitle",{option:e(f)})},{default:a(()=>[l(e(k),{circle:"",strong:"",quaternary:!e(b),secondary:e(b),size:"small",focusable:!1,style:{"vertical-align":"-0.15em"}},{default:a(()=>[l(C)]),_:1},8,["quaternary","secondary"])]),_:1},8,["options"]))]),_:1},8,["style"])]),default:a(()=>[l(dt,{bordered:!e(b),style:{height:"100%","word-break":"unset"},"content-style":"padding: 0; height: 100%"},{default:a(()=>[l(al,{"has-sider":"",style:{height:"100%"},"content-style":"height: 100%"},{default:a(()=>[e(b)?(_(),w(ut,{key:1,class:"scripts-container",width:"100%","content-style":"display: flex; flex-direction: column; height: 100%; padding: .8em 0 0 .8em","trigger-style":"margin-right: .75em","collapsed-trigger-style":"margin-right: -0.75em","collapsed-width":0,bordered:!1,"show-trigger":!1,"show-collapsed-content":!1,collapsed:e(R),"on-update:collapsed":i=>R.value=i,"native-scrollbar":!1},{default:a(()=>[D("div",Wa,[l(me,{value:e(H),"onUpdate:value":t[22]||(t[22]=i=>O(H)?H.value=i:null),clearable:"",size:"small",style:{"margin-bottom":".5em"},placeholder:e(o)("page.script.searchInputPlaceholder")},{prefix:a(()=>[l(st)]),_:1},8,["value","placeholder"])]),l(rt,{"x-scrollable":"",class:"flex-1 pr-3"},{default:a(()=>[l(it,{"expand-on-click":"","block-line":"",style:{"font-size":"15px"},"show-irrelevant-nodes":!1,pattern:e(H),data:e(xe),"default-expanded-keys":e(we),"on-update:expanded-keys":se,"on-update:selected-keys":Ve},null,8,["pattern","data","default-expanded-keys"]),l(el,{right:20,bottom:20})]),_:1}),l(be,{show:e(ce)},null,8,["show"])]),_:1},8,["collapsed","on-update:collapsed"])):(_(),w(ut,{key:0,class:"scripts-container",width:"320","content-style":"display: flex; flex-direction: column; height: 100%; padding: .8em 0 0 .8em",bordered:"","collapsed-width":0,"show-trigger":"bar","show-collapsed-content":!1,"native-scrollbar":!1,collapsed:e(R),"on-update:collapsed":R.value=void 0},{default:a(()=>[D("div",ja,[l(me,{value:e(H),"onUpdate:value":t[19]||(t[19]=i=>O(H)?H.value=i:null),clearable:"",style:{"margin-bottom":".5em"},placeholder:e(o)("page.script.searchInputPlaceholder")},{prefix:a(()=>[l(st)]),_:1},8,["value","placeholder"])]),l(rt,{"x-scrollable":"",class:"flex-1 pr-3"},{default:a(()=>[l(it,{"expand-on-click":"",draggable:"","show-line":"","show-irrelevant-nodes":!1,"node-props":Rt,pattern:e(H),data:e(xe),"default-expanded-keys":e(we),"render-label":Pt,"on-update:expanded-keys":se,"on-update:selected-keys":Ve,onDrop:It},null,8,["pattern","data","default-expanded-keys"]),l(x,{trigger:"manual",placement:"bottom-start",show:e(ue),options:e(Ue),x:e(Ee),y:e(Le),onSelect:t[20]||(t[20]=i=>T("clickContextMenu")),onClickoutside:t[21]||(t[21]=i=>T("exitContextMenu"))},null,8,["show","options","x","y"])]),_:1}),l(be,{show:e(ce)},null,8,["show"])]),_:1},8,["collapsed","on-update:collapsed"])),e(P).length>0?(_(),w(ct,{key:2,class:"tab-panel"},{default:a(()=>[l(e(gl),{value:e(Y),"onUpdate:value":t[23]||(t[23]=i=>O(Y)?Y.value=i:null),"drag-sort":"",direction:"vertical",style:{height:"100%",width:"100%"},theme:"card","on-drag-sort":()=>{},onChange:zt,onRemove:Mt},{default:a(()=>[(_(!0),G(hl,null,bl(e(P),i=>(_(),w(e(ql),{key:i.key,value:i.key,removable:"",style:{height:"100%",width:"100%",padding:"0"},"destroy-on-hide":!1},{label:a(()=>[e(b)?(_(),w(e(h),{key:1,style:{gap:"2px"}},{default:a(()=>[(_(),w(pt(i.prefix),{style:{"vertical-align":"-0.15em"}})),I(" "+v(i.label),1)]),_:2},1024)):(_(),w(e(F),{key:0,placement:"top",trigger:"hover",overlap:"",delay:1e3},{trigger:a(()=>[l(e(h),{style:{gap:"2px"}},{default:a(()=>[(_(),w(pt(i.prefix),{style:{"vertical-align":"-0.15em"}})),I(" "+v(i.label),1)]),_:2},1024)]),default:a(()=>[D("span",null,v(i.key),1)]),_:2},1024))]),default:a(()=>[l(ye,{name:"fade",mode:"out-in",appear:""},{default:a(()=>[l(Xl,{ref_for:!0,ref:V=>e(E)[`editor-${i.key}`]=V,style:{height:"100%",padding:"0","z-index":"999999"},value:{content:e(L)[i.key].content,language:e(L)[i.key].language},"word-wrap":e(X),minimap:e(Q),"font-size":e(A),"find-box":e(Ce)},null,8,["value","word-wrap","minimap","font-size","find-box"])]),_:2},1024)]),_:2},1032,["value"]))),128)),l(be,{show:e(ae)},null,8,["show"])]),_:1},8,["value"])]),_:1})):(_(),w(ct,{key:3},{default:a(()=>[e(R)!==!0?(_(),w(ll,{key:0,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-description":!0,description:e(o)("common.selectFileEmptyDesc")},{icon:a(()=>[l(e(c),null,{default:a(()=>[l(tl)]),_:1})]),_:1},8,["description"])):Z("",!0),l(be,{show:e(ae)},null,8,["show"])]),_:1}))]),_:1})]),_:1},8,["bordered"]),l(ve,{show:e(J),"onUpdate:show":t[24]||(t[24]=i=>O(J)?J.value=i:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Lt,title:e(o)("file.rename.title"),"positive-text":e(o)("common.okText"),"negative-text":e(o)("common.cancelText"),"on-close":Ze,"positive-button-props":Ht(),"negative-button-props":Pe(),onNegativeClick:t[25]||(t[25]=i=>Ze()),onPositiveClick:t[26]||(t[26]=i=>Ot())},{default:a(()=>[l(me,{clearable:"",style:{"margin-top":"5px"},"default-value":e(p)?e(p).label:e(f)?e(f).label:null,"allow-input":qt,onInput:Vt},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ve,{show:e(ee),"onUpdate:show":t[27]||(t[27]=i=>O(ee)?ee.value=i:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Ft,title:e(o)("file.move.title"),"positive-text":e(o)("common.okText"),"negative-text":e(o)("common.cancelText"),"on-close":Ke,"positive-button-props":Et(),"negative-button-props":Pe(),onNegativeClick:t[28]||(t[28]=i=>Ke()),onPositiveClick:t[29]||(t[29]=i=>Ut())},{default:a(()=>[l(Ie,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(ne),options:e(re),"on-update:expanded-keys":se,"on-update:value":De},null,8,["loading","options"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ve,{show:e(le),"onUpdate:show":t[30]||(t[30]=i=>O(le)?le.value=i:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Zt,title:!e(z)&&!e(p)?e(o)("file.upload.needSelect"):e(o)("file.upload.title"),"on-close":Xt},{default:a(()=>[l(e(h),{vertical:""},{default:a(()=>{var i;return[l(Ie,{"default-value":(i=e(z))==null?void 0:i.key,clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},placeholder:e(o)("file.upload.selectPlaceholder"),"consistent-menu-width":!1,loading:e(ne),options:e(re),"on-update:expanded-keys":se,"on-update:value":De},null,8,["default-value","placeholder","loading","options"]),l(nl,{type:"info",closable:""},{default:a(()=>[I(v(e(o)("file.upload.info")),1)]),_:1}),l(il,{multiple:"","directory-dnd":"",disabled:!e(z)&&!e(p),"custom-request":Qt},{default:a(()=>[l(sl,null,{default:a(()=>[D("div",Ka,[l(e(c),{size:"48",depth:3},{default:a(()=>[l(ol)]),_:1})]),l(e(Be),{style:{"font-size":"16px"}},{default:a(()=>[I(v(e(o)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]}),_:1})]),_:1},8,["show","title"]),l(ve,{show:e(te),"onUpdate:show":t[34]||(t[34]=i=>O(te)?te.value=i:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:jt,title:e(o)("file.create.title"),"on-close":Je,"positive-text":e(o)("common.okText"),"negative-text":e(o)("common.cancelText"),"positive-button-props":Yt(),"negative-button-props":Pe(),onNegativeClick:t[35]||(t[35]=i=>Je()),onPositiveClick:t[36]||(t[36]=i=>Kt())},{default:a(()=>[l(dt,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:a(()=>[l(cl,{model:e(M),rules:At,"label-placement":"left",style:{"padding-top":"1em"}},{default:a(()=>[l(Te,{label:e(o)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-top":"1em"}},{default:a(()=>[l(e(h),{style:{width:"100%",height:"140px",gap:"0"},justify:"space-around"},{default:a(()=>[l(e(k),{strong:"",dashed:"",type:e(M).type===1?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[31]||(t[31]=i=>e(M).type=1)},{default:a(()=>[l(e(h),{vertical:"",style:{gap:"20px"}},{default:a(()=>[l(e(c),{size:48},{default:a(()=>[l(rl,{style:{"vertical-align":"base-line"}})]),_:1}),I(" "+v(e(o)("file.create.form.typeFile")),1)]),_:1})]),_:1},8,["type"]),l(e(k),{strong:"",dashed:"",type:e(M).type===0?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[32]||(t[32]=i=>e(M).type=0)},{default:a(()=>[l(e(h),{vertical:"",style:{gap:"20px"}},{default:a(()=>[l(e(c),{size:48},{default:a(()=>[l(ul,{style:{"vertical-align":"base-line"}})]),_:1}),I(" "+v(e(o)("file.create.form.typeFolder")),1)]),_:1})]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),l(Te,{label:e(o)("file.create.form.name"),path:"name"},{default:a(()=>[l(me,{value:e(M).name,"onUpdate:value":t[33]||(t[33]=i=>e(M).name=i),clearable:"",placeholder:e(o)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(Te,{label:e(o)("file.create.form.path"),path:"dir"},{default:a(()=>{var i;return[l(Ie,{"default-value":(i=e(z))==null?void 0:i.key,clearable:"","show-path":!0,separator:" / ",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(ne),options:e(re),"on-update:expanded-keys":se,"on-update:value":De},null,8,["default-value","loading","options"])]}),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(ca,{ref_key:"runParamModal",ref:K},null,512),l(jl,{ref_key:"fileAttributeModal",ref:N},null,512)]),_:2},[e(b)?{name:"extra",fn:a(()=>[e(f)?(_(),w(ye,{key:0,name:e(W),mode:"out-in",appear:""},{default:a(()=>[l(e(h),null,{default:a(()=>[l(nt,{trigger:"manual",style:{padding:"8px"},show:e(B),"show-arrow":!1,placement:"bottom"},{trigger:a(()=>[l(e(k),{strong:"",quaternary:"",size:"small",type:e(B)?"primary":"tertiary",style:{padding:"6px"},focusable:!1,onClick:t[14]||(t[14]=i=>B.value=!e(B))},{default:a(()=>[l(e(c),{size:"18"},{default:a(()=>[l(fe,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1},8,["type"])]),default:a(()=>[l(e(h),{vertical:""},{default:a(()=>[l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(_e,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(et,{value:e(A),"onUpdate:value":t[15]||(t[15]=i=>O(A)?A.value=i:null),min:12,max:40,"button-placement":"both",size:"small",class:"max-w-94px",style:{"text-align":"center"}},null,8,["value"])]),_:1}),l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(tt,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(e(k),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[16]||(t[16]=i=>T("findBox"))},{default:a(()=>[I(v(e(o)("editor.switch.findBtn")),1)]),_:1})]),_:1}),l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(X)==="on"?"var(--app-primary-color)":void 0},{default:a(()=>[l(lt,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(k),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[17]||(t[17]=i=>T("wordWrap"))},{default:a(()=>[I(v(e(o)("editor.switch.wordWrapBtn")),1)]),_:1})]),_:1}),l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(Q)?"var(--app-primary-color)":void 0},{default:a(()=>[l(at,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(k),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[18]||(t[18]=i=>T("minimap"))},{default:a(()=>[I(v(e(o)("editor.switch.minimapBtn")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),l(ot,null,{default:a(()=>[l(x,{trigger:"click",placement:"bottom-start",options:ze("MobileHeader",{option:e(f)})},{default:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",focusable:!1},{icon:a(()=>[l(e(_t))]),default:a(()=>[I(" "+v(e(o)("file.more.button")),1)]),_:1})]),_:1},8,["options"])]),_:1})]),_:1})]),_:1},8,["name"])):Z("",!0)]),key:"1"}:{name:"extra",fn:a(()=>[e(f)?(_(),w(ye,{key:0,name:e(W),mode:"out-in",appear:""},{default:a(()=>[l(e(h),null,{default:a(()=>[l(e(h),{style:{gap:"0"}},{default:a(()=>[l(nt,{trigger:"manual",style:{padding:"8px"},show:e(B),"show-arrow":!1,placement:"bottom"},{trigger:a(()=>[l(e(k),{strong:"",quaternary:"",size:"small",type:e(B)?"primary":"tertiary",style:{padding:"6px"},focusable:!1,onClick:t[1]||(t[1]=i=>B.value=!e(B))},{default:a(()=>[l(e(c),{size:"18"},{default:a(()=>[l(fe,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1},8,["type"])]),default:a(()=>[l(e(h),{vertical:""},{default:a(()=>[l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(_e,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(et,{value:e(A),"onUpdate:value":t[2]||(t[2]=i=>O(A)?A.value=i:null),min:12,max:40,"button-placement":"both",size:"small",class:"max-w-94px",style:{"text-align":"center"}},null,8,["value"])]),_:1}),l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20},{default:a(()=>[l(tt,{style:{"vertical-align":"-0.4em"}})]),_:1}),l(e(k),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[3]||(t[3]=i=>T("findBox"))},{default:a(()=>[I(v(e(o)("editor.switch.findBtn")),1)]),_:1})]),_:1}),l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(X)==="on"?"var(--app-primary-color)":void 0},{default:a(()=>[l(lt,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(k),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[4]||(t[4]=i=>T("wordWrap"))},{default:a(()=>[I(v(e(o)("editor.switch.wordWrapBtn")),1)]),_:1})]),_:1}),l(e(h),{size:"small"},{default:a(()=>[l(e(c),{size:20,color:e(Q)?"var(--app-primary-color)":void 0},{default:a(()=>[l(at,{style:{"vertical-align":"-0.4em"}})]),_:1},8,["color"]),l(e(k),{strong:"",tertiary:"",size:"small",style:{width:"94px"},onClick:t[5]||(t[5]=i=>T("minimap"))},{default:a(()=>[I(v(e(o)("editor.switch.minimapBtn")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),l(e(F),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",quaternary:"",size:"small",type:"tertiary",style:{padding:"6px"},focusable:!1,onClick:t[6]||(t[6]=i=>T("showEditorShortcutsInfo"))},{default:a(()=>[l(e(c),{size:"18"},{default:a(()=>[l(Jt,{style:{"vertical-align":"baseline"}})]),_:1})]),_:1})]),default:a(()=>[D("span",null,v(e(o)("editor.switch.shortcutsTips")),1)]),_:1})]),_:1}),l(ot,null,{default:a(()=>{var i;return[l(e(F),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[7]||(t[7]=V=>Xe())},{icon:a(()=>[l(e(ft))]),_:1})]),default:a(()=>[D("span",null,v(e(o)("file.attribute.button")),1)]),_:1}),l(e(F),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[8]||(t[8]=V=>Qe())},{icon:a(()=>[l(e(na))]),_:1})]),default:a(()=>[D("span",null,v(e(o)("file.download.button")),1)]),_:1}),l(e(F),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[9]||(t[9]=V=>Ge())},{icon:a(()=>[l(e(Ne))]),_:1})]),default:a(()=>[D("span",null,v(e(o)("file.delete.button")),1)]),_:1}),l(e(F),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[10]||(t[10]=V=>Ye())},{icon:a(()=>[l(e(Re))]),_:1})]),default:a(()=>[D("span",null,v(e(o)("file.rename.button")),1)]),_:1}),l(e(F),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[11]||(t[11]=V=>We())},{icon:a(()=>[l(e(Se))]),_:1})]),default:a(()=>[D("span",null,v(e(o)("file.move.button")),1)]),_:1}),(i=e(f))!=null&&i.canRun?(_(),w(e(F),{key:0,placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",focusable:!1,onClick:t[12]||(t[12]=V=>je())},{icon:a(()=>[l(e(Ct))]),_:1})]),default:a(()=>[D("span",null,v(e(o)("file.run.button")),1)]),_:1})):Z("",!0),l(e(F),{placement:"bottom",trigger:"hover",delay:500},{trigger:a(()=>[l(e(k),{strong:"",tertiary:"",size:"small",loading:e($e),focusable:!1,onClick:t[13]||(t[13]=V=>T("save"))},{icon:a(()=>[l(e(wt))]),_:1},8,["loading"])]),default:a(()=>[D("span",null,v(e(o)("editor.main.saveButton")),1)]),_:1})]}),_:1})]),_:1})]),_:1},8,["name"])):Z("",!0)]),key:"0"}]),1536)}}}),kn=Fe(Ya,[["__scopeId","data-v-2d870f84"]]);export{kn as default};
